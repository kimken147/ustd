(()=>{var ea=Object.create;var nr=Object.defineProperty;var ta=Object.getOwnPropertyDescriptor;var ra=Object.getOwnPropertyNames;var oa=Object.getPrototypeOf,sa=Object.prototype.hasOwnProperty;var T=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var aa=(e,t)=>{for(var r in t)nr(e,r,{get:t[r],enumerable:!0})},ar=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ra(t))!sa.call(e,s)&&s!==r&&nr(e,s,{get:()=>t[s],enumerable:!(o=ta(t,s))||o.enumerable});return e},Pe=(e,t,r)=>(ar(e,t,"default"),r&&ar(r,t,"default")),h=(e,t,r)=>(r=e!=null?ea(oa(e)):{},ar(t||!e||!e.__esModule?nr(r,"default",{value:e,enumerable:!0}):r,e));var ge={};aa(ge,{AuthPage:()=>Hs,Authenticated:()=>Ys,CanAccess:()=>Zs,ErrorComponent:()=>As,GitHubBanner:()=>Xs,LayoutWrapper:()=>qs,LoginPage:()=>At,ReadyPage:()=>er,Refine:()=>js,RouteChangeHandler:()=>tr,UndoableQueue:()=>Cr,createTreeView:()=>lt,file2Base64:()=>Mo,getDefaultFilter:()=>Eo,getDefaultSortOrder:()=>ho,getNextPageParam:()=>dt,getPreviousPageParam:()=>mt,handleUseParams:()=>lr,importCSVMapper:()=>at,parseTableParams:()=>nt,parseTableParamsFromQuery:()=>bo,routeGenerator:()=>je,setInitialFilters:()=>ct,setInitialSorters:()=>pt,stringifyTableParams:()=>it,unionFilters:()=>Ne,unionSorters:()=>ut,useApiUrl:()=>Fo,useAuthenticated:()=>wt,useBreadcrumb:()=>Da,useCan:()=>Ar,useCanWithoutCache:()=>ga,useCancelNotification:()=>ye,useCheckError:()=>G,useCreate:()=>Xe,useCreateMany:()=>Ot,useCustom:()=>Oo,useCustomMutation:()=>Ko,useDataProvider:()=>H,useDelete:()=>Ao,useDeleteMany:()=>Ho,useExport:()=>la,useForgotPassword:()=>It,useForm:()=>da,useGetIdentity:()=>Mt,useGetLocale:()=>ns,useHandleNotification:()=>K,useImport:()=>fa,useInfiniteList:()=>_o,useInvalidate:()=>pe,useIsExistAuthentication:()=>Co,useList:()=>qe,useLiveMode:()=>hr,useLog:()=>He,useLogList:()=>ba,useLogin:()=>_e,useLogout:()=>Ut,useMany:()=>Bt,useMenu:()=>Qs,useModal:()=>ya,useMutationMode:()=>de,useNavigation:()=>Z,useNotification:()=>re,useOne:()=>Ye,usePermissions:()=>Zr,usePublish:()=>ce,useRedirectionAfterSubmission:()=>Lr,useRefineContext:()=>Le,useRegister:()=>St,useResource:()=>N,useResourceSubscription:()=>Ee,useResourceWithRoute:()=>ee,useRouterContext:()=>Q,useSelect:()=>Ca,useSetLocale:()=>as,useShow:()=>ma,useSubscription:()=>pa,useSyncWithLocation:()=>Jt,useTable:()=>Pa,useTitle:()=>ls,useTranslate:()=>U,useUpdate:()=>Ft,useUpdateMany:()=>No,useUpdatePassword:()=>Lt,useWarnAboutChange:()=>et,userFriendlyResourceName:()=>ke});Pe(ge,T("@tanstack/react-query"));var ve=h(T("react"));var qr=T("react");var ir=h(T("react")),_r=T("@tanstack/react-query");var O=ir.default.createContext({}),jr=({children:e,isProvided:t,...r})=>{let{replace:o}=Z(),s=(0,_r.useQueryClient)(),a=()=>{s.invalidateQueries(["useAuthenticated"]),s.invalidateQueries(["getUserIdentity"]),s.invalidateQueries(["usePermissions"])},n=async l=>{var y;try{let P=await((y=r.login)==null?void 0:y.call(r,l));return a(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},m=async l=>{var y;try{let P=await((y=r.register)==null?void 0:y.call(r,l));return a(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},x=async l=>{var y;try{let P=await((y=r.logout)==null?void 0:y.call(r,l));return a(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},u=async l=>{var y;try{return await((y=r.checkAuth)==null?void 0:y.call(r,l)),Promise.resolve()}catch(P){return P!=null&&P.redirectPath&&o(P.redirectPath),Promise.reject(P)}};return ir.default.createElement(O.Provider,{value:{...r,login:n,logout:x,checkAuth:u,register:m,isProvided:t}},e)};var Yr=T("@tanstack/react-query"),Zr=e=>{let{getPermissions:t}=(0,qr.useContext)(O);return(0,Yr.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})};var Jr=h(T("react")),Xr=T("@tanstack/react-query");var Mt=({queryOptions:e}={})=>{let{getUserIdentity:t}=Jr.default.useContext(O);return(0,Xr.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})};var eo=h(T("react")),to=T("@tanstack/react-query");var Ut=({mutationOptions:e}={})=>{let{push:t}=Z(),{logout:r}=eo.default.useContext(O),{open:o}=re();return(0,to.useMutation)(["useLogout"],r,{onSuccess:(a,n)=>{var x;let m=(x=n==null?void 0:n.redirectPath)!=null?x:a;if(m!==!1){if(m){t(m);return}t("/login")}},onError:a=>{o==null||o({key:"useLogout-error",type:"error",message:(a==null?void 0:a.name)||"Logout Error",description:(a==null?void 0:a.message)||"Something went wrong during logout"})},...e})};var ro=h(T("react")),oo=T("@tanstack/react-query"),so=h(T("qs"));var _e=({mutationOptions:e}={})=>{let{replace:t}=Z(),{login:r}=ro.default.useContext(O),{useLocation:o}=Q(),{search:s}=o(),{close:a,open:n}=re(),{to:m}=so.default.parse(s,{ignoreQueryPrefix:!0});return(0,oo.useMutation)(["useLogin"],r,{onSuccess:u=>{if(m)return t(m);u!==!1&&t(typeof u=="string"?u:"/"),a==null||a("login-error")},onError:u=>{n==null||n({message:(u==null?void 0:u.name)||"Login Error",description:(u==null?void 0:u.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})};var ao=h(T("react")),no=T("@tanstack/react-query");var St=({mutationOptions:e}={})=>{let{replace:t}=Z(),{register:r}=ao.default.useContext(O),{close:o,open:s}=re();return(0,no.useMutation)(["useRegister"],r,{onSuccess:n=>{n!==!1&&t(n||"/"),o==null||o("register-error")},onError:n=>{s==null||s({message:(n==null?void 0:n.name)||"Register Error",description:(n==null?void 0:n.message)||"Error while registering",key:"register-error",type:"error"})},...e})};var io=h(T("react")),uo=T("@tanstack/react-query");var It=({mutationOptions:e}={})=>{let{replace:t}=Z(),{forgotPassword:r}=io.default.useContext(O),{close:o,open:s}=re();return(0,uo.useMutation)(["useForgotPassword"],r,{onSuccess:n=>{n!==!1&&n&&t(n),o==null||o("forgot-password-error")},onError:n=>{s==null||s({message:(n==null?void 0:n.name)||"Forgot Password Error",description:(n==null?void 0:n.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})};var co=h(T("react")),po=T("@tanstack/react-query"),lo=h(T("qs"));var Lt=({mutationOptions:e}={})=>{let{replace:t}=Z(),{updatePassword:r}=co.default.useContext(O),{close:o,open:s}=re(),{useLocation:a}=Q(),{search:n}=a(),m=lo.default.parse(n,{ignoreQueryPrefix:!0});return(0,po.useMutation)(["useUpdatePassword"],async u=>r==null?void 0:r({...m,...u}),{onSuccess:u=>{u!==!1&&u&&t(u),o==null||o("update-password-error")},onError:u=>{s==null||s({message:(u==null?void 0:u.name)||"Update Password Error",description:(u==null?void 0:u.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})};var mo=T("react"),fo=T("@tanstack/react-query");var wt=e=>{let{checkAuth:t}=(0,mo.useContext)(O);return(0,fo.useQuery)(["useAuthenticated",e],async()=>{var o;return(o=await(t==null?void 0:t(e)))!=null?o:{}},{retry:!1})};var yo=h(T("react")),To=T("@tanstack/react-query");var G=()=>{let{checkError:e}=yo.default.useContext(O),{mutate:t}=Ut();return(0,To.useMutation)(["useCheckError"],e,{onError:o=>{t({redirectPath:o})}})};var go=T("react");var Co=()=>{let{isProvided:e}=(0,go.useContext)(O);return e||!1};var Io=T("@tanstack/react-query");var st=e=>e/1e3;var xo=h(T("lodash/zip")),Ro=h(T("lodash/fromPairs")),at=(e,t=r=>r)=>{let[r,...o]=e;return o.map(s=>(0,Ro.default)((0,xo.default)(r,s))).map((s,a,n)=>t.call(void 0,s,a,n))};var pr=h(T("pluralize"));var Qt=h(T("qs")),ur=h(T("lodash/unionWith")),cr=h(T("lodash/differenceWith")),Po=h(T("warn-once")),nt=e=>{let{current:t,pageSize:r,sorter:o,filters:s}=Qt.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:o!=null?o:[],parsedFilters:s!=null?s:[]}},bo=e=>{let t=Qt.default.stringify(e);return nt(`/${t}`)},it=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,filters:s,...a}=e;return Qt.default.stringify({...a,...r||{},sorter:o,filters:s},t)},Do=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,vo=(e,t)=>e.field==t.field,Ne=(e,t,r=[])=>(t.filter(s=>(s.operator==="or"||s.operator==="and")&&!s.key).length>1&&(0,Po.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,ur.default)(e,t,r,Do).filter(s=>s.value!==void 0&&s.value!==null&&(s.operator!=="or"||s.operator==="or"&&s.value.length!==0)&&(s.operator!=="and"||s.operator==="and"&&s.value.length!==0))),ut=(e,t)=>(0,ur.default)(e,t,vo).filter(r=>r.order!==void 0&&r.order!==null),ct=(e,t)=>[...(0,cr.default)(t,e,Do),...e],pt=(e,t)=>[...(0,cr.default)(t,e,vo),...e],ho=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},Eo=(e,t,r="eq")=>{let o=t==null?void 0:t.find(s=>{if(s.operator!=="or"&&s.operator!=="and"&&"field"in s){let{operator:a,field:n}=s;return n===e&&a===r}});if(o)return o.value||[]};var Mo=e=>new Promise((t,r)=>{let o=new FileReader,s=()=>{o.result&&(o.removeEventListener("load",s,!1),t(o.result))};o.addEventListener("load",s,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",s,!1),r(a))});var ke=(e="",t)=>{let r=Ie(e);return t==="singular"?pr.default.singular(r):pr.default.plural(r)};var lr=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var W=(e,t,r)=>{let o=t||"default",s={all:[o],resourceAll:[o,e||""],list:a=>[...s.resourceAll,"list",{...a,...r}],many:a=>[...s.resourceAll,"getMany",a&&a.map(String),{...r}].filter(n=>n!==void 0),detail:a=>[...s.resourceAll,"detail",a==null?void 0:a.toString(),{...r}],logList:a=>["logList",e,a,r].filter(n=>n!==void 0)};return s};var dr=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var na=e=>t=>e.parentName?t.name===e.parentName:!1,je=(e,t)=>{var s,a,n,m,x;let r,o=(a=(s=e.options)==null?void 0:s.route)!=null?a:e.name;if(e.parentName){let u=t.find(na(e));u!=null&&u.parentName?r=`${je(u,t)}/${o}`:e.parentName&&(r=`${(x=(m=(n=u==null?void 0:u.options)==null?void 0:n.route)!=null?m:u==null?void 0:u.name)!=null?x:e.parentName}/${o}`)}else r=o;return r};var lt=e=>{var n,m,x;let t=[],r={},o={},s,a;for(let u=0;u<e.length;u++){s=e[u];let l=(x=(m=s.route)!=null?m:(n=s.options)==null?void 0:n.route)!=null?x:"";r[l]=s,r[l].children=[],o[s.name]=s,o[s.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(a=r[u],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var Ie=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var fr=h(T("react"));var Uo=h(T("react")),mr=({children:e})=>Uo.default.createElement("div",null,e);var be={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},oe=fr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:mr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:be}),So=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:s,children:a,DashboardPage:n,Title:m,Layout:x=mr,Header:u,Sider:l,Footer:y,OffLayoutArea:P,LoginPage:f=At,catchAll:d,liveMode:p="off",onLiveEvent:c,options:i})=>fr.default.createElement(oe.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:m,undoableTimeout:s,Layout:x,Header:u,Sider:l,Footer:y,OffLayoutArea:P,DashboardPage:n,LoginPage:f,catchAll:d,liveMode:p,onLiveEvent:c,options:i}},a);var yr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:s,reactQueryDevtoolConfig:a,syncWithLocation:n,undoableTimeout:m,warnWhenUnsavedChanges:x}={})=>{var P,f,d,p,c,i,C,g,R,b,D,E,v,M,L,k,V,A,I,B,w,te,ie,me;let u={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(f=(P=e==null?void 0:e.mutationMode)!=null?P:o)!=null?f:be.mutationMode,undoableTimeout:(p=(d=e==null?void 0:e.undoableTimeout)!=null?d:m)!=null?p:be.undoableTimeout,syncWithLocation:(i=(c=e==null?void 0:e.syncWithLocation)!=null?c:n)!=null?i:be.syncWithLocation,warnWhenUnsavedChanges:(g=(C=e==null?void 0:e.warnWhenUnsavedChanges)!=null?C:x)!=null?g:be.warnWhenUnsavedChanges,liveMode:(b=(R=e==null?void 0:e.liveMode)!=null?R:r)!=null?b:be.liveMode,redirect:{afterCreate:(E=(D=e==null?void 0:e.redirect)==null?void 0:D.afterCreate)!=null?E:be.redirect.afterCreate,afterClone:(M=(v=e==null?void 0:e.redirect)==null?void 0:v.afterClone)!=null?M:be.redirect.afterClone,afterEdit:(k=(L=e==null?void 0:e.redirect)==null?void 0:L.afterEdit)!=null?k:be.redirect.afterEdit}},l=(A=(V=e==null?void 0:e.disableTelemetry)!=null?V:t)!=null?A:!1,y={clientConfig:(w=(B=(I=e==null?void 0:e.reactQuery)==null?void 0:I.clientConfig)!=null?B:s)!=null?w:{},devtoolConfig:(me=(ie=(te=e==null?void 0:e.reactQuery)==null?void 0:te.devtoolConfig)!=null?ie:a)!=null?me:{}};return{optionsWithDefaults:u,disableTelemetryWithDefault:l,reactQueryWithDefaults:y}};var Tr=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}};var Vt=async(e,t,r)=>{let o=[];for(let[s,a]of e.entries())try{let n=await a();o.push(t(n,s))}catch(n){o.push(r(n,s))}return o};var S=(e,t,r)=>{var s;if(t)return t;let o=r==null?void 0:r.find(a=>a.name===e);return(s=o==null?void 0:o.options)!=null&&s.dataProviderName?o.options.dataProviderName:"default"};var he=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var dt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,s=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/s);return o<a?Number(o)+1:void 0},mt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var qe=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getList:f}=y(S(e,u,l)),d=U(),{mutate:p}=G(),c=K(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:a,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:i,liveMode:n,onLiveEvent:m}),(0,Io.useQuery)(P.list(t),({queryKey:g,pageParam:R,signal:b})=>{let{hasPagination:D,...E}=t||{};return f({resource:e,...E,hasPagination:D,metaData:{...a,queryContext:{queryKey:g,pageParam:R,signal:b}}})},{...r,onSuccess:g=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,g);let R=typeof o=="function"?o(g,{metaData:a,config:t},e):o;c(R)},onError:g=>{var b;p(g),(b=r==null?void 0:r.onError)==null||b.call(r,g);let R=typeof s=="function"?s(g,{metaData:a,config:t},e):s;c(R,{key:`${e}-useList-notification`,message:d("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var Lo=T("@tanstack/react-query");var Ye=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getOne:f}=y(S(e,u,l)),d=U(),{mutate:p}=G(),c=K();return Ee({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:a,subscriptionType:"useOne",...x},enabled:r==null?void 0:r.enabled,liveMode:n,onLiveEvent:m}),(0,Lo.useQuery)(P.detail(t),({queryKey:C,pageParam:g,signal:R})=>f({resource:e,id:t,metaData:{...a,queryContext:{queryKey:C,pageParam:g,signal:R}}}),{...r,onSuccess:C=>{var R;(R=r==null?void 0:r.onSuccess)==null||R.call(r,C);let g=typeof o=="function"?o(C,{id:t,metaData:a},e):o;c(g)},onError:C=>{var R;p(C),(R=r==null?void 0:r.onError)==null||R.call(r,C);let g=typeof s=="function"?s(C,{id:t,metaData:a},e):s;c(g,{key:`${t}-${e}-getOne-notification`,message:d("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})};var wo=T("@tanstack/react-query");var Bt=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getMany:f,getOne:d}=y(S(e,u,l)),p=U(),{mutate:c}=G(),i=K(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:a,subscriptionType:"useMany",...x},channel:`resources/${e}`,enabled:C,liveMode:n,onLiveEvent:m}),(0,wo.useQuery)(P.many(t),({queryKey:R,pageParam:b,signal:D})=>f?f({resource:e,ids:t,metaData:{...a,queryContext:{queryKey:R,pageParam:b,signal:D}}}):he(t.map(E=>d({resource:e,id:E,metaData:{...a,queryContext:{queryKey:R,pageParam:b,signal:D}}}))),{...r,onSuccess:R=>{var D;(D=r==null?void 0:r.onSuccess)==null||D.call(r,R);let b=typeof o=="function"?o(R,t,e):o;i(b)},onError:R=>{var D;c(R),(D=r==null?void 0:r.onError)==null||D.call(r,R);let b=typeof s=="function"?s(R,t,e):s;i(b,{key:`${t[0]}-${e}-getMany-notification`,message:p("notifications.error",{statusCode:R.statusCode},`Error (status code: ${R.statusCode})`),description:R.message,type:"error"})}})};var Ht=T("@tanstack/react-query");var Ze=h(T("react")),Nt=h(T("lodash-es/isEqual"));var kt=Ze.default.createContext({notifications:[],notificationDispatch:()=>!1}),ia=[],ua=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!((0,Nt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!((0,Nt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>(0,Nt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},gr=({children:e})=>{let[t,r]=(0,Ze.useReducer)(ua,ia),o={notifications:t,notificationDispatch:r};return Ze.default.createElement(kt.Provider,{value:o},e,typeof window<"u"&&t.map(s=>Ze.default.createElement(Cr,{key:`${s.id}-${s.resource}-queue`,notification:s})))};var xr=h(T("pluralize"));var Ft=({mutationOptions:e}={})=>{let{resources:t}=N(),r=(0,Ht.useQueryClient)(),o=H(),{mutationMode:s,undoableTimeout:a}=de(),n=U(),{mutate:m}=G(),x=ce(),{log:u}=He(),{notificationDispatch:l}=ye(),y=K(),P=pe();return(0,Ht.useMutation)(({id:d,values:p,resource:c,mutationMode:i,undoableTimeout:C,onCancel:g,metaData:R,dataProviderName:b})=>{let D=i!=null?i:s,E=C!=null?C:a;return D!=="undoable"?o(S(c,b,t)).update({resource:c,id:d,variables:p,metaData:R}):new Promise((M,L)=>{let k=()=>{o(S(c,b,t)).update({resource:c,id:d,variables:p,metaData:R}).then(A=>M(A)).catch(A=>L(A))},V=()=>{L({message:"mutationCancelled"})};g&&g(V),l({type:"ADD",payload:{id:d,resource:c,cancelMutation:V,doMutation:k,seconds:E,isSilent:!!g}})})},{onMutate:async({resource:d,id:p,mutationMode:c,values:i,dataProviderName:C})=>{let g=W(d,S(d,C,t)),R=r.getQueriesData(g.resourceAll),b=c!=null?c:s;return await r.cancelQueries(g.resourceAll,void 0,{silent:!0}),b!=="pessimistic"&&(r.setQueriesData(g.list(),D=>{if(!D)return null;let E=D.data.map(v=>{var M;return((M=v.id)==null?void 0:M.toString())===(p==null?void 0:p.toString())?{id:p,...v,...i}:v});return{...D,data:E}}),r.setQueriesData(g.many(),D=>{if(!D)return null;let E=D.data.map(v=>{var M;return((M=v.id)==null?void 0:M.toString())===(p==null?void 0:p.toString())&&(v={id:p,...v,...i}),v});return{...D,data:E}}),r.setQueriesData(g.detail(p),D=>D?{...D,data:{...D.data,...i}}:null)),{previousQueries:R,queryKey:g}},onSettled:(d,p,{id:c,resource:i,dataProviderName:C,invalidates:g=["list","many","detail"]})=>{P({resource:i,dataProviderName:S(i,C,t),invalidates:g,id:c}),l({type:"REMOVE",payload:{id:c,resource:i}})},onSuccess:(d,{id:p,resource:c,successNotification:i,dataProviderName:C,values:g,metaData:R},b)=>{var A;let D=xr.default.singular(c),E=typeof i=="function"?i(d,{id:p,values:g},c):i;y(E,{key:`${p}-${c}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${c}.${c}`,D)},`Successfully updated ${D}`),type:"success"}),x==null||x({channel:`resources/${c}`,type:"updated",payload:{ids:(A=d.data)!=null&&A.id?[d.data.id]:void 0},date:new Date});let v;if(b){let I=r.getQueryData(b.queryKey.detail(p));v=Object.keys(g).reduce((B,w)=>{var te;return B[w]=(te=I==null?void 0:I.data)==null?void 0:te[w],B},{})}let{fields:M,operation:L,variables:k,...V}=R||{};u==null||u.mutate({action:"update",resource:c,data:g,previousData:v,meta:{id:p,dataProviderName:S(c,C,t),...V}})},onError:(d,{id:p,resource:c,errorNotification:i,values:C},g)=>{if(g)for(let R of g.previousQueries)r.setQueryData(R[0],R[1]);if(d.message!=="mutationCancelled"){m==null||m(d);let R=xr.default.singular(c),b=typeof i=="function"?i(d,{id:p,values:C},c):i;y(b,{key:`${p}-${c}-notification`,message:n("notifications.editError",{resource:n(`${c}.${c}`,R),statusCode:d.statusCode},`Error when updating ${R} (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})};var Qo=T("@tanstack/react-query"),Rr=h(T("pluralize"));var Xe=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=H(),o=pe(),{resources:s}=N(),a=U(),n=ce(),{log:m}=He(),x=K();return(0,Qo.useMutation)(({resource:l,values:y,metaData:P,dataProviderName:f})=>r(S(l,f,s)).create({resource:l,variables:y,metaData:P}),{onSuccess:(l,{resource:y,successNotification:P,dataProviderName:f,invalidates:d=["list","many"],values:p,metaData:c})=>{var E,v,M;let i=Rr.default.singular(y),C=typeof P=="function"?P(l,p,y):P;x(C,{key:`create-${y}-notification`,message:a("notifications.createSuccess",{resource:a(`${y}.${y}`,i)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),o({resource:y,dataProviderName:S(y,f,s),invalidates:d}),n==null||n({channel:`resources/${y}`,type:"created",payload:{ids:(E=l==null?void 0:l.data)!=null&&E.id?[l.data.id]:void 0},date:new Date});let{fields:g,operation:R,variables:b,...D}=c||{};m==null||m.mutate({action:"create",resource:y,data:p,meta:{dataProviderName:S(y,f,s),id:(M=(v=l==null?void 0:l.data)==null?void 0:v.id)!=null?M:void 0,...D}})},onError:(l,{resource:y,errorNotification:P,values:f})=>{t(l);let d=Rr.default.singular(y),p=typeof P=="function"?P(l,f,y):P;x(p,{key:`create-${y}-notification`,description:l.message,message:a("notifications.createError",{resource:a(`${y}.${y}`,d),statusCode:l.statusCode},`There was an error creating ${d} (status code: ${l.statusCode})`),type:"error"})},...e})};var $t=T("@tanstack/react-query"),Pr=h(T("pluralize"));var Ao=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=H(),{resources:o}=N(),s=(0,$t.useQueryClient)(),{mutationMode:a,undoableTimeout:n}=de(),{notificationDispatch:m}=ye(),x=U(),u=ce(),{log:l}=He(),y=K(),P=pe();return(0,$t.useMutation)(({id:d,mutationMode:p,undoableTimeout:c,resource:i,onCancel:C,metaData:g,dataProviderName:R,values:b})=>{let D=p!=null?p:a,E=c!=null?c:n;return D!=="undoable"?r(S(i,R,o)).deleteOne({resource:i,id:d,metaData:g,variables:b}):new Promise((M,L)=>{let k=()=>{r(S(i,R,o)).deleteOne({resource:i,id:d,metaData:g,variables:b}).then(A=>M(A)).catch(A=>L(A))},V=()=>{L({message:"mutationCancelled"})};C&&C(V),m({type:"ADD",payload:{id:d,resource:i,cancelMutation:V,doMutation:k,seconds:E,isSilent:!!C}})})},{onMutate:async({id:d,resource:p,mutationMode:c,dataProviderName:i})=>{let C=W(p,S(p,i,o)),g=c!=null?c:a;await s.cancelQueries(C.resourceAll,void 0,{silent:!0});let R=s.getQueriesData(C.resourceAll);return g!=="pessimistic"&&(s.setQueriesData(C.list(),b=>b?{data:b.data.filter(E=>{var v;return((v=E.id)==null?void 0:v.toString())!==d.toString()}),total:b.total-1}:null),s.setQueriesData(C.many(),b=>{if(!b)return null;let D=b.data.filter(E=>{var v;return((v=E.id)==null?void 0:v.toString())!==(d==null?void 0:d.toString())});return{...b,data:D}})),{previousQueries:R,queryKey:C}},onSettled:(d,p,{id:c,resource:i,dataProviderName:C,invalidates:g=["list","many"]})=>{P({resource:i,dataProviderName:S(i,C,o),invalidates:g}),m({type:"REMOVE",payload:{id:c,resource:i}})},onSuccess:(d,{id:p,resource:c,successNotification:i,dataProviderName:C,metaData:g},R)=>{let b=Pr.default.singular(c!=null?c:"");s.removeQueries(R==null?void 0:R.queryKey.detail(p));let D=typeof i=="function"?i(d,p,c):i;y(D,{key:`${p}-${c}-notification`,description:x("notifications.success","Success"),message:x("notifications.deleteSuccess",{resource:x(`${c}.${c}`,b)},`Successfully deleted a ${b}`),type:"success"}),u==null||u({channel:`resources/${c}`,type:"deleted",payload:{ids:p?[p]:[]},date:new Date});let{fields:E,operation:v,variables:M,...L}=g||{};l==null||l.mutate({action:"delete",resource:c,meta:{id:p,dataProviderName:S(c,C,o),...L}}),s.removeQueries(R==null?void 0:R.queryKey.detail(p))},onError:(d,{id:p,resource:c,errorNotification:i},C)=>{if(C)for(let g of C.previousQueries)s.setQueryData(g[0],g[1]);if(d.message!=="mutationCancelled"){t(d);let g=Pr.default.singular(c!=null?c:""),R=typeof i=="function"?i(d,p,c):i;y(R,{key:`${p}-${c}-notification`,message:x("notifications.deleteError",{resource:g,statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})};var Vo=T("@tanstack/react-query"),Bo=h(T("pluralize"));var Ot=({mutationOptions:e}={})=>{let t=H(),{resources:r}=N(),o=U(),s=ce(),a=K(),n=pe();return(0,Vo.useMutation)(({resource:x,values:u,metaData:l,dataProviderName:y})=>{let P=t(S(x,y,r));return P.createMany?P.createMany({resource:x,variables:u,metaData:l}):he(u.map(f=>P.create({resource:x,variables:f,metaData:l})))},{onSuccess:(x,{resource:u,successNotification:l,dataProviderName:y,invalidates:P=["list","many"],values:f})=>{let d=Bo.default.plural(u),p=typeof l=="function"?l(x,f,u):l;a(p,{key:`createMany-${u}-notification`,message:o("notifications.createSuccess",{resource:o(`${u}.${u}`,u)},`Successfully created ${d}`),description:o("notifications.success","Success"),type:"success"}),n({resource:u,dataProviderName:S(u,y,r),invalidates:P});let c=x==null?void 0:x.data.filter(i=>(i==null?void 0:i.id)!==void 0).map(i=>i.id);s==null||s({channel:`resources/${u}`,type:"created",payload:{ids:c},date:new Date})},onError:(x,{resource:u,errorNotification:l,values:y})=>{let P=typeof l=="function"?l(x,y,u):l;a(P,{key:`createMany-${u}-notification`,description:x.message,message:o("notifications.createError",{resource:o(`${u}.${u}`,u),statusCode:x.statusCode},`There was an error creating ${u} (status code: ${x.statusCode}`),type:"error"})},...e})};var Wt=T("@tanstack/react-query"),br=h(T("pluralize"));var No=({mutationOptions:e}={})=>{let{resources:t}=N(),r=(0,Wt.useQueryClient)(),o=H(),s=U(),{mutationMode:a,undoableTimeout:n}=de(),{mutate:m}=G(),{notificationDispatch:x}=ye(),u=ce(),l=K(),y=pe();return(0,Wt.useMutation)(({ids:f,values:d,resource:p,onCancel:c,mutationMode:i,undoableTimeout:C,metaData:g,dataProviderName:R})=>{let b=i!=null?i:a,D=C!=null?C:n,E=o(S(p,R,t)),v=()=>E.updateMany?E.updateMany({resource:p,ids:f,variables:d,metaData:g}):he(f.map(L=>E.update({resource:p,id:L,variables:d,metaData:g})));return b!=="undoable"?v():new Promise((L,k)=>{let V=()=>{v().then(I=>L(I)).catch(I=>k(I))},A=()=>{k({message:"mutationCancelled"})};c&&c(A),x({type:"ADD",payload:{id:f,resource:p,cancelMutation:A,doMutation:V,seconds:D,isSilent:!!c}})})},{onMutate:async({resource:f,ids:d,values:p,mutationMode:c,dataProviderName:i,metaData:C})=>{let g=W(f,S(f,i,t),C),R=c!=null?c:a;await r.cancelQueries(g.resourceAll,void 0,{silent:!0});let b=r.getQueriesData(g.resourceAll);if(R!=="pessimistic"){r.setQueriesData(g.list(),D=>{if(!D)return null;let E=D.data.map(v=>v.id!==void 0&&d.filter(M=>M!==void 0).map(String).includes(v.id.toString())?{...v,...p}:v);return{...D,data:E}}),r.setQueriesData(g.many(),D=>{if(!D)return null;let E=D.data.map(v=>v.id!==void 0&&d.filter(M=>M!==void 0).map(String).includes(v.id.toString())?{...v,...p}:v);return{...D,data:E}});for(let D of d)r.setQueriesData(g.detail(D),E=>{if(!E)return null;let v={...E.data,...p};return{...E,data:v}})}return{previousQueries:b,queryKey:g}},onSettled:(f,d,{ids:p,resource:c,dataProviderName:i})=>{y({resource:c,invalidates:["list","many"],dataProviderName:S(c,i,t)}),p.forEach(C=>y({resource:c,invalidates:["detail"],dataProviderName:S(c,i,t),id:C})),x({type:"REMOVE",payload:{id:p,resource:c}})},onSuccess:(f,{ids:d,resource:p,successNotification:c,values:i})=>{let C=br.default.singular(p),g=typeof c=="function"?c(f,{ids:d,values:i},p):c;l(g,{key:`${d}-${p}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${p}.${p}`,p)},`Successfully updated ${C}`),type:"success"}),u==null||u({channel:`resources/${p}`,type:"updated",payload:{ids:d.map(String)},date:new Date})},onError:(f,{ids:d,resource:p,errorNotification:c,values:i},C)=>{if(C)for(let g of C.previousQueries)r.setQueryData(g[0],g[1]);if(f.message!=="mutationCancelled"){m==null||m(f);let g=br.default.singular(p),R=typeof c=="function"?c(f,{ids:d,values:i},p):c;l(R,{key:`${d}-${p}-updateMany-error-notification`,message:s("notifications.editError",{resource:g,statusCode:f.statusCode},`Error when updating ${g} (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})};var Kt=T("@tanstack/react-query"),ko=h(T("pluralize"));var Ho=({mutationOptions:e}={})=>{let{mutate:t}=G(),{mutationMode:r,undoableTimeout:o}=de(),s=H(),{notificationDispatch:a}=ye(),n=U(),m=ce(),x=K(),u=pe(),{resources:l}=N(),y=(0,Kt.useQueryClient)();return(0,Kt.useMutation)(({resource:f,ids:d,mutationMode:p,undoableTimeout:c,onCancel:i,metaData:C,dataProviderName:g,values:R})=>{let b=p!=null?p:r,D=c!=null?c:o,E=s(S(f,g,l)),v=()=>E.deleteMany?E.deleteMany({resource:f,ids:d,metaData:C,variables:R}):he(d.map(L=>E.deleteOne({resource:f,id:L,metaData:C,variables:R})));return b!=="undoable"?v():new Promise((L,k)=>{let V=()=>{v().then(I=>L(I)).catch(I=>k(I))},A=()=>{k({message:"mutationCancelled"})};i&&i(A),a({type:"ADD",payload:{id:d,resource:f,cancelMutation:A,doMutation:V,seconds:D,isSilent:!!i}})})},{onMutate:async({ids:f,resource:d,mutationMode:p,dataProviderName:c})=>{let i=W(d,S(d,c,l)),C=p!=null?p:r;await y.cancelQueries(i.resourceAll,void 0,{silent:!0});let g=y.getQueriesData(i.resourceAll);if(C!=="pessimistic"){y.setQueriesData(i.list(),R=>R?{data:R.data.filter(D=>D.id&&!f.map(String).includes(D.id.toString())),total:R.total-1}:null),y.setQueriesData(i.many(),R=>{if(!R)return null;let b=R.data.filter(D=>D.id?!f.map(String).includes(D.id.toString()):!1);return{...R,data:b}});for(let R of f)y.setQueriesData(i.detail(R),b=>!b||b.data.id==R?null:{...b})}return{previousQueries:g,queryKey:i}},onSettled:(f,d,{resource:p,ids:c,dataProviderName:i,invalidates:C=["list","many"]})=>{u({resource:p,dataProviderName:S(p,i,l),invalidates:C}),a({type:"REMOVE",payload:{id:c,resource:p}})},onSuccess:(f,{ids:d,resource:p,successNotification:c},i)=>{d.forEach(g=>y.removeQueries(i==null?void 0:i.queryKey.detail(g)));let C=typeof c=="function"?c(f,d,p):c;x(C,{key:`${d}-${p}-notification`,description:n("notifications.success","Success"),message:n("notifications.deleteSuccess",{resource:n(`${p}.${p}`,p)},`Successfully deleted ${p}`),type:"success"}),m==null||m({channel:`resources/${p}`,type:"deleted",payload:{ids:d},date:new Date}),d.forEach(g=>y.removeQueries(i==null?void 0:i.queryKey.detail(g)))},onError:(f,{ids:d,resource:p,errorNotification:c},i)=>{if(i)for(let C of i.previousQueries)y.setQueryData(C[0],C[1]);if(f.message!=="mutationCancelled"){t(f);let C=ko.default.singular(p),g=typeof c=="function"?c(f,d,p):c;x(g,{key:`${d}-${p}-notification`,message:n("notifications.deleteError",{resource:C,statusCode:f.statusCode},`Error (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})};var Fo=e=>{let t=H(),{getApiUrl:r}=t(e);return r()};var $o=T("@tanstack/react-query");var Oo=({url:e,method:t,config:r,queryOptions:o,successNotification:s,errorNotification:a,metaData:n,dataProviderName:m})=>{let x=H(),{custom:u}=x(m),{mutate:l}=G(),y=U(),P=K();if(u)return(0,$o.useQuery)([m,"custom",t,e,{...r,...n}],({queryKey:d,pageParam:p,signal:c})=>u({url:e,method:t,...r,metaData:{...n,queryContext:{queryKey:d,pageParam:p,signal:c}}}),{...o,onSuccess:d=>{var c;(c=o==null?void 0:o.onSuccess)==null||c.call(o,d);let p=typeof s=="function"?s(d,{...r,...n}):s;P(p)},onError:d=>{var c;l(d),(c=o==null?void 0:o.onError)==null||c.call(o,d);let p=typeof a=="function"?a(d,{...r,...n}):a;P(p,{key:`${t}-notification`,message:y("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};var Wo=T("@tanstack/react-query");var Ko=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=K(),o=H(),s=U();return(0,Wo.useMutation)(({url:n,method:m,values:x,metaData:u,dataProviderName:l,config:y})=>{let{custom:P}=o(l);if(P)return P({url:n,method:m,payload:x,metaData:u,headers:{...y==null?void 0:y.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(n,{successNotification:m,config:x,metaData:u})=>{let l=typeof m=="function"?m(n,{...x,...u}):m;r(l)},onError:(n,{errorNotification:m,method:x,config:u,metaData:l})=>{t(n);let y=typeof m=="function"?m(n,{...u,...l}):m;r(y,{key:`${x}-notification`,message:s("notifications.error",{statusCode:n.statusCode},`Error (status code: ${n.statusCode})`),description:n.message,type:"error"})},...e})};var Gt=T("react");var Dr=h(T("react")),ca=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),ft=Dr.default.createContext(ca()),Go=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Dr.default.createElement(ft.Provider,{value:r},e)};var H=()=>{let e=(0,Gt.useContext)(ft);return(0,Gt.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var zo=T("@tanstack/react-query");var _o=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getList:f}=y(S(e,u,l)),d=U(),{mutate:p}=G(),c=K(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:a,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:i,liveMode:n,onLiveEvent:m}),(0,zo.useInfiniteQuery)(P.list(t),({queryKey:g,pageParam:R,signal:b})=>{let{hasPagination:D,...E}=t||{},v={...t==null?void 0:t.pagination,current:R};return f({resource:e,...E,pagination:v,hasPagination:D,metaData:{...a,queryContext:{queryKey:g,pageParam:R,signal:b}}}).then(({data:M,total:L,...k})=>({data:M,total:L,pagination:v,...k}))},{getNextPageParam:g=>dt(g),getPreviousPageParam:g=>mt(g),...r,onSuccess:g=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,g);let R=typeof o=="function"?o(g,{metaData:a,config:t},e):o;c(R)},onError:g=>{var b;p(g),(b=r==null?void 0:r.onError)==null||b.call(r,g);let R=typeof s=="function"?s(g,{metaData:a,config:t},e):s;c(R,{key:`${e}-useInfiniteList-notification`,message:d("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var yt=T("react"),qo=T("@tanstack/react-query");var vr=h(T("react")),Me=vr.default.createContext(void 0),jo=({liveProvider:e,children:t})=>vr.default.createElement(Me.Provider,{value:e},t);var Ee=({resource:e,params:t,channel:r,types:o,enabled:s=!0,liveMode:a,onLiveEvent:n})=>{let m=(0,qo.useQueryClient)(),x=W(e),u=(0,yt.useContext)(Me),{liveMode:l,onLiveEvent:y}=(0,yt.useContext)(oe),P=a!=null?a:l;(0,yt.useEffect)(()=>{let f;return P&&P!=="off"&&s&&(f=u==null?void 0:u.subscribe({channel:r,params:{resource:e,...t},types:o,callback:d=>{P==="auto"&&m.invalidateQueries(x.resourceAll),n==null||n(d),y==null||y(d)}})),()=>{f&&(u==null||u.unsubscribe(f))}},[s])};var Yo=T("react");var hr=e=>{let{liveMode:t}=(0,Yo.useContext)(oe);return e!=null?e:t};var zt=T("react");var pa=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:s})=>{let a=(0,zt.useContext)(Me);(0,zt.useEffect)(()=>{let n;return o&&(n=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:s})),()=>{n&&(a==null||a.unsubscribe(n))}},[o])};var Zo=T("react");var ce=()=>{let e=(0,Zo.useContext)(Me);return e==null?void 0:e.publish};var Xo=T("react");var Er=h(T("react")),Fe=Er.default.createContext({resources:[]}),Jo=({resources:e,children:t})=>Er.default.createElement(Fe.Provider,{value:{resources:e}},t);var N=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:o}=(0,Xo.useContext)(Fe),s=ee(),{useParams:a}=Q(),n=a(),m=s(t!=null?t:n.resource),x=e!=null?e:m.name,u=r!=null?r:n.id;return{resources:o,resource:m,resourceName:x,id:u,action:n.action}};var _t=T("react");var ee=()=>{let{resources:e}=(0,_t.useContext)(Fe);return(0,_t.useCallback)(r=>{let o=e.find(s=>s.route===r);if(!o){let s=e.find(a=>a.name===r);return s!=null?s:{name:r,route:r}}return o},[e])};var es=T("react");var ye=()=>{let{notifications:e,notificationDispatch:t}=(0,es.useContext)(kt);return{notifications:e,notificationDispatch:t}};var rs=T("react");var jt=h(T("react"));var Tt=(0,jt.createContext)({}),ts=({open:e,close:t,children:r})=>jt.default.createElement(Tt.Provider,{value:{open:e,close:t}},r);var re=()=>{let{open:e,close:t}=(0,rs.useContext)(Tt);return{open:e,close:t}};var os=T("react");var K=()=>{let{open:e}=re();return(0,os.useCallback)((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};var qt=T("react");var Mr=h(T("react"));var Te=Mr.default.createContext({}),ss=({children:e,i18nProvider:t})=>Mr.default.createElement(Te.Provider,{value:{i18nProvider:t}},e);var as=()=>{let{i18nProvider:e}=(0,qt.useContext)(Te);return(0,qt.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var Yt=T("react");var U=()=>{let{i18nProvider:e}=(0,Yt.useContext)(Te);return(0,Yt.useMemo)(()=>{function r(o,s,a){var n,m;return(m=(n=e==null?void 0:e.translate(o,s,a))!=null?n:a)!=null?m:typeof s=="string"&&typeof a>"u"?s:o}return r},[e])};var Zt=T("react");var ns=()=>{let{i18nProvider:e}=(0,Zt.useContext)(Te);return(0,Zt.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var is=T("react");var de=()=>{let{mutationMode:e,undoableTimeout:t}=(0,is.useContext)(oe);return{mutationMode:e,undoableTimeout:t}};var Sr=T("react");var gt=h(T("react")),Ur=gt.default.createContext({}),us=({children:e})=>{let[t,r]=(0,gt.useState)(!1);return gt.default.createElement(Ur.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var et=()=>{let{warnWhenUnsavedChanges:e}=(0,Sr.useContext)(oe),{warnWhen:t,setWarnWhen:r}=(0,Sr.useContext)(Ur);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};var cs=T("react");var Jt=()=>{let{syncWithLocation:e}=(0,cs.useContext)(oe);return{syncWithLocation:e}};var ps=T("react");var ls=()=>{let{Title:e}=(0,ps.useContext)(oe);return e};var ds=T("react");var Le=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:m,syncWithLocation:x,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:y,LoginPage:P,catchAll:f,options:d}=(0,ds.useContext)(oe);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:m,syncWithLocation:x,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:y,LoginPage:P,catchAll:f,options:d}};var ms=T("react");var fs=T("export-to-csv-fix-source-map"),la=({resourceName:e,sorter:t,filters:r,maxItemCount:o,pageSize:s=20,mapData:a=l=>l,exportOptions:n,metaData:m,dataProviderName:x,onError:u}={})=>{let[l,y]=(0,ms.useState)(!1),{resources:P}=N(),f=ee(),d=H(),{useParams:p}=Q(),{resource:c}=p(),{name:i}=f(c);e&&(i=e);let C=`${ke(i,"plural")}-${new Date().toLocaleString()}`,{getList:g}=d(S(i,x,P));return{isLoading:l,triggerExport:async()=>{y(!0);let b=[],D=1,E=!0;for(;E;)try{let{data:M,total:L}=await g({resource:i,filters:r,sort:t,pagination:{current:D,pageSize:s},metaData:m});D++,b.push(...M),o&&b.length>=o&&(b=b.slice(0,o),E=!1),L===b.length&&(E=!1)}catch(M){y(!1),E=!1,u==null||u(M);return}new fs.ExportToCsv({filename:C,useKeysAsHeaders:!0,...n}).generateCsv(b.map(a)),y(!1)}}};var Ir=h(T("react"));var da=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:s,redirect:a,successNotification:n,errorNotification:m,metaData:x,mutationMode:u,liveMode:l,onLiveEvent:y,liveParams:P,undoableTimeout:f,dataProviderName:d,invalidates:p,queryOptions:c,createMutationOptions:i,updateMutationOptions:C}={})=>{var Et;let{options:g}=Le(),{useParams:R}=Q(),{resource:b,action:D,id:E}=R(),v=!e||e===b?r!=null?r:E:r,[M,L]=Ir.default.useState(v);Ir.default.useEffect(()=>{v!==M&&L(r)},[r]);let k=e!=null?e:b,V=(Et=t!=null?t:D==="show"?"create":D)!=null?Et:"create",I=ee()(k),{mutationMode:B}=de(),w=u!=null?u:B,te=V==="create",ie=V==="edit",me=V==="clone",q=Tr({redirectFromProps:a,action:V,redirectOptions:g.redirect}),J=M!==void 0&&(ie||me),fe=Ye({resource:I.name,id:M!=null?M:"",queryOptions:{enabled:J,...c},liveMode:l,onLiveEvent:y,liveParams:P,metaData:x,dataProviderName:d}),{isFetching:z}=fe,Ce=Xe({mutationOptions:i}),{mutate:Qe,isLoading:Dt}=Ce,xe=Ft({mutationOptions:C}),{mutate:vt,isLoading:sr}=xe,{setWarnWhen:ht}=et(),Ae=Lr();return{...te||me?{formLoading:z||Dt,mutationResult:Ce,onFinish:async ue=>{ht(!1);let F=Y=>{Ae({redirect:q,resource:I,id:Y})};return w!=="pessimistic"&&setTimeout(()=>{F()}),new Promise((Y,Ve)=>(w!=="pessimistic"&&Y(),Qe({values:ue,resource:I.name,successNotification:n,errorNotification:m,metaData:x,dataProviderName:d,invalidates:p},{onSuccess:(le,Re,Be)=>{var zr;o&&o(le,ue,Be);let ot=(zr=le==null?void 0:le.data)==null?void 0:zr.id;F(ot),Y(le)},onError:(le,Re,Be)=>{if(s)return s(le,ue,Be);Ve()}})))}}:{formLoading:z||sr,mutationResult:xe,onFinish:async ue=>{ht(!1);let F={id:M!=null?M:"",values:ue,resource:I.name,mutationMode:w,undoableTimeout:f,successNotification:n,errorNotification:m,metaData:x,dataProviderName:d,invalidates:p},Y=()=>{L(v),Ae({redirect:q,resource:I,id:M})};return w!=="pessimistic"&&setTimeout(()=>{Y()}),new Promise((Ve,le)=>(w!=="pessimistic"&&Ve(),setTimeout(()=>{vt(F,{onSuccess:(Re,Be,ot)=>{o&&o(Re,ue,ot),w==="pessimistic"&&Y(),Ve(Re)},onError:(Re,Be,ot)=>{if(s)return s(Re,ue,ot);le()}})})))}},queryResult:fe,id:M,setId:L,redirect:(ue,F)=>{Ae({redirect:ue!==void 0?ue:ie?"list":"edit",resource:I,id:F!=null?F:M})}}};var ys=T("react");var Lr=()=>{let{show:e,edit:t,list:r,create:o}=Z();return(0,ys.useCallback)(({redirect:a,resource:n,id:m})=>{if(a&&n.route)return n.canShow&&a==="show"&&m?e(n.route,m):n.canEdit&&a==="edit"&&m?t(n.route,m):n.canCreate&&a==="create"?o(n.route):r(n.route,"push")},[])};var Z=()=>{let{useHistory:e}=Q(),t=e(),r=ee(),o=(i,C="push")=>{C==="push"?t.push(i):t.replace(i)},s=i=>`/${r(i).route}/create`,a=(i,C)=>{let g=r(i),R=encodeURIComponent(C);return`/${g.route}/edit/${R}`},n=(i,C)=>{let g=r(i),R=encodeURIComponent(C);return`/${g.route}/clone/${R}`},m=(i,C)=>{let g=r(i),R=encodeURIComponent(C);return`/${g.route}/show/${R}`},x=i=>`/${r(i).route}`;return{create:(i,C="push")=>{o(s(i),C)},createUrl:s,edit:(i,C,g="push")=>{o(a(i,C),g)},editUrl:a,clone:(i,C,g="push")=>{o(n(i,C),g)},cloneUrl:n,show:(i,C,g="push")=>{o(m(i,C),g)},showUrl:m,list:(i,C="push")=>{o(x(i),C)},listUrl:x,push:(i,...C)=>{t.push(i,...C)},replace:(i,...C)=>{t.replace(i,...C)},goBack:()=>{t.goBack()}}};var Xt=h(T("react"));var ma=({resource:e,id:t,successNotification:r,errorNotification:o,metaData:s,liveMode:a,onLiveEvent:n,dataProviderName:m,queryOptions:x}={})=>{let{useParams:u}=Q(),{resource:l,id:y}=u(),P=!e||e===l?t!=null?t:y:t,[f,d]=(0,Xt.useState)(P);Xt.default.useEffect(()=>{P!==f&&d(P)},[P]);let c=ee()(e!=null?e:l);return{queryResult:Ye({resource:c.name,id:f!=null?f:"",queryOptions:{enabled:f!==void 0,...x},successNotification:r,errorNotification:o,metaData:s,liveMode:a,onLiveEvent:n,dataProviderName:m}),showId:f,setShowId:d}};var tt=T("react"),Ts=T("papaparse"),gs=h(T("lodash-es/chunk"));var fa=({resourceName:e,mapData:t=x=>x,paparseOptions:r,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:s,metaData:a,onProgress:n,dataProviderName:m}={})=>{let[x,u]=(0,tt.useState)(0),[l,y]=(0,tt.useState)(0),[P,f]=(0,tt.useState)(!1),d=ee(),{useParams:p}=Q(),{resource:c}=p(),{name:i}=d(e!=null?e:c),C=Ot(),g=Xe(),R;o===1?R=g:R=C;let b=()=>{y(0),u(0),f(!1)},D=v=>{let M={succeeded:v.filter(L=>L.type==="success"),errored:v.filter(L=>L.type==="error")};s==null||s(M),f(!1)};(0,tt.useEffect)(()=>{n==null||n({totalAmount:l,processedAmount:x})},[l,x]);let E=({file:v})=>(b(),new Promise(M=>{f(!0),(0,Ts.parse)(v,{complete:async({data:L})=>{let k=at(L,t);if(y(k.length),o===1){let V=k.map(I=>async()=>({response:await g.mutateAsync({resource:i,values:I,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:a}),value:I})),A=await Vt(V,({response:I,value:B})=>(u(w=>w+1),{response:[I.data],type:"success",request:[B]}),(I,B)=>({response:[I],type:"error",request:[k[B]]}));M(A)}else{let V=(0,gs.default)(k,o),A=V.map(B=>async()=>({response:await C.mutateAsync({resource:i,values:B,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:a}),value:B,currentBatchLength:B.length})),I=await Vt(A,({response:B,currentBatchLength:w,value:te})=>(u(ie=>ie+w),{response:B.data,type:"success",request:te}),(B,w)=>({response:[B],type:"error",request:V[w]}));M(I)}},...r})}).then(M=>(D(M),M)));return{inputProps:{type:"file",accept:".csv",onChange:v=>{v.target.files&&v.target.files.length>0&&E({file:v.target.files[0]})}},mutationResult:R,isLoading:P,handleChange:E}};var Ct=T("react"),ya=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Ct.useState)(e),o=(0,Ct.useCallback)(()=>r(!0),[t]),s=(0,Ct.useCallback)(()=>r(!1),[t]);return{visible:t,show:o,close:s}};var xs=T("react");var wr=h(T("react")),Ta={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},xt=wr.default.createContext(Ta),Cs=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n})=>wr.default.createElement(xt.Provider,{value:{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}},e);var Q=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:s,routes:a}=(0,xs.useContext)(xt);return{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:s,routes:a}};var Ps=T("react"),bs=T("@tanstack/react-query");var Qr=h(T("react"));var $e=Qr.default.createContext({}),Rs=({can:e,children:t})=>Qr.default.createElement($e.Provider,{value:{can:e}},t);var Ar=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:s}=(0,Ps.useContext)($e),{resource:a,...n}=r!=null?r:{},{icon:m,list:x,edit:u,create:l,show:y,children:P,...f}=a!=null?a:{},d=(0,bs.useQuery)(["useCan",{action:e,resource:t,params:{...n,resource:f},enabled:o==null?void 0:o.enabled}],()=>{var p;return(p=s==null?void 0:s({action:e,resource:t,params:r}))!=null?p:Promise.resolve({can:!0})},{enabled:typeof s<"u",...o,retry:!1});return typeof s>"u"?{data:{can:!0}}:d};var Ds=T("react");var ga=()=>{let{can:e}=(0,Ds.useContext)($e);return{can:e}};var Ue=T("react"),vs=h(T("lodash/uniqBy")),hs=h(T("lodash/debounce")),Rt=h(T("lodash/get"));var Ca=e=>{var ie,me;let[t,r]=(0,Ue.useState)([]),[o,s]=(0,Ue.useState)([]),[a,n]=(0,Ue.useState)([]),{resource:m,sort:x,filters:u=[],optionLabel:l="title",optionValue:y="id",debounce:P=300,successNotification:f,errorNotification:d,defaultValueQueryOptions:p,queryOptions:c,fetchSize:i,pagination:C,hasPagination:g,liveMode:R,defaultValue:b=[],onLiveEvent:D,onSearch:E,liveParams:v,metaData:M,dataProviderName:L}=e,k=Array.isArray(b)?b:[b],V=(0,Ue.useCallback)(q=>{n(q.data.map(J=>({label:(0,Rt.default)(J,l),value:(0,Rt.default)(J,y)})))},[l,y]),A=p!=null?p:c,I=Bt({resource:m,ids:k,queryOptions:{...A,enabled:k.length>0&&((ie=p==null?void 0:p.enabled)!=null?ie:!0),onSuccess:q=>{var J;V(q),(J=A==null?void 0:A.onSuccess)==null||J.call(A,q)}},metaData:M,liveMode:"off",dataProviderName:L}),B=(0,Ue.useCallback)(q=>{s(q.data.map(J=>({label:(0,Rt.default)(J,l),value:(0,Rt.default)(J,y)})))},[l,y]),w=qe({resource:m,config:{sort:x,filters:u.concat(t),pagination:{current:C==null?void 0:C.current,pageSize:(me=C==null?void 0:C.pageSize)!=null?me:i},hasPagination:g},queryOptions:{...c,onSuccess:q=>{var J;B(q),(J=c==null?void 0:c.onSuccess)==null||J.call(c,q)}},successNotification:f,errorNotification:d,metaData:M,liveMode:R,liveParams:v,onLiveEvent:D,dataProviderName:L}),te=q=>{if(E){r(E(q));return}if(q)r([{field:l,operator:"contains",value:q}]);else{r([]);return}};return{queryResult:w,defaultValueQueryResult:I,options:(0,Ue.useMemo)(()=>(0,vs.default)([...o,...a],"value"),[o,a]),onSearch:(0,hs.default)(te,P)}};var De=T("react"),Vr=h(T("qs")),Br=h(T("lodash/differenceWith")),Nr=h(T("lodash/isEqual"));var xa=[],Ra=[];function Pa({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:o,permanentSorter:s=Ra,defaultSetFilterBehavior:a="merge",initialFilter:n,permanentFilter:m=xa,syncWithLocation:x,resource:u,successNotification:l,errorNotification:y,queryOptions:P,liveMode:f,onLiveEvent:d,liveParams:p,metaData:c,dataProviderName:i}={}){var ue;let{syncWithLocation:C}=Jt(),g=x!=null?x:C,{useLocation:R,useParams:b}=Q(),{search:D,pathname:E}=R(),v=hr(f),{parsedCurrent:M,parsedPageSize:L,parsedSorter:k,parsedFilters:V}=nt(D),A=M||e,I=L||t,B=k.length?k:o,w=V.length?V:n,{resource:te}=b(),{replace:ie}=Z(),q=ee()(u!=null?u:te),[J,fe]=(0,De.useState)(pt(s,B!=null?B:[])),[z,Ce]=(0,De.useState)(ct(m,w!=null?w:[])),[Qe,Dt]=(0,De.useState)(A),[xe,vt]=(0,De.useState)(I),sr=({pagination:{current:F,pageSize:Y},sorter:Ve,filters:le})=>{let Re=Vr.default.parse(D==null?void 0:D.substring(1)),Be=it({pagination:{pageSize:Y,current:F},sorter:Ve,filters:le,...Re});return`${E}?${Be}`};(0,De.useEffect)(()=>{D===""&&(Dt(A),vt(I),fe(pt(s,B!=null?B:[])),Ce(ct(m,w!=null?w:[])))},[D]);let ht=()=>{let{sorter:F,filters:Y,pageSize:Ve,current:le,...Re}=Vr.default.parse(D,{ignoreQueryPrefix:!0});return Re};(0,De.useEffect)(()=>{if(g){let F=ht(),Y=it({...r?{pagination:{pageSize:xe,current:Qe}}:{},sorter:(0,Br.default)(J,s,Nr.default),filters:(0,Br.default)(z,m,Nr.default),...F});return ie(`${E}?${Y}`,void 0,{shallow:!0})}},[g,Qe,xe,J,z]);let Ae=qe({resource:q.name,config:{hasPagination:r,pagination:{current:Qe,pageSize:xe},filters:Ne(m,z),sort:ut(s,J)},queryOptions:P,successNotification:l,errorNotification:y,metaData:c,liveMode:v,liveParams:p,onLiveEvent:d,dataProviderName:i}),$r=F=>{Ce(Y=>Ne(m,F,Y))},Or=F=>{Ce(Ne(m,F))},Wr=F=>{Ce(Y=>Ne(m,F(Y)))},Kr=(F,Y=a)=>{typeof F=="function"?Wr(F):Y==="replace"?Or(F):$r(F)},Gr=F=>{fe(()=>ut(s,F))},Et=(0,De.useMemo)(()=>{var F,Y;return r?{current:Qe,setCurrent:Dt,pageSize:xe,setPageSize:vt,pageCount:xe?Math.ceil(((Y=(F=Ae.data)==null?void 0:F.total)!=null?Y:0)/xe):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,Qe,xe,(ue=Ae.data)==null?void 0:ue.total]);return{tableQueryResult:Ae,sorter:J,setSorter:Gr,filters:z,setFilters:Kr,...Et,createLinkForSyncWithLocation:sr}}var Hr=T("react"),Pt=T("@tanstack/react-query");var kr=h(T("react")),Oe=kr.default.createContext({}),Es=({create:e,get:t,update:r,children:o})=>kr.default.createElement(Oe.Provider,{value:{create:e,get:t,update:r}},o);var He=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Pt.useQueryClient)(),o=(0,Hr.useContext)(Oe),{resources:s}=(0,Hr.useContext)(Fe),{data:a,refetch:n,isLoading:m}=Mt({queryOptions:{enabled:!!o}}),x=(0,Pt.useMutation)(async l=>{var d,p,c;let y=s.find(i=>i.name===l.resource),P=(p=(d=y==null?void 0:y.options)==null?void 0:d.auditLog)==null?void 0:p.permissions;if(P&&!dr(P,l.action))return;let f;return m&&(f=await n()),await((c=o.create)==null?void 0:c.call(o,{...l,author:a!=null?a:f==null?void 0:f.data}))},e),u=(0,Pt.useMutation)(async l=>{var y;return await((y=o.update)==null?void 0:y.call(o,l))},{onSuccess:l=>{if(l!=null&&l.resource){let y=W(l==null?void 0:l.resource);r.invalidateQueries(y.logList())}},...t});return{log:x,rename:u}};var Ms=T("react"),Us=T("@tanstack/react-query");var ba=({resource:e,action:t,meta:r,author:o,metaData:s,queryOptions:a})=>{let{get:n}=(0,Ms.useContext)(Oe),m=W(e,void 0,s);return(0,Us.useQuery)(m.logList(r),()=>{var u;return(u=n==null?void 0:n({resource:e,action:t,author:o,meta:r,metaData:s}))!=null?u:Promise.resolve([])},{enabled:typeof n<"u",...a,retry:!1})};var Ss=T("react"),Is=T("@tanstack/react-query");var pe=()=>{let{resources:e}=N(),t=(0,Is.useQueryClient)();return(0,Ss.useCallback)(({resource:o,dataProviderName:s,invalidates:a,id:n})=>{if(a===!1)return;let m=W(o,S(o,s,e));a.forEach(x=>{switch(x){case"all":t.invalidateQueries(m.all);break;case"list":t.invalidateQueries(m.list());break;case"many":t.invalidateQueries(m.many());break;case"resourceAll":t.invalidateQueries(m.resourceAll);break;case"detail":t.invalidateQueries(m.detail(n||""));break;default:break}})},[])};var Ls=T("react"),ws=h(T("warn-once"));var Da=()=>{var x;let{useParams:e}=Q(),{i18nProvider:t}=(0,Ls.useContext)(Te),r=U(),{resources:o,resource:s}=N(),{action:a}=e(),n=[];if(!(s!=null&&s.name))return{breadcrumbs:n};let m=u=>{var y;let l=o.find(P=>P.name===u);l&&(l.parentName&&m(l.parentName),n.push({label:(y=l.label)!=null?y:r(`${l.name}.${l.name}`,Ie(l.name)),href:l.list?`/${l.route}`:void 0,icon:l.icon}))};if(s.parentName&&m(s.parentName),n.push({label:(x=s.label)!=null?x:r(`${s.name}.${s.name}`,Ie(s.name)),href:s.list?`/${s.route}`:void 0,icon:s.icon}),a){let u=`actions.${a}`,l=r(u);typeof t<"u"&&l===u?((0,ws.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${a}" action. Please add "actions.${a}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),n.push({label:r(`buttons.${a}`,Ie(a))})):n.push({label:r(u,Ie(a))})}return{breadcrumbs:n}};var We=h(T("react"));var Qs=()=>{let{resources:e}=N(),t=U(),{useLocation:r,useParams:o}=Q(),s=r(),a=o(),{hasDashboard:n}=Le(),m=We.default.useMemo(()=>{let f=e.find(p=>(s==null?void 0:s.pathname)===`/${p.route}`);f||(f=e.find(p=>(a==null?void 0:a.resource)===p.route));let d;return f!=null&&f.route?d=`/${f==null?void 0:f.route}`:s.pathname==="/"?d="/":d=s==null?void 0:s.pathname,d},[e,s,a]),x=We.default.useMemo(()=>e.map(f=>{var p,c;let d=`/${f.route}`;return{...f,icon:f.icon,route:d,key:(p=f.key)!=null?p:d,label:(c=f.label)!=null?c:t(`${f.name}.${f.name}`,ke(f.name,"plural"))}}),[e,n,t]),u=We.default.useMemo(()=>lt(x),[x]),l=We.default.useCallback((f,d,p=!1)=>{let c=d.find(i=>p?i.name===f:i.route===f);if(c){let i=[];return p&&c.route&&i.unshift(c.route),c.parentName&&i.unshift(...l(c.parentName,d,!0)),i}return[]},[]),y=We.default.useMemo(()=>l(m,x),[m,x]);return We.default.useMemo(()=>{let f=d=>d.reduce((p,c)=>{var i,C;return c.children.length>0&&((i=c.options)==null?void 0:i.hide)!==!0?[...p,{...c,children:f(c.children)}]:typeof c.list<"u"&&((C=c.options)==null?void 0:C.hide)!==!0?[...p,c]:p},[]);return{defaultOpenKeys:y,selectedKey:m,menuItems:f(u)}},[y,m,u])};var As=()=>{let[e,t]=(0,ve.useState)(),{push:r}=Z(),o=U(),s=["edit","create","show"],{useParams:a}=Q(),n=a(),m=ee();return(0,ve.useEffect)(()=>{if(n.resource){let x=m(n.resource);n.action&&s.includes(n.action)&&!x[n.action]&&t(o("pages.error.info",{action:n.action,resource:n.resource},`You may have forgotten to add the "${n.action}" component to "${n.resource}" resource.`))}},[n]),ve.default.createElement(ve.default.Fragment,null,ve.default.createElement("h1",null,o("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&ve.default.createElement("p",null,e),ve.default.createElement("button",{onClick:()=>r("/")},o("pages.error.backHome",void 0,"Back Home")))};var X=h(T("react"));var At=()=>{let[e,t]=(0,X.useState)(""),[r,o]=(0,X.useState)(""),s=U(),{mutate:a}=_e();return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,s("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:n=>{n.preventDefault(),a({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,s("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:n=>t(n.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,s("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:n=>o(n.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))};var Ke=h(T("react"));var $=h(T("react"));var Vs=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:s,wrapperProps:a,renderContent:n,formProps:m})=>{let{Link:x}=Q(),[u,l]=(0,$.useState)(""),[y,P]=(0,$.useState)(""),[f,d]=(0,$.useState)(!1),p=U(),{mutate:c}=_e(),i=(R,b)=>R?typeof R=="string"?$.default.createElement(x,{to:R},b):R:null,C=()=>e?e.map(R=>{var b;return $.default.createElement("div",{key:R.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},$.default.createElement("button",{onClick:()=>c({providerName:R.name}),style:{display:"flex",alignItems:"center"}},R==null?void 0:R.icon,(b=R.label)!=null?b:$.default.createElement("label",null,R.label)))}):null,g=$.default.createElement("div",{...s},$.default.createElement("h1",{style:{textAlign:"center"}},p("pages.login.title","Sign in to your account")),C(),$.default.createElement("hr",null),$.default.createElement("form",{onSubmit:R=>{R.preventDefault(),c({email:u,password:y,remember:f})},...m},$.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},$.default.createElement("label",null,p("pages.login.fields.email","Email")),$.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:R=>l(R.target.value)}),$.default.createElement("label",null,p("pages.login.fields.password","Password")),$.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:y,onChange:R=>P(R.target.value)}),o!=null?o:$.default.createElement($.default.Fragment,null,$.default.createElement("label",null,p("pages.login.buttons.rememberMe","Remember me"),$.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:f,value:f.toString(),onChange:()=>{d(!f)}}))),$.default.createElement("br",null),r!=null?r:i("/forgot-password",p("pages.login.buttons.forgotPassword","Forgot password?")),$.default.createElement("input",{type:"submit",value:p("pages.login.signin","Sign in")}),t!=null?t:$.default.createElement("span",null,p("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",i("/register",p("pages.login.register","Sign up"))))));return $.default.createElement("div",{...a},n?n(g):g)};var _=h(T("react"));var Bs=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:s,formProps:a})=>{let{Link:n}=Q(),[m,x]=(0,_.useState)(""),[u,l]=(0,_.useState)(""),y=U(),{mutate:P,isLoading:f}=St(),d=(i,C)=>i?typeof i=="string"?_.default.createElement(n,{to:i},C):i:null,p=()=>e?e.map(i=>{var C;return _.default.createElement("div",{key:i.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},_.default.createElement("button",{onClick:()=>P({providerName:i.name}),style:{display:"flex",alignItems:"center"}},i==null?void 0:i.icon,(C=i.label)!=null?C:_.default.createElement("label",null,i.label)))}):null,c=_.default.createElement("div",{...o},_.default.createElement("h1",{style:{textAlign:"center"}},y("pages.register.title","Sign up for your account")),p(),_.default.createElement("hr",null),_.default.createElement("form",{onSubmit:i=>{i.preventDefault(),P({email:m,password:u})},...a},_.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},_.default.createElement("label",null,y("pages.register.fields.email","Email")),_.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:i=>x(i.target.value)}),_.default.createElement("label",null,y("pages.register.fields.password","Password")),_.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:u,onChange:i=>l(i.target.value)}),_.default.createElement("input",{type:"submit",value:y("pages.register.buttons.submit","Sign up"),disabled:f}),t!=null?t:_.default.createElement(_.default.Fragment,null,_.default.createElement("span",null,y("pages.login.buttons.haveAccount","Have an account?")," ",d("login",y("pages.login.signin","Sign in")))))));return _.default.createElement("div",{...r},s?s(c):c)};var se=h(T("react"));var Ns=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:s})=>{let a=U(),{Link:n}=Q(),[m,x]=(0,se.useState)(""),{mutate:u,isLoading:l}=It(),y=(f,d)=>f?typeof f=="string"?se.default.createElement(n,{to:f},d):f:null,P=se.default.createElement("div",{...r},se.default.createElement("h1",{style:{textAlign:"center"}},a("pages.forgotPassword.title","Forgot your password?")),se.default.createElement("hr",null),se.default.createElement("form",{onSubmit:f=>{f.preventDefault(),u({email:m})},...s},se.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},se.default.createElement("label",null,a("pages.forgotPassword.fields.email","Email")),se.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:f=>x(f.target.value)}),se.default.createElement("input",{type:"submit",disabled:l,value:a("pages.forgotPassword.buttons.submit","Send reset instructions")}),se.default.createElement("br",null),e!=null?e:se.default.createElement("span",null,a("pages.register.buttons.haveAccount","Have an account? ")," ",y("/login",a("pages.login.signin","Sign in"))))));return se.default.createElement("div",{...t},o?o(P):P)};var ae=h(T("react"));var ks=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o})=>{let s=U(),{mutate:a,isLoading:n}=Lt(),[m,x]=(0,ae.useState)(""),[u,l]=(0,ae.useState)(""),y=ae.default.createElement("div",{...t},ae.default.createElement("h1",{style:{textAlign:"center"}},s("pages.updatePassword.title","Update Password")),ae.default.createElement("hr",null),ae.default.createElement("form",{onSubmit:P=>{P.preventDefault(),a({password:m,confirmPassword:u})},...o},ae.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ae.default.createElement("label",null,s("pages.updatePassword.fields.password","New Password")),ae.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:m,onChange:P=>x(P.target.value)}),ae.default.createElement("label",null,s("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ae.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:u,onChange:P=>l(P.target.value)}),ae.default.createElement("input",{type:"submit",disabled:n,value:s("pages.updatePassword.buttons.submit","Update")}))));return ae.default.createElement("div",{...e},r?r(y):y)};var Hs=e=>{let{type:t}=e;return Ke.default.createElement(Ke.default.Fragment,null,(()=>{switch(t){case"register":return Ke.default.createElement(Bs,{...e});case"forgotPassword":return Ke.default.createElement(Ns,{...e});case"updatePassword":return Ke.default.createElement(ks,{...e});default:return Ke.default.createElement(Vs,{...e})}})())};var ne=h(T("react")),er=()=>ne.default.createElement(ne.default.Fragment,null,ne.default.createElement("h1",null,"Welcome on board"),ne.default.createElement("p",null,"Your configuration is completed."),ne.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ne.default.createElement("code",null,"`resources`")," property of ",ne.default.createElement("code",null,"`<Refine>`")),ne.default.createElement("div",{style:{display:"flex",gap:8}},ne.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Documentation")),ne.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Examples")),ne.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Community"))));var j=h(T("react")),bt=T("@tanstack/react-query"),_s=T("@tanstack/react-query-devtools");var $s=T("react");var Se=T("react");var va="3.103.0",Fs=()=>{let e=(0,Se.useContext)(O),t=(0,Se.useContext)(Oe),r=(0,Se.useContext)(Me),o=(0,Se.useContext)(xt),s=(0,Se.useContext)(ft),{i18nProvider:a}=(0,Se.useContext)(Te),n=(0,Se.useContext)(Tt),m=(0,Se.useContext)($e),{resources:x}=N(),u=e.isProvided,l=!!t.create||!!t.get||!!t.update,y=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),P=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,f=!!s,d=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),p=!!n.close||!!n.open,c=!!m.can;return{providers:{auth:u,auditLog:l,live:y,router:P,data:f,i18n:d,notification:p,accessControl:c},version:va,resourceCount:x.length}};var ha=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Os=()=>{let e=Fs();return(0,$s.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ha(e)}`},[]),null};var zs=T("react");var Ws=T("react"),Ks=h(T("lodash-es/isEqual")),Gs=e=>{let t=(0,Ws.useRef)(e);return(0,Ks.default)(t.current,e)||(t.current=e),t.current};var Fr=(e,t)=>{let r=Gs(t);return(0,zs.useMemo)(e,r)};var js=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:o,accessControlProvider:s,auditLogProvider:a,resources:n,DashboardPage:m,ReadyPage:x,LoginPage:u,catchAll:l,children:y,liveProvider:P,i18nProvider:f,mutationMode:d,syncWithLocation:p,warnWhenUnsavedChanges:c,undoableTimeout:i,Title:C,Layout:g,Sider:R,Header:b,Footer:D,OffLayoutArea:E,reactQueryClientConfig:v,reactQueryDevtoolConfig:M,liveMode:L,onLiveEvent:k,disableTelemetry:V,options:A})=>{let{optionsWithDefaults:I,disableTelemetryWithDefault:B,reactQueryWithDefaults:w}=yr({options:A,disableTelemetry:V,liveMode:L,mutationMode:d,reactQueryClientConfig:v,reactQueryDevtoolConfig:M,syncWithLocation:p,warnWhenUnsavedChanges:c,undoableTimeout:i}),te=Fr(()=>{var fe;return w.clientConfig instanceof bt.QueryClient?w.clientConfig:new bt.QueryClient({...w.clientConfig,defaultOptions:{...w.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(fe=w.clientConfig.defaultOptions)==null?void 0:fe.queries}}})},[w.clientConfig]),me=j.default.useMemo(()=>typeof o=="function"?o:()=>o!=null?o:{},[o])(),q=Fr(()=>{let fe=[];return n==null||n.forEach(z=>{var Ce;fe.push({key:z.key,name:z.name,label:(Ce=z.options)==null?void 0:Ce.label,icon:z.icon,route:je(z,n),canCreate:!!z.create,canEdit:!!z.edit,canShow:!!z.show,canDelete:z.canDelete,create:z.create,show:z.show,list:z.list,edit:z.edit,options:z.options,parentName:z.parentName})}),fe},[n]);if(q.length===0)return x?j.default.createElement(x,null):j.default.createElement(er,null);let{RouterComponent:J=j.default.Fragment}=r;return j.default.createElement(bt.QueryClientProvider,{client:te},j.default.createElement(ts,{...me},j.default.createElement(jr,{...e!=null?e:{},isProvided:Boolean(e)},j.default.createElement(Go,{...t},j.default.createElement(jo,{liveProvider:P},j.default.createElement(Cs,{...r},j.default.createElement(Jo,{resources:q},j.default.createElement(ss,{i18nProvider:f},j.default.createElement(Rs,{...s!=null?s:{}},j.default.createElement(Es,{...a!=null?a:{}},j.default.createElement(gr,null,j.default.createElement(So,{mutationMode:I.mutationMode,warnWhenUnsavedChanges:I.warnWhenUnsavedChanges,syncWithLocation:I.syncWithLocation,Title:C,undoableTimeout:I.undoableTimeout,catchAll:l,DashboardPage:m,LoginPage:u,Layout:g,Sider:R,Footer:D,Header:b,OffLayoutArea:E,hasDashboard:!!m,liveMode:I.liveMode,onLiveEvent:k,options:I},j.default.createElement(us,null,j.default.createElement(J,null,y,!B&&j.default.createElement(Os,null),j.default.createElement(tr,null)))))))))))))),w.devtoolConfig===!1?null:j.default.createElement(_s.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...w.devtoolConfig}))};var rr=T("react");var Cr=({notification:e})=>{let t=U(),{notificationDispatch:r}=ye(),{open:o}=re(),[s,a]=(0,rr.useState)(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:st(e.seconds)},`You have ${st(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:st(e.seconds)}),e.seconds>0)){s&&clearTimeout(s);let m=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(m)}};return(0,rr.useEffect)(()=>{n()},[e]),null};var rt=h(T("react"));var qs=({children:e,Layout:t,Sider:r,Header:o,Title:s,Footer:a,OffLayoutArea:n})=>{let{Layout:m,Footer:x,Header:u,Sider:l,Title:y,OffLayoutArea:P}=Le(),f=t!=null?t:m;return rt.default.createElement(f,{Sider:r!=null?r:l,Header:o!=null?o:u,Footer:a!=null?a:x,Title:s!=null?s:y,OffLayoutArea:n!=null?n:P},e,rt.default.createElement(Ea,null))},Ea=()=>{let{Prompt:e}=Q(),t=U(),{warnWhen:r,setWarnWhen:o}=et(),s=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return(0,rt.useEffect)(()=>(r&&window.addEventListener("beforeunload",s),window.removeEventListener("beforeunload",s)),[r]),rt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};var Ge=h(T("react"));var Ys=({children:e,fallback:t,loading:r})=>{let{isSuccess:o,isLoading:s,isError:a}=wt(),{replace:n}=Z(),{useLocation:m}=Q(),{pathname:x,search:u}=m();if(s)return Ge.default.createElement(Ge.default.Fragment,null,r)||null;if(a){if(!t){let l=`${x}${u}`;return x.includes("/login")||n(`/login?to=${encodeURIComponent(l)}`),null}return Ge.default.createElement(Ge.default.Fragment,null,t)}return o?Ge.default.createElement(Ge.default.Fragment,null,e):null};var or=T("react");var tr=()=>{let{useLocation:e}=Q(),{checkAuth:t}=(0,or.useContext)(O),r=e();return(0,or.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var ze=h(T("react"));var Zs=({resource:e,action:t,params:r,fallback:o,children:s,...a})=>{let{data:n}=Ar({resource:e,action:t,params:r});return n!=null&&n.can?ze.default.isValidElement(s)?ze.default.cloneElement(s,a):ze.default.createElement(ze.default.Fragment,null,s):(n==null?void 0:n.can)===!1?ze.default.createElement(ze.default.Fragment,null,o!=null?o:null):null};var we=h(T("react"));var Js=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var Xs=()=>((0,we.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Js.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),we.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},we.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},we.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},we.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),we.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));})();
//# sourceMappingURL=index.js.map