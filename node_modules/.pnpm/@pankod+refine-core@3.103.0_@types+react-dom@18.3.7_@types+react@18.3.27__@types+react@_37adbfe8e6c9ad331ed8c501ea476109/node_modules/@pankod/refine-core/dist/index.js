var en=Object.create;var Lt=Object.defineProperty;var tn=Object.getOwnPropertyDescriptor;var rn=Object.getOwnPropertyNames;var on=Object.getPrototypeOf,an=Object.prototype.hasOwnProperty;var nn=(e,t)=>{for(var r in t)Lt(e,r,{get:t[r],enumerable:!0})},Mt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of rn(t))!an.call(e,a)&&a!==r&&Lt(e,a,{get:()=>t[a],enumerable:!(o=tn(t,a))||o.enumerable});return e},Te=(e,t,r)=>(Mt(e,t,"default"),r&&Mt(r,t,"default")),h=(e,t,r)=>(r=e!=null?en(on(e)):{},Mt(t||!e||!e.__esModule?Lt(r,"default",{value:e,enumerable:!0}):r,e)),sn=e=>Mt(Lt({},"__esModule",{value:!0}),e);var me={};nn(me,{AuthPage:()=>Fa,Authenticated:()=>Ya,CanAccess:()=>Za,ErrorComponent:()=>Aa,GitHubBanner:()=>Xa,LayoutWrapper:()=>ja,LoginPage:()=>kt,ReadyPage:()=>rr,Refine:()=>qa,RouteChangeHandler:()=>or,UndoableQueue:()=>Cr,createTreeView:()=>dt,file2Base64:()=>Mo,getDefaultFilter:()=>Eo,getDefaultSortOrder:()=>ho,getNextPageParam:()=>lt,getPreviousPageParam:()=>mt,handleUseParams:()=>dr,importCSVMapper:()=>nt,parseTableParams:()=>st,parseTableParamsFromQuery:()=>bo,routeGenerator:()=>qe,setInitialFilters:()=>pt,setInitialSorters:()=>ct,stringifyTableParams:()=>it,unionFilters:()=>Ne,unionSorters:()=>ut,useApiUrl:()=>Ho,useAuthenticated:()=>At,useBreadcrumb:()=>hn,useCan:()=>Ar,useCanWithoutCache:()=>xn,useCancelNotification:()=>ge,useCheckError:()=>G,useCreate:()=>Xe,useCreateMany:()=>$t,useCustom:()=>Wo,useCustomMutation:()=>$o,useDataProvider:()=>F,useDelete:()=>Ao,useDeleteMany:()=>Fo,useExport:()=>mn,useForgotPassword:()=>wt,useForm:()=>fn,useGetIdentity:()=>It,useGetLocale:()=>sa,useHandleNotification:()=>$,useImport:()=>Tn,useInfiniteList:()=>_o,useInvalidate:()=>ce,useIsExistAuthentication:()=>Co,useList:()=>je,useLiveMode:()=>hr,useLog:()=>Fe,useLogList:()=>Dn,useLogin:()=>_e,useLogout:()=>Ut,useMany:()=>Vt,useMenu:()=>Qa,useModal:()=>gn,useMutationMode:()=>le,useNavigation:()=>Z,useNotification:()=>re,useOne:()=>Ye,usePermissions:()=>Zr,usePublish:()=>pe,useRedirectionAfterSubmission:()=>Sr,useRefineContext:()=>Se,useRegister:()=>St,useResource:()=>N,useResourceSubscription:()=>Ee,useResourceWithRoute:()=>ee,useRouterContext:()=>Q,useSelect:()=>Rn,useSetLocale:()=>na,useShow:()=>yn,useSubscription:()=>ln,useSyncWithLocation:()=>er,useTable:()=>vn,useTitle:()=>da,useTranslate:()=>L,useUpdate:()=>Wt,useUpdateMany:()=>No,useUpdatePassword:()=>Qt,useWarnAboutChange:()=>et,userFriendlyResourceName:()=>Ve});module.exports=sn(me);Te(me,require("@tanstack/react-query"),module.exports);var De=h(require("react"));var jr=require("react");var ir=h(require("react")),_r=require("@tanstack/react-query");var W=ir.default.createContext({}),qr=({children:e,isProvided:t,...r})=>{let{replace:o}=Z(),a=(0,_r.useQueryClient)(),n=()=>{a.invalidateQueries(["useAuthenticated"]),a.invalidateQueries(["getUserIdentity"]),a.invalidateQueries(["usePermissions"])},s=async l=>{var T;try{let P=await((T=r.login)==null?void 0:T.call(r,l));return n(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},f=async l=>{var T;try{let P=await((T=r.register)==null?void 0:T.call(r,l));return n(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},x=async l=>{var T;try{let P=await((T=r.logout)==null?void 0:T.call(r,l));return n(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},u=async l=>{var T;try{return await((T=r.checkAuth)==null?void 0:T.call(r,l)),Promise.resolve()}catch(P){return P!=null&&P.redirectPath&&o(P.redirectPath),Promise.reject(P)}};return ir.default.createElement(W.Provider,{value:{...r,login:s,logout:x,checkAuth:u,register:f,isProvided:t}},e)};var Yr=require("@tanstack/react-query"),Zr=e=>{let{getPermissions:t}=(0,jr.useContext)(W);return(0,Yr.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})};var Jr=h(require("react")),Xr=require("@tanstack/react-query");var It=({queryOptions:e}={})=>{let{getUserIdentity:t}=Jr.default.useContext(W);return(0,Xr.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})};var eo=h(require("react")),to=require("@tanstack/react-query");var Ut=({mutationOptions:e}={})=>{let{push:t}=Z(),{logout:r}=eo.default.useContext(W),{open:o}=re();return(0,to.useMutation)(["useLogout"],r,{onSuccess:(n,s)=>{var x;let f=(x=s==null?void 0:s.redirectPath)!=null?x:n;if(f!==!1){if(f){t(f);return}t("/login")}},onError:n=>{o==null||o({key:"useLogout-error",type:"error",message:(n==null?void 0:n.name)||"Logout Error",description:(n==null?void 0:n.message)||"Something went wrong during logout"})},...e})};var ro=h(require("react")),oo=require("@tanstack/react-query"),ao=h(require("qs"));var _e=({mutationOptions:e}={})=>{let{replace:t}=Z(),{login:r}=ro.default.useContext(W),{useLocation:o}=Q(),{search:a}=o(),{close:n,open:s}=re(),{to:f}=ao.default.parse(a,{ignoreQueryPrefix:!0});return(0,oo.useMutation)(["useLogin"],r,{onSuccess:u=>{if(f)return t(f);u!==!1&&t(typeof u=="string"?u:"/"),n==null||n("login-error")},onError:u=>{s==null||s({message:(u==null?void 0:u.name)||"Login Error",description:(u==null?void 0:u.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})};var no=h(require("react")),so=require("@tanstack/react-query");var St=({mutationOptions:e}={})=>{let{replace:t}=Z(),{register:r}=no.default.useContext(W),{close:o,open:a}=re();return(0,so.useMutation)(["useRegister"],r,{onSuccess:s=>{s!==!1&&t(s||"/"),o==null||o("register-error")},onError:s=>{a==null||a({message:(s==null?void 0:s.name)||"Register Error",description:(s==null?void 0:s.message)||"Error while registering",key:"register-error",type:"error"})},...e})};var io=h(require("react")),uo=require("@tanstack/react-query");var wt=({mutationOptions:e}={})=>{let{replace:t}=Z(),{forgotPassword:r}=io.default.useContext(W),{close:o,open:a}=re();return(0,uo.useMutation)(["useForgotPassword"],r,{onSuccess:s=>{s!==!1&&s&&t(s),o==null||o("forgot-password-error")},onError:s=>{a==null||a({message:(s==null?void 0:s.name)||"Forgot Password Error",description:(s==null?void 0:s.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})};var po=h(require("react")),co=require("@tanstack/react-query"),lo=h(require("qs"));var Qt=({mutationOptions:e}={})=>{let{replace:t}=Z(),{updatePassword:r}=po.default.useContext(W),{close:o,open:a}=re(),{useLocation:n}=Q(),{search:s}=n(),f=lo.default.parse(s,{ignoreQueryPrefix:!0});return(0,co.useMutation)(["useUpdatePassword"],async u=>r==null?void 0:r({...f,...u}),{onSuccess:u=>{u!==!1&&u&&t(u),o==null||o("update-password-error")},onError:u=>{a==null||a({message:(u==null?void 0:u.name)||"Update Password Error",description:(u==null?void 0:u.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})};var mo=require("react"),fo=require("@tanstack/react-query");var At=e=>{let{checkAuth:t}=(0,mo.useContext)(W);return(0,fo.useQuery)(["useAuthenticated",e],async()=>{var o;return(o=await(t==null?void 0:t(e)))!=null?o:{}},{retry:!1})};var yo=h(require("react")),To=require("@tanstack/react-query");var G=()=>{let{checkError:e}=yo.default.useContext(W),{mutate:t}=Ut();return(0,To.useMutation)(["useCheckError"],e,{onError:o=>{t({redirectPath:o})}})};var go=require("react");var Co=()=>{let{isProvided:e}=(0,go.useContext)(W);return e||!1};var Uo=require("@tanstack/react-query");var at=e=>e/1e3;var xo=h(require("lodash/zip")),Ro=h(require("lodash/fromPairs")),nt=(e,t=r=>r)=>{let[r,...o]=e;return o.map(a=>(0,Ro.default)((0,xo.default)(r,a))).map((a,n,s)=>t.call(void 0,a,n,s))};var cr=h(require("pluralize"));var Bt=h(require("qs")),ur=h(require("lodash/unionWith")),pr=h(require("lodash/differenceWith")),Po=h(require("warn-once")),st=e=>{let{current:t,pageSize:r,sorter:o,filters:a}=Bt.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:o!=null?o:[],parsedFilters:a!=null?a:[]}},bo=e=>{let t=Bt.default.stringify(e);return st(`/${t}`)},it=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,filters:a,...n}=e;return Bt.default.stringify({...n,...r||{},sorter:o,filters:a},t)},vo=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Do=(e,t)=>e.field==t.field,Ne=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,Po.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,ur.default)(e,t,r,vo).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),ut=(e,t)=>(0,ur.default)(e,t,Do).filter(r=>r.order!==void 0&&r.order!==null),pt=(e,t)=>[...(0,pr.default)(t,e,vo),...e],ct=(e,t)=>[...(0,pr.default)(t,e,Do),...e],ho=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},Eo=(e,t,r="eq")=>{let o=t==null?void 0:t.find(a=>{if(a.operator!=="or"&&a.operator!=="and"&&"field"in a){let{operator:n,field:s}=a;return s===e&&n===r}});if(o)return o.value||[]};var Mo=e=>new Promise((t,r)=>{let o=new FileReader,a=()=>{o.result&&(o.removeEventListener("load",a,!1),t(o.result))};o.addEventListener("load",a,!1),o.readAsDataURL(e.originFileObj),o.onerror=n=>(o.removeEventListener("load",a,!1),r(n))});var Ve=(e="",t)=>{let r=Ue(e);return t==="singular"?cr.default.singular(r):cr.default.plural(r)};var dr=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var O=(e,t,r)=>{let o=t||"default",a={all:[o],resourceAll:[o,e||""],list:n=>[...a.resourceAll,"list",{...n,...r}],many:n=>[...a.resourceAll,"getMany",n&&n.map(String),{...r}].filter(s=>s!==void 0),detail:n=>[...a.resourceAll,"detail",n==null?void 0:n.toString(),{...r}],logList:n=>["logList",e,n,r].filter(s=>s!==void 0)};return a};var lr=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var un=e=>t=>e.parentName?t.name===e.parentName:!1,qe=(e,t)=>{var a,n,s,f,x;let r,o=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;if(e.parentName){let u=t.find(un(e));u!=null&&u.parentName?r=`${qe(u,t)}/${o}`:e.parentName&&(r=`${(x=(f=(s=u==null?void 0:u.options)==null?void 0:s.route)!=null?f:u==null?void 0:u.name)!=null?x:e.parentName}/${o}`)}else r=o;return r};var dt=e=>{var s,f,x;let t=[],r={},o={},a,n;for(let u=0;u<e.length;u++){a=e[u];let l=(x=(f=a.route)!=null?f:(s=a.options)==null?void 0:s.route)!=null?x:"";r[l]=a,r[l].children=[],o[a.name]=a,o[a.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(n=r[u],n.parentName&&o[n.parentName]?o[n.parentName].children.push(n):t.push(n));return t};var Ue=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var fr=h(require("react"));var Lo=h(require("react")),mr=({children:e})=>Lo.default.createElement("div",null,e);var be={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},oe=fr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:mr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:be}),Io=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:a,children:n,DashboardPage:s,Title:f,Layout:x=mr,Header:u,Sider:l,Footer:T,OffLayoutArea:P,LoginPage:y=kt,catchAll:m,liveMode:c="off",onLiveEvent:p,options:i})=>fr.default.createElement(oe.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:f,undoableTimeout:a,Layout:x,Header:u,Sider:l,Footer:T,OffLayoutArea:P,DashboardPage:s,LoginPage:y,catchAll:m,liveMode:c,onLiveEvent:p,options:i}},n);var yr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:a,reactQueryDevtoolConfig:n,syncWithLocation:s,undoableTimeout:f,warnWhenUnsavedChanges:x}={})=>{var P,y,m,c,p,i,C,g,R,b,v,E,D,M,S,V,B,A,U,k,w,te,ie,fe;let u={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(y=(P=e==null?void 0:e.mutationMode)!=null?P:o)!=null?y:be.mutationMode,undoableTimeout:(c=(m=e==null?void 0:e.undoableTimeout)!=null?m:f)!=null?c:be.undoableTimeout,syncWithLocation:(i=(p=e==null?void 0:e.syncWithLocation)!=null?p:s)!=null?i:be.syncWithLocation,warnWhenUnsavedChanges:(g=(C=e==null?void 0:e.warnWhenUnsavedChanges)!=null?C:x)!=null?g:be.warnWhenUnsavedChanges,liveMode:(b=(R=e==null?void 0:e.liveMode)!=null?R:r)!=null?b:be.liveMode,redirect:{afterCreate:(E=(v=e==null?void 0:e.redirect)==null?void 0:v.afterCreate)!=null?E:be.redirect.afterCreate,afterClone:(M=(D=e==null?void 0:e.redirect)==null?void 0:D.afterClone)!=null?M:be.redirect.afterClone,afterEdit:(V=(S=e==null?void 0:e.redirect)==null?void 0:S.afterEdit)!=null?V:be.redirect.afterEdit}},l=(A=(B=e==null?void 0:e.disableTelemetry)!=null?B:t)!=null?A:!1,T={clientConfig:(w=(k=(U=e==null?void 0:e.reactQuery)==null?void 0:U.clientConfig)!=null?k:a)!=null?w:{},devtoolConfig:(fe=(ie=(te=e==null?void 0:e.reactQuery)==null?void 0:te.devtoolConfig)!=null?ie:n)!=null?fe:{}};return{optionsWithDefaults:u,disableTelemetryWithDefault:l,reactQueryWithDefaults:T}};var Tr=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}};var Nt=async(e,t,r)=>{let o=[];for(let[a,n]of e.entries())try{let s=await n();o.push(t(s,a))}catch(s){o.push(r(s,a))}return o};var I=(e,t,r)=>{var a;if(t)return t;let o=r==null?void 0:r.find(n=>n.name===e);return(a=o==null?void 0:o.options)!=null&&a.dataProviderName?o.options.dataProviderName:"default"};var he=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var lt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,a=(t==null?void 0:t.pageSize)||10,n=Math.ceil((e.total||0)/a);return o<n?Number(o)+1:void 0},mt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var je=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),T=F(),P=O(e,I(e,u,l),n),{getList:y}=T(I(e,u,l)),m=L(),{mutate:c}=G(),p=$(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:i,liveMode:s,onLiveEvent:f}),(0,Uo.useQuery)(P.list(t),({queryKey:g,pageParam:R,signal:b})=>{let{hasPagination:v,...E}=t||{};return y({resource:e,...E,hasPagination:v,metaData:{...n,queryContext:{queryKey:g,pageParam:R,signal:b}}})},{...r,onSuccess:g=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,g);let R=typeof o=="function"?o(g,{metaData:n,config:t},e):o;p(R)},onError:g=>{var b;c(g),(b=r==null?void 0:r.onError)==null||b.call(r,g);let R=typeof a=="function"?a(g,{metaData:n,config:t},e):a;p(R,{key:`${e}-useList-notification`,message:m("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var So=require("@tanstack/react-query");var Ye=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),T=F(),P=O(e,I(e,u,l),n),{getOne:y}=T(I(e,u,l)),m=L(),{mutate:c}=G(),p=$();return Ee({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:n,subscriptionType:"useOne",...x},enabled:r==null?void 0:r.enabled,liveMode:s,onLiveEvent:f}),(0,So.useQuery)(P.detail(t),({queryKey:C,pageParam:g,signal:R})=>y({resource:e,id:t,metaData:{...n,queryContext:{queryKey:C,pageParam:g,signal:R}}}),{...r,onSuccess:C=>{var R;(R=r==null?void 0:r.onSuccess)==null||R.call(r,C);let g=typeof o=="function"?o(C,{id:t,metaData:n},e):o;p(g)},onError:C=>{var R;c(C),(R=r==null?void 0:r.onError)==null||R.call(r,C);let g=typeof a=="function"?a(C,{id:t,metaData:n},e):a;p(g,{key:`${t}-${e}-getOne-notification`,message:m("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})};var wo=require("@tanstack/react-query");var Vt=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),T=F(),P=O(e,I(e,u,l),n),{getMany:y,getOne:m}=T(I(e,u,l)),c=L(),{mutate:p}=G(),i=$(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:n,subscriptionType:"useMany",...x},channel:`resources/${e}`,enabled:C,liveMode:s,onLiveEvent:f}),(0,wo.useQuery)(P.many(t),({queryKey:R,pageParam:b,signal:v})=>y?y({resource:e,ids:t,metaData:{...n,queryContext:{queryKey:R,pageParam:b,signal:v}}}):he(t.map(E=>m({resource:e,id:E,metaData:{...n,queryContext:{queryKey:R,pageParam:b,signal:v}}}))),{...r,onSuccess:R=>{var v;(v=r==null?void 0:r.onSuccess)==null||v.call(r,R);let b=typeof o=="function"?o(R,t,e):o;i(b)},onError:R=>{var v;p(R),(v=r==null?void 0:r.onError)==null||v.call(r,R);let b=typeof a=="function"?a(R,t,e):a;i(b,{key:`${t[0]}-${e}-getMany-notification`,message:c("notifications.error",{statusCode:R.statusCode},`Error (status code: ${R.statusCode})`),description:R.message,type:"error"})}})};var Kt=require("@tanstack/react-query");var Ze=h(require("react")),Ft=h(require("lodash/isEqual"));var Ht=Ze.default.createContext({notifications:[],notificationDispatch:()=>!1}),pn=[],cn=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!((0,Ft.default)(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!((0,Ft.default)(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>(0,Ft.default)(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},gr=({children:e})=>{let[t,r]=(0,Ze.useReducer)(cn,pn),o={notifications:t,notificationDispatch:r};return Ze.default.createElement(Ht.Provider,{value:o},e,typeof window<"u"&&t.map(a=>Ze.default.createElement(Cr,{key:`${a.id}-${a.resource}-queue`,notification:a})))};var xr=h(require("pluralize"));var Wt=({mutationOptions:e}={})=>{let{resources:t}=N(),r=(0,Kt.useQueryClient)(),o=F(),{mutationMode:a,undoableTimeout:n}=le(),s=L(),{mutate:f}=G(),x=pe(),{log:u}=Fe(),{notificationDispatch:l}=ge(),T=$(),P=ce();return(0,Kt.useMutation)(({id:m,values:c,resource:p,mutationMode:i,undoableTimeout:C,onCancel:g,metaData:R,dataProviderName:b})=>{let v=i!=null?i:a,E=C!=null?C:n;return v!=="undoable"?o(I(p,b,t)).update({resource:p,id:m,variables:c,metaData:R}):new Promise((M,S)=>{let V=()=>{o(I(p,b,t)).update({resource:p,id:m,variables:c,metaData:R}).then(A=>M(A)).catch(A=>S(A))},B=()=>{S({message:"mutationCancelled"})};g&&g(B),l({type:"ADD",payload:{id:m,resource:p,cancelMutation:B,doMutation:V,seconds:E,isSilent:!!g}})})},{onMutate:async({resource:m,id:c,mutationMode:p,values:i,dataProviderName:C})=>{let g=O(m,I(m,C,t)),R=r.getQueriesData(g.resourceAll),b=p!=null?p:a;return await r.cancelQueries(g.resourceAll,void 0,{silent:!0}),b!=="pessimistic"&&(r.setQueriesData(g.list(),v=>{if(!v)return null;let E=v.data.map(D=>{var M;return((M=D.id)==null?void 0:M.toString())===(c==null?void 0:c.toString())?{id:c,...D,...i}:D});return{...v,data:E}}),r.setQueriesData(g.many(),v=>{if(!v)return null;let E=v.data.map(D=>{var M;return((M=D.id)==null?void 0:M.toString())===(c==null?void 0:c.toString())&&(D={id:c,...D,...i}),D});return{...v,data:E}}),r.setQueriesData(g.detail(c),v=>v?{...v,data:{...v.data,...i}}:null)),{previousQueries:R,queryKey:g}},onSettled:(m,c,{id:p,resource:i,dataProviderName:C,invalidates:g=["list","many","detail"]})=>{P({resource:i,dataProviderName:I(i,C,t),invalidates:g,id:p}),l({type:"REMOVE",payload:{id:p,resource:i}})},onSuccess:(m,{id:c,resource:p,successNotification:i,dataProviderName:C,values:g,metaData:R},b)=>{var A;let v=xr.default.singular(p),E=typeof i=="function"?i(m,{id:c,values:g},p):i;T(E,{key:`${c}-${p}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${p}.${p}`,v)},`Successfully updated ${v}`),type:"success"}),x==null||x({channel:`resources/${p}`,type:"updated",payload:{ids:(A=m.data)!=null&&A.id?[m.data.id]:void 0},date:new Date});let D;if(b){let U=r.getQueryData(b.queryKey.detail(c));D=Object.keys(g).reduce((k,w)=>{var te;return k[w]=(te=U==null?void 0:U.data)==null?void 0:te[w],k},{})}let{fields:M,operation:S,variables:V,...B}=R||{};u==null||u.mutate({action:"update",resource:p,data:g,previousData:D,meta:{id:c,dataProviderName:I(p,C,t),...B}})},onError:(m,{id:c,resource:p,errorNotification:i,values:C},g)=>{if(g)for(let R of g.previousQueries)r.setQueryData(R[0],R[1]);if(m.message!=="mutationCancelled"){f==null||f(m);let R=xr.default.singular(p),b=typeof i=="function"?i(m,{id:c,values:C},p):i;T(b,{key:`${c}-${p}-notification`,message:s("notifications.editError",{resource:s(`${p}.${p}`,R),statusCode:m.statusCode},`Error when updating ${R} (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})};var Qo=require("@tanstack/react-query"),Rr=h(require("pluralize"));var Xe=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=F(),o=ce(),{resources:a}=N(),n=L(),s=pe(),{log:f}=Fe(),x=$();return(0,Qo.useMutation)(({resource:l,values:T,metaData:P,dataProviderName:y})=>r(I(l,y,a)).create({resource:l,variables:T,metaData:P}),{onSuccess:(l,{resource:T,successNotification:P,dataProviderName:y,invalidates:m=["list","many"],values:c,metaData:p})=>{var E,D,M;let i=Rr.default.singular(T),C=typeof P=="function"?P(l,c,T):P;x(C,{key:`create-${T}-notification`,message:n("notifications.createSuccess",{resource:n(`${T}.${T}`,i)},`Successfully created ${i}`),description:n("notifications.success","Success"),type:"success"}),o({resource:T,dataProviderName:I(T,y,a),invalidates:m}),s==null||s({channel:`resources/${T}`,type:"created",payload:{ids:(E=l==null?void 0:l.data)!=null&&E.id?[l.data.id]:void 0},date:new Date});let{fields:g,operation:R,variables:b,...v}=p||{};f==null||f.mutate({action:"create",resource:T,data:c,meta:{dataProviderName:I(T,y,a),id:(M=(D=l==null?void 0:l.data)==null?void 0:D.id)!=null?M:void 0,...v}})},onError:(l,{resource:T,errorNotification:P,values:y})=>{t(l);let m=Rr.default.singular(T),c=typeof P=="function"?P(l,y,T):P;x(c,{key:`create-${T}-notification`,description:l.message,message:n("notifications.createError",{resource:n(`${T}.${T}`,m),statusCode:l.statusCode},`There was an error creating ${m} (status code: ${l.statusCode})`),type:"error"})},...e})};var Ot=require("@tanstack/react-query"),Pr=h(require("pluralize"));var Ao=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=F(),{resources:o}=N(),a=(0,Ot.useQueryClient)(),{mutationMode:n,undoableTimeout:s}=le(),{notificationDispatch:f}=ge(),x=L(),u=pe(),{log:l}=Fe(),T=$(),P=ce();return(0,Ot.useMutation)(({id:m,mutationMode:c,undoableTimeout:p,resource:i,onCancel:C,metaData:g,dataProviderName:R,values:b})=>{let v=c!=null?c:n,E=p!=null?p:s;return v!=="undoable"?r(I(i,R,o)).deleteOne({resource:i,id:m,metaData:g,variables:b}):new Promise((M,S)=>{let V=()=>{r(I(i,R,o)).deleteOne({resource:i,id:m,metaData:g,variables:b}).then(A=>M(A)).catch(A=>S(A))},B=()=>{S({message:"mutationCancelled"})};C&&C(B),f({type:"ADD",payload:{id:m,resource:i,cancelMutation:B,doMutation:V,seconds:E,isSilent:!!C}})})},{onMutate:async({id:m,resource:c,mutationMode:p,dataProviderName:i})=>{let C=O(c,I(c,i,o)),g=p!=null?p:n;await a.cancelQueries(C.resourceAll,void 0,{silent:!0});let R=a.getQueriesData(C.resourceAll);return g!=="pessimistic"&&(a.setQueriesData(C.list(),b=>b?{data:b.data.filter(E=>{var D;return((D=E.id)==null?void 0:D.toString())!==m.toString()}),total:b.total-1}:null),a.setQueriesData(C.many(),b=>{if(!b)return null;let v=b.data.filter(E=>{var D;return((D=E.id)==null?void 0:D.toString())!==(m==null?void 0:m.toString())});return{...b,data:v}})),{previousQueries:R,queryKey:C}},onSettled:(m,c,{id:p,resource:i,dataProviderName:C,invalidates:g=["list","many"]})=>{P({resource:i,dataProviderName:I(i,C,o),invalidates:g}),f({type:"REMOVE",payload:{id:p,resource:i}})},onSuccess:(m,{id:c,resource:p,successNotification:i,dataProviderName:C,metaData:g},R)=>{let b=Pr.default.singular(p!=null?p:"");a.removeQueries(R==null?void 0:R.queryKey.detail(c));let v=typeof i=="function"?i(m,c,p):i;T(v,{key:`${c}-${p}-notification`,description:x("notifications.success","Success"),message:x("notifications.deleteSuccess",{resource:x(`${p}.${p}`,b)},`Successfully deleted a ${b}`),type:"success"}),u==null||u({channel:`resources/${p}`,type:"deleted",payload:{ids:c?[c]:[]},date:new Date});let{fields:E,operation:D,variables:M,...S}=g||{};l==null||l.mutate({action:"delete",resource:p,meta:{id:c,dataProviderName:I(p,C,o),...S}}),a.removeQueries(R==null?void 0:R.queryKey.detail(c))},onError:(m,{id:c,resource:p,errorNotification:i},C)=>{if(C)for(let g of C.previousQueries)a.setQueryData(g[0],g[1]);if(m.message!=="mutationCancelled"){t(m);let g=Pr.default.singular(p!=null?p:""),R=typeof i=="function"?i(m,c,p):i;T(R,{key:`${c}-${p}-notification`,message:x("notifications.deleteError",{resource:g,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})};var Bo=require("@tanstack/react-query"),ko=h(require("pluralize"));var $t=({mutationOptions:e}={})=>{let t=F(),{resources:r}=N(),o=L(),a=pe(),n=$(),s=ce();return(0,Bo.useMutation)(({resource:x,values:u,metaData:l,dataProviderName:T})=>{let P=t(I(x,T,r));return P.createMany?P.createMany({resource:x,variables:u,metaData:l}):he(u.map(y=>P.create({resource:x,variables:y,metaData:l})))},{onSuccess:(x,{resource:u,successNotification:l,dataProviderName:T,invalidates:P=["list","many"],values:y})=>{let m=ko.default.plural(u),c=typeof l=="function"?l(x,y,u):l;n(c,{key:`createMany-${u}-notification`,message:o("notifications.createSuccess",{resource:o(`${u}.${u}`,u)},`Successfully created ${m}`),description:o("notifications.success","Success"),type:"success"}),s({resource:u,dataProviderName:I(u,T,r),invalidates:P});let p=x==null?void 0:x.data.filter(i=>(i==null?void 0:i.id)!==void 0).map(i=>i.id);a==null||a({channel:`resources/${u}`,type:"created",payload:{ids:p},date:new Date})},onError:(x,{resource:u,errorNotification:l,values:T})=>{let P=typeof l=="function"?l(x,T,u):l;n(P,{key:`createMany-${u}-notification`,description:x.message,message:o("notifications.createError",{resource:o(`${u}.${u}`,u),statusCode:x.statusCode},`There was an error creating ${u} (status code: ${x.statusCode}`),type:"error"})},...e})};var Gt=require("@tanstack/react-query"),br=h(require("pluralize"));var No=({mutationOptions:e}={})=>{let{resources:t}=N(),r=(0,Gt.useQueryClient)(),o=F(),a=L(),{mutationMode:n,undoableTimeout:s}=le(),{mutate:f}=G(),{notificationDispatch:x}=ge(),u=pe(),l=$(),T=ce();return(0,Gt.useMutation)(({ids:y,values:m,resource:c,onCancel:p,mutationMode:i,undoableTimeout:C,metaData:g,dataProviderName:R})=>{let b=i!=null?i:n,v=C!=null?C:s,E=o(I(c,R,t)),D=()=>E.updateMany?E.updateMany({resource:c,ids:y,variables:m,metaData:g}):he(y.map(S=>E.update({resource:c,id:S,variables:m,metaData:g})));return b!=="undoable"?D():new Promise((S,V)=>{let B=()=>{D().then(U=>S(U)).catch(U=>V(U))},A=()=>{V({message:"mutationCancelled"})};p&&p(A),x({type:"ADD",payload:{id:y,resource:c,cancelMutation:A,doMutation:B,seconds:v,isSilent:!!p}})})},{onMutate:async({resource:y,ids:m,values:c,mutationMode:p,dataProviderName:i,metaData:C})=>{let g=O(y,I(y,i,t),C),R=p!=null?p:n;await r.cancelQueries(g.resourceAll,void 0,{silent:!0});let b=r.getQueriesData(g.resourceAll);if(R!=="pessimistic"){r.setQueriesData(g.list(),v=>{if(!v)return null;let E=v.data.map(D=>D.id!==void 0&&m.filter(M=>M!==void 0).map(String).includes(D.id.toString())?{...D,...c}:D);return{...v,data:E}}),r.setQueriesData(g.many(),v=>{if(!v)return null;let E=v.data.map(D=>D.id!==void 0&&m.filter(M=>M!==void 0).map(String).includes(D.id.toString())?{...D,...c}:D);return{...v,data:E}});for(let v of m)r.setQueriesData(g.detail(v),E=>{if(!E)return null;let D={...E.data,...c};return{...E,data:D}})}return{previousQueries:b,queryKey:g}},onSettled:(y,m,{ids:c,resource:p,dataProviderName:i})=>{T({resource:p,invalidates:["list","many"],dataProviderName:I(p,i,t)}),c.forEach(C=>T({resource:p,invalidates:["detail"],dataProviderName:I(p,i,t),id:C})),x({type:"REMOVE",payload:{id:c,resource:p}})},onSuccess:(y,{ids:m,resource:c,successNotification:p,values:i})=>{let C=br.default.singular(c),g=typeof p=="function"?p(y,{ids:m,values:i},c):p;l(g,{key:`${m}-${c}-notification`,description:a("notifications.success","Successful"),message:a("notifications.editSuccess",{resource:a(`${c}.${c}`,c)},`Successfully updated ${C}`),type:"success"}),u==null||u({channel:`resources/${c}`,type:"updated",payload:{ids:m.map(String)},date:new Date})},onError:(y,{ids:m,resource:c,errorNotification:p,values:i},C)=>{if(C)for(let g of C.previousQueries)r.setQueryData(g[0],g[1]);if(y.message!=="mutationCancelled"){f==null||f(y);let g=br.default.singular(c),R=typeof p=="function"?p(y,{ids:m,values:i},c):p;l(R,{key:`${m}-${c}-updateMany-error-notification`,message:a("notifications.editError",{resource:g,statusCode:y.statusCode},`Error when updating ${g} (status code: ${y.statusCode})`),description:y.message,type:"error"})}},...e})};var zt=require("@tanstack/react-query"),Vo=h(require("pluralize"));var Fo=({mutationOptions:e}={})=>{let{mutate:t}=G(),{mutationMode:r,undoableTimeout:o}=le(),a=F(),{notificationDispatch:n}=ge(),s=L(),f=pe(),x=$(),u=ce(),{resources:l}=N(),T=(0,zt.useQueryClient)();return(0,zt.useMutation)(({resource:y,ids:m,mutationMode:c,undoableTimeout:p,onCancel:i,metaData:C,dataProviderName:g,values:R})=>{let b=c!=null?c:r,v=p!=null?p:o,E=a(I(y,g,l)),D=()=>E.deleteMany?E.deleteMany({resource:y,ids:m,metaData:C,variables:R}):he(m.map(S=>E.deleteOne({resource:y,id:S,metaData:C,variables:R})));return b!=="undoable"?D():new Promise((S,V)=>{let B=()=>{D().then(U=>S(U)).catch(U=>V(U))},A=()=>{V({message:"mutationCancelled"})};i&&i(A),n({type:"ADD",payload:{id:m,resource:y,cancelMutation:A,doMutation:B,seconds:v,isSilent:!!i}})})},{onMutate:async({ids:y,resource:m,mutationMode:c,dataProviderName:p})=>{let i=O(m,I(m,p,l)),C=c!=null?c:r;await T.cancelQueries(i.resourceAll,void 0,{silent:!0});let g=T.getQueriesData(i.resourceAll);if(C!=="pessimistic"){T.setQueriesData(i.list(),R=>R?{data:R.data.filter(v=>v.id&&!y.map(String).includes(v.id.toString())),total:R.total-1}:null),T.setQueriesData(i.many(),R=>{if(!R)return null;let b=R.data.filter(v=>v.id?!y.map(String).includes(v.id.toString()):!1);return{...R,data:b}});for(let R of y)T.setQueriesData(i.detail(R),b=>!b||b.data.id==R?null:{...b})}return{previousQueries:g,queryKey:i}},onSettled:(y,m,{resource:c,ids:p,dataProviderName:i,invalidates:C=["list","many"]})=>{u({resource:c,dataProviderName:I(c,i,l),invalidates:C}),n({type:"REMOVE",payload:{id:p,resource:c}})},onSuccess:(y,{ids:m,resource:c,successNotification:p},i)=>{m.forEach(g=>T.removeQueries(i==null?void 0:i.queryKey.detail(g)));let C=typeof p=="function"?p(y,m,c):p;x(C,{key:`${m}-${c}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${c}.${c}`,c)},`Successfully deleted ${c}`),type:"success"}),f==null||f({channel:`resources/${c}`,type:"deleted",payload:{ids:m},date:new Date}),m.forEach(g=>T.removeQueries(i==null?void 0:i.queryKey.detail(g)))},onError:(y,{ids:m,resource:c,errorNotification:p},i)=>{if(i)for(let C of i.previousQueries)T.setQueryData(C[0],C[1]);if(y.message!=="mutationCancelled"){t(y);let C=Vo.default.singular(c),g=typeof p=="function"?p(y,m,c):p;x(g,{key:`${m}-${c}-notification`,message:s("notifications.deleteError",{resource:C,statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}},...e})};var Ho=e=>{let t=F(),{getApiUrl:r}=t(e);return r()};var Ko=require("@tanstack/react-query");var Wo=({url:e,method:t,config:r,queryOptions:o,successNotification:a,errorNotification:n,metaData:s,dataProviderName:f})=>{let x=F(),{custom:u}=x(f),{mutate:l}=G(),T=L(),P=$();if(u)return(0,Ko.useQuery)([f,"custom",t,e,{...r,...s}],({queryKey:m,pageParam:c,signal:p})=>u({url:e,method:t,...r,metaData:{...s,queryContext:{queryKey:m,pageParam:c,signal:p}}}),{...o,onSuccess:m=>{var p;(p=o==null?void 0:o.onSuccess)==null||p.call(o,m);let c=typeof a=="function"?a(m,{...r,...s}):a;P(c)},onError:m=>{var p;l(m),(p=o==null?void 0:o.onError)==null||p.call(o,m);let c=typeof n=="function"?n(m,{...r,...s}):n;P(c,{key:`${t}-notification`,message:T("notifications.error",{statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};var Oo=require("@tanstack/react-query");var $o=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=$(),o=F(),a=L();return(0,Oo.useMutation)(({url:s,method:f,values:x,metaData:u,dataProviderName:l,config:T})=>{let{custom:P}=o(l);if(P)return P({url:s,method:f,payload:x,metaData:u,headers:{...T==null?void 0:T.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(s,{successNotification:f,config:x,metaData:u})=>{let l=typeof f=="function"?f(s,{...x,...u}):f;r(l)},onError:(s,{errorNotification:f,method:x,config:u,metaData:l})=>{t(s);let T=typeof f=="function"?f(s,{...u,...l}):f;r(T,{key:`${x}-notification`,message:a("notifications.error",{statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})},...e})};var _t=require("react");var vr=h(require("react")),dn=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),ft=vr.default.createContext(dn()),Go=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},vr.default.createElement(ft.Provider,{value:r},e)};var F=()=>{let e=(0,_t.useContext)(ft);return(0,_t.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var zo=require("@tanstack/react-query");var _o=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),T=F(),P=O(e,I(e,u,l),n),{getList:y}=T(I(e,u,l)),m=L(),{mutate:c}=G(),p=$(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:i,liveMode:s,onLiveEvent:f}),(0,zo.useInfiniteQuery)(P.list(t),({queryKey:g,pageParam:R,signal:b})=>{let{hasPagination:v,...E}=t||{},D={...t==null?void 0:t.pagination,current:R};return y({resource:e,...E,pagination:D,hasPagination:v,metaData:{...n,queryContext:{queryKey:g,pageParam:R,signal:b}}}).then(({data:M,total:S,...V})=>({data:M,total:S,pagination:D,...V}))},{getNextPageParam:g=>lt(g),getPreviousPageParam:g=>mt(g),...r,onSuccess:g=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,g);let R=typeof o=="function"?o(g,{metaData:n,config:t},e):o;p(R)},onError:g=>{var b;c(g),(b=r==null?void 0:r.onError)==null||b.call(r,g);let R=typeof a=="function"?a(g,{metaData:n,config:t},e):a;p(R,{key:`${e}-useInfiniteList-notification`,message:m("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var yt=require("react"),jo=require("@tanstack/react-query");var Dr=h(require("react")),Me=Dr.default.createContext(void 0),qo=({liveProvider:e,children:t})=>Dr.default.createElement(Me.Provider,{value:e},t);var Ee=({resource:e,params:t,channel:r,types:o,enabled:a=!0,liveMode:n,onLiveEvent:s})=>{let f=(0,jo.useQueryClient)(),x=O(e),u=(0,yt.useContext)(Me),{liveMode:l,onLiveEvent:T}=(0,yt.useContext)(oe),P=n!=null?n:l;(0,yt.useEffect)(()=>{let y;return P&&P!=="off"&&a&&(y=u==null?void 0:u.subscribe({channel:r,params:{resource:e,...t},types:o,callback:m=>{P==="auto"&&f.invalidateQueries(x.resourceAll),s==null||s(m),T==null||T(m)}})),()=>{y&&(u==null||u.unsubscribe(y))}},[a])};var Yo=require("react");var hr=e=>{let{liveMode:t}=(0,Yo.useContext)(oe);return e!=null?e:t};var qt=require("react");var ln=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:a})=>{let n=(0,qt.useContext)(Me);(0,qt.useEffect)(()=>{let s;return o&&(s=n==null?void 0:n.subscribe({channel:t,params:e,types:r,callback:a})),()=>{s&&(n==null||n.unsubscribe(s))}},[o])};var Zo=require("react");var pe=()=>{let e=(0,Zo.useContext)(Me);return e==null?void 0:e.publish};var Xo=require("react");var Er=h(require("react")),He=Er.default.createContext({resources:[]}),Jo=({resources:e,children:t})=>Er.default.createElement(He.Provider,{value:{resources:e}},t);var N=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:o}=(0,Xo.useContext)(He),a=ee(),{useParams:n}=Q(),s=n(),f=a(t!=null?t:s.resource),x=e!=null?e:f.name,u=r!=null?r:s.id;return{resources:o,resource:f,resourceName:x,id:u,action:s.action}};var jt=require("react");var ee=()=>{let{resources:e}=(0,jt.useContext)(He);return(0,jt.useCallback)(r=>{let o=e.find(a=>a.route===r);if(!o){let a=e.find(n=>n.name===r);return a!=null?a:{name:r,route:r}}return o},[e])};var ea=require("react");var ge=()=>{let{notifications:e,notificationDispatch:t}=(0,ea.useContext)(Ht);return{notifications:e,notificationDispatch:t}};var ra=require("react");var Yt=h(require("react"));var Tt=(0,Yt.createContext)({}),ta=({open:e,close:t,children:r})=>Yt.default.createElement(Tt.Provider,{value:{open:e,close:t}},r);var re=()=>{let{open:e,close:t}=(0,ra.useContext)(Tt);return{open:e,close:t}};var oa=require("react");var $=()=>{let{open:e}=re();return(0,oa.useCallback)((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};var Zt=require("react");var Mr=h(require("react"));var Ce=Mr.default.createContext({}),aa=({children:e,i18nProvider:t})=>Mr.default.createElement(Ce.Provider,{value:{i18nProvider:t}},e);var na=()=>{let{i18nProvider:e}=(0,Zt.useContext)(Ce);return(0,Zt.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var Jt=require("react");var L=()=>{let{i18nProvider:e}=(0,Jt.useContext)(Ce);return(0,Jt.useMemo)(()=>{function r(o,a,n){var s,f;return(f=(s=e==null?void 0:e.translate(o,a,n))!=null?s:n)!=null?f:typeof a=="string"&&typeof n>"u"?a:o}return r},[e])};var Xt=require("react");var sa=()=>{let{i18nProvider:e}=(0,Xt.useContext)(Ce);return(0,Xt.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var ia=require("react");var le=()=>{let{mutationMode:e,undoableTimeout:t}=(0,ia.useContext)(oe);return{mutationMode:e,undoableTimeout:t}};var Ir=require("react");var gt=h(require("react")),Lr=gt.default.createContext({}),ua=({children:e})=>{let[t,r]=(0,gt.useState)(!1);return gt.default.createElement(Lr.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var et=()=>{let{warnWhenUnsavedChanges:e}=(0,Ir.useContext)(oe),{warnWhen:t,setWarnWhen:r}=(0,Ir.useContext)(Lr);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};var pa=require("react");var er=()=>{let{syncWithLocation:e}=(0,pa.useContext)(oe);return{syncWithLocation:e}};var ca=require("react");var da=()=>{let{Title:e}=(0,ca.useContext)(oe);return e};var la=require("react");var Se=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:a,Title:n,hasDashboard:s,mutationMode:f,syncWithLocation:x,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:T,LoginPage:P,catchAll:y,options:m}=(0,la.useContext)(oe);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:a,Title:n,hasDashboard:s,mutationMode:f,syncWithLocation:x,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:T,LoginPage:P,catchAll:y,options:m}};var ma=require("react");var fa=require("export-to-csv-fix-source-map"),mn=({resourceName:e,sorter:t,filters:r,maxItemCount:o,pageSize:a=20,mapData:n=l=>l,exportOptions:s,metaData:f,dataProviderName:x,onError:u}={})=>{let[l,T]=(0,ma.useState)(!1),{resources:P}=N(),y=ee(),m=F(),{useParams:c}=Q(),{resource:p}=c(),{name:i}=y(p);e&&(i=e);let C=`${Ve(i,"plural")}-${new Date().toLocaleString()}`,{getList:g}=m(I(i,x,P));return{isLoading:l,triggerExport:async()=>{T(!0);let b=[],v=1,E=!0;for(;E;)try{let{data:M,total:S}=await g({resource:i,filters:r,sort:t,pagination:{current:v,pageSize:a},metaData:f});v++,b.push(...M),o&&b.length>=o&&(b=b.slice(0,o),E=!1),S===b.length&&(E=!1)}catch(M){T(!1),E=!1,u==null||u(M);return}new fa.ExportToCsv({filename:C,useKeysAsHeaders:!0,...s}).generateCsv(b.map(n)),T(!1)}}};var Ur=h(require("react"));var fn=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:a,redirect:n,successNotification:s,errorNotification:f,metaData:x,mutationMode:u,liveMode:l,onLiveEvent:T,liveParams:P,undoableTimeout:y,dataProviderName:m,invalidates:c,queryOptions:p,createMutationOptions:i,updateMutationOptions:C}={})=>{var Et;let{options:g}=Se(),{useParams:R}=Q(),{resource:b,action:v,id:E}=R(),D=!e||e===b?r!=null?r:E:r,[M,S]=Ur.default.useState(D);Ur.default.useEffect(()=>{D!==M&&S(r)},[r]);let V=e!=null?e:b,B=(Et=t!=null?t:v==="show"?"create":v)!=null?Et:"create",U=ee()(V),{mutationMode:k}=le(),w=u!=null?u:k,te=B==="create",ie=B==="edit",fe=B==="clone",j=Tr({redirectFromProps:n,action:B,redirectOptions:g.redirect}),J=M!==void 0&&(ie||fe),ye=Ye({resource:U.name,id:M!=null?M:"",queryOptions:{enabled:J,...p},liveMode:l,onLiveEvent:T,liveParams:P,metaData:x,dataProviderName:m}),{isFetching:z}=ye,xe=Xe({mutationOptions:i}),{mutate:Qe,isLoading:vt}=xe,Re=Wt({mutationOptions:C}),{mutate:Dt,isLoading:sr}=Re,{setWarnWhen:ht}=et(),Ae=Sr();return{...te||fe?{formLoading:z||vt,mutationResult:xe,onFinish:async ue=>{ht(!1);let H=Y=>{Ae({redirect:j,resource:U,id:Y})};return w!=="pessimistic"&&setTimeout(()=>{H()}),new Promise((Y,Be)=>(w!=="pessimistic"&&Y(),Qe({values:ue,resource:U.name,successNotification:s,errorNotification:f,metaData:x,dataProviderName:m,invalidates:c},{onSuccess:(de,Pe,ke)=>{var zr;o&&o(de,ue,ke);let ot=(zr=de==null?void 0:de.data)==null?void 0:zr.id;H(ot),Y(de)},onError:(de,Pe,ke)=>{if(a)return a(de,ue,ke);Be()}})))}}:{formLoading:z||sr,mutationResult:Re,onFinish:async ue=>{ht(!1);let H={id:M!=null?M:"",values:ue,resource:U.name,mutationMode:w,undoableTimeout:y,successNotification:s,errorNotification:f,metaData:x,dataProviderName:m,invalidates:c},Y=()=>{S(D),Ae({redirect:j,resource:U,id:M})};return w!=="pessimistic"&&setTimeout(()=>{Y()}),new Promise((Be,de)=>(w!=="pessimistic"&&Be(),setTimeout(()=>{Dt(H,{onSuccess:(Pe,ke,ot)=>{o&&o(Pe,ue,ot),w==="pessimistic"&&Y(),Be(Pe)},onError:(Pe,ke,ot)=>{if(a)return a(Pe,ue,ot);de()}})})))}},queryResult:ye,id:M,setId:S,redirect:(ue,H)=>{Ae({redirect:ue!==void 0?ue:ie?"list":"edit",resource:U,id:H!=null?H:M})}}};var ya=require("react");var Sr=()=>{let{show:e,edit:t,list:r,create:o}=Z();return(0,ya.useCallback)(({redirect:n,resource:s,id:f})=>{if(n&&s.route)return s.canShow&&n==="show"&&f?e(s.route,f):s.canEdit&&n==="edit"&&f?t(s.route,f):s.canCreate&&n==="create"?o(s.route):r(s.route,"push")},[])};var Z=()=>{let{useHistory:e}=Q(),t=e(),r=ee(),o=(i,C="push")=>{C==="push"?t.push(i):t.replace(i)},a=i=>`/${r(i).route}/create`,n=(i,C)=>{let g=r(i),R=encodeURIComponent(C);return`/${g.route}/edit/${R}`},s=(i,C)=>{let g=r(i),R=encodeURIComponent(C);return`/${g.route}/clone/${R}`},f=(i,C)=>{let g=r(i),R=encodeURIComponent(C);return`/${g.route}/show/${R}`},x=i=>`/${r(i).route}`;return{create:(i,C="push")=>{o(a(i),C)},createUrl:a,edit:(i,C,g="push")=>{o(n(i,C),g)},editUrl:n,clone:(i,C,g="push")=>{o(s(i,C),g)},cloneUrl:s,show:(i,C,g="push")=>{o(f(i,C),g)},showUrl:f,list:(i,C="push")=>{o(x(i),C)},listUrl:x,push:(i,...C)=>{t.push(i,...C)},replace:(i,...C)=>{t.replace(i,...C)},goBack:()=>{t.goBack()}}};var tr=h(require("react"));var yn=({resource:e,id:t,successNotification:r,errorNotification:o,metaData:a,liveMode:n,onLiveEvent:s,dataProviderName:f,queryOptions:x}={})=>{let{useParams:u}=Q(),{resource:l,id:T}=u(),P=!e||e===l?t!=null?t:T:t,[y,m]=(0,tr.useState)(P);tr.default.useEffect(()=>{P!==y&&m(P)},[P]);let p=ee()(e!=null?e:l);return{queryResult:Ye({resource:p.name,id:y!=null?y:"",queryOptions:{enabled:y!==void 0,...x},successNotification:r,errorNotification:o,metaData:a,liveMode:n,onLiveEvent:s,dataProviderName:f}),showId:y,setShowId:m}};var tt=require("react"),Ta=require("papaparse"),ga=h(require("lodash/chunk"));var Tn=({resourceName:e,mapData:t=x=>x,paparseOptions:r,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:a,metaData:n,onProgress:s,dataProviderName:f}={})=>{let[x,u]=(0,tt.useState)(0),[l,T]=(0,tt.useState)(0),[P,y]=(0,tt.useState)(!1),m=ee(),{useParams:c}=Q(),{resource:p}=c(),{name:i}=m(e!=null?e:p),C=$t(),g=Xe(),R;o===1?R=g:R=C;let b=()=>{T(0),u(0),y(!1)},v=D=>{let M={succeeded:D.filter(S=>S.type==="success"),errored:D.filter(S=>S.type==="error")};a==null||a(M),y(!1)};(0,tt.useEffect)(()=>{s==null||s({totalAmount:l,processedAmount:x})},[l,x]);let E=({file:D})=>(b(),new Promise(M=>{y(!0),(0,Ta.parse)(D,{complete:async({data:S})=>{let V=nt(S,t);if(T(V.length),o===1){let B=V.map(U=>async()=>({response:await g.mutateAsync({resource:i,values:U,successNotification:!1,errorNotification:!1,dataProviderName:f,metaData:n}),value:U})),A=await Nt(B,({response:U,value:k})=>(u(w=>w+1),{response:[U.data],type:"success",request:[k]}),(U,k)=>({response:[U],type:"error",request:[V[k]]}));M(A)}else{let B=(0,ga.default)(V,o),A=B.map(k=>async()=>({response:await C.mutateAsync({resource:i,values:k,successNotification:!1,errorNotification:!1,dataProviderName:f,metaData:n}),value:k,currentBatchLength:k.length})),U=await Nt(A,({response:k,currentBatchLength:w,value:te})=>(u(ie=>ie+w),{response:k.data,type:"success",request:te}),(k,w)=>({response:[k],type:"error",request:B[w]}));M(U)}},...r})}).then(M=>(v(M),M)));return{inputProps:{type:"file",accept:".csv",onChange:D=>{D.target.files&&D.target.files.length>0&&E({file:D.target.files[0]})}},mutationResult:R,isLoading:P,handleChange:E}};var Ct=require("react"),gn=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Ct.useState)(e),o=(0,Ct.useCallback)(()=>r(!0),[t]),a=(0,Ct.useCallback)(()=>r(!1),[t]);return{visible:t,show:o,close:a}};var xa=require("react");var wr=h(require("react")),Cn={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},xt=wr.default.createContext(Cn),Ca=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:a,Link:n,routes:s})=>wr.default.createElement(xt.Provider,{value:{useHistory:t,useLocation:r,useParams:o,Prompt:a,Link:n,routes:s}},e);var Q=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:a,routes:n}=(0,xa.useContext)(xt);return{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:a,routes:n}};var Pa=require("react"),ba=require("@tanstack/react-query");var Qr=h(require("react"));var Ke=Qr.default.createContext({}),Ra=({can:e,children:t})=>Qr.default.createElement(Ke.Provider,{value:{can:e}},t);var Ar=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:a}=(0,Pa.useContext)(Ke),{resource:n,...s}=r!=null?r:{},{icon:f,list:x,edit:u,create:l,show:T,children:P,...y}=n!=null?n:{},m=(0,ba.useQuery)(["useCan",{action:e,resource:t,params:{...s,resource:y},enabled:o==null?void 0:o.enabled}],()=>{var c;return(c=a==null?void 0:a({action:e,resource:t,params:r}))!=null?c:Promise.resolve({can:!0})},{enabled:typeof a<"u",...o,retry:!1});return typeof a>"u"?{data:{can:!0}}:m};var va=require("react");var xn=()=>{let{can:e}=(0,va.useContext)(Ke);return{can:e}};var Le=require("react"),Da=h(require("lodash/uniqBy")),ha=h(require("lodash/debounce")),Rt=h(require("lodash/get"));var Rn=e=>{var ie,fe;let[t,r]=(0,Le.useState)([]),[o,a]=(0,Le.useState)([]),[n,s]=(0,Le.useState)([]),{resource:f,sort:x,filters:u=[],optionLabel:l="title",optionValue:T="id",debounce:P=300,successNotification:y,errorNotification:m,defaultValueQueryOptions:c,queryOptions:p,fetchSize:i,pagination:C,hasPagination:g,liveMode:R,defaultValue:b=[],onLiveEvent:v,onSearch:E,liveParams:D,metaData:M,dataProviderName:S}=e,V=Array.isArray(b)?b:[b],B=(0,Le.useCallback)(j=>{s(j.data.map(J=>({label:(0,Rt.default)(J,l),value:(0,Rt.default)(J,T)})))},[l,T]),A=c!=null?c:p,U=Vt({resource:f,ids:V,queryOptions:{...A,enabled:V.length>0&&((ie=c==null?void 0:c.enabled)!=null?ie:!0),onSuccess:j=>{var J;B(j),(J=A==null?void 0:A.onSuccess)==null||J.call(A,j)}},metaData:M,liveMode:"off",dataProviderName:S}),k=(0,Le.useCallback)(j=>{a(j.data.map(J=>({label:(0,Rt.default)(J,l),value:(0,Rt.default)(J,T)})))},[l,T]),w=je({resource:f,config:{sort:x,filters:u.concat(t),pagination:{current:C==null?void 0:C.current,pageSize:(fe=C==null?void 0:C.pageSize)!=null?fe:i},hasPagination:g},queryOptions:{...p,onSuccess:j=>{var J;k(j),(J=p==null?void 0:p.onSuccess)==null||J.call(p,j)}},successNotification:y,errorNotification:m,metaData:M,liveMode:R,liveParams:D,onLiveEvent:v,dataProviderName:S}),te=j=>{if(E){r(E(j));return}if(j)r([{field:l,operator:"contains",value:j}]);else{r([]);return}};return{queryResult:w,defaultValueQueryResult:U,options:(0,Le.useMemo)(()=>(0,Da.default)([...o,...n],"value"),[o,n]),onSearch:(0,ha.default)(te,P)}};var ve=require("react"),Br=h(require("qs")),kr=h(require("lodash/differenceWith")),Nr=h(require("lodash/isEqual"));var Pn=[],bn=[];function vn({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:o,permanentSorter:a=bn,defaultSetFilterBehavior:n="merge",initialFilter:s,permanentFilter:f=Pn,syncWithLocation:x,resource:u,successNotification:l,errorNotification:T,queryOptions:P,liveMode:y,onLiveEvent:m,liveParams:c,metaData:p,dataProviderName:i}={}){var ue;let{syncWithLocation:C}=er(),g=x!=null?x:C,{useLocation:R,useParams:b}=Q(),{search:v,pathname:E}=R(),D=hr(y),{parsedCurrent:M,parsedPageSize:S,parsedSorter:V,parsedFilters:B}=st(v),A=M||e,U=S||t,k=V.length?V:o,w=B.length?B:s,{resource:te}=b(),{replace:ie}=Z(),j=ee()(u!=null?u:te),[J,ye]=(0,ve.useState)(ct(a,k!=null?k:[])),[z,xe]=(0,ve.useState)(pt(f,w!=null?w:[])),[Qe,vt]=(0,ve.useState)(A),[Re,Dt]=(0,ve.useState)(U),sr=({pagination:{current:H,pageSize:Y},sorter:Be,filters:de})=>{let Pe=Br.default.parse(v==null?void 0:v.substring(1)),ke=it({pagination:{pageSize:Y,current:H},sorter:Be,filters:de,...Pe});return`${E}?${ke}`};(0,ve.useEffect)(()=>{v===""&&(vt(A),Dt(U),ye(ct(a,k!=null?k:[])),xe(pt(f,w!=null?w:[])))},[v]);let ht=()=>{let{sorter:H,filters:Y,pageSize:Be,current:de,...Pe}=Br.default.parse(v,{ignoreQueryPrefix:!0});return Pe};(0,ve.useEffect)(()=>{if(g){let H=ht(),Y=it({...r?{pagination:{pageSize:Re,current:Qe}}:{},sorter:(0,kr.default)(J,a,Nr.default),filters:(0,kr.default)(z,f,Nr.default),...H});return ie(`${E}?${Y}`,void 0,{shallow:!0})}},[g,Qe,Re,J,z]);let Ae=je({resource:j.name,config:{hasPagination:r,pagination:{current:Qe,pageSize:Re},filters:Ne(f,z),sort:ut(a,J)},queryOptions:P,successNotification:l,errorNotification:T,metaData:p,liveMode:D,liveParams:c,onLiveEvent:m,dataProviderName:i}),Kr=H=>{xe(Y=>Ne(f,H,Y))},Wr=H=>{xe(Ne(f,H))},Or=H=>{xe(Y=>Ne(f,H(Y)))},$r=(H,Y=n)=>{typeof H=="function"?Or(H):Y==="replace"?Wr(H):Kr(H)},Gr=H=>{ye(()=>ut(a,H))},Et=(0,ve.useMemo)(()=>{var H,Y;return r?{current:Qe,setCurrent:vt,pageSize:Re,setPageSize:Dt,pageCount:Re?Math.ceil(((Y=(H=Ae.data)==null?void 0:H.total)!=null?Y:0)/Re):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,Qe,Re,(ue=Ae.data)==null?void 0:ue.total]);return{tableQueryResult:Ae,sorter:J,setSorter:Gr,filters:z,setFilters:$r,...Et,createLinkForSyncWithLocation:sr}}var Fr=require("react"),Pt=require("@tanstack/react-query");var Vr=h(require("react")),We=Vr.default.createContext({}),Ea=({create:e,get:t,update:r,children:o})=>Vr.default.createElement(We.Provider,{value:{create:e,get:t,update:r}},o);var Fe=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Pt.useQueryClient)(),o=(0,Fr.useContext)(We),{resources:a}=(0,Fr.useContext)(He),{data:n,refetch:s,isLoading:f}=It({queryOptions:{enabled:!!o}}),x=(0,Pt.useMutation)(async l=>{var m,c,p;let T=a.find(i=>i.name===l.resource),P=(c=(m=T==null?void 0:T.options)==null?void 0:m.auditLog)==null?void 0:c.permissions;if(P&&!lr(P,l.action))return;let y;return f&&(y=await s()),await((p=o.create)==null?void 0:p.call(o,{...l,author:n!=null?n:y==null?void 0:y.data}))},e),u=(0,Pt.useMutation)(async l=>{var T;return await((T=o.update)==null?void 0:T.call(o,l))},{onSuccess:l=>{if(l!=null&&l.resource){let T=O(l==null?void 0:l.resource);r.invalidateQueries(T.logList())}},...t});return{log:x,rename:u}};var Ma=require("react"),La=require("@tanstack/react-query");var Dn=({resource:e,action:t,meta:r,author:o,metaData:a,queryOptions:n})=>{let{get:s}=(0,Ma.useContext)(We),f=O(e,void 0,a);return(0,La.useQuery)(f.logList(r),()=>{var u;return(u=s==null?void 0:s({resource:e,action:t,author:o,meta:r,metaData:a}))!=null?u:Promise.resolve([])},{enabled:typeof s<"u",...n,retry:!1})};var Ia=require("react"),Ua=require("@tanstack/react-query");var ce=()=>{let{resources:e}=N(),t=(0,Ua.useQueryClient)();return(0,Ia.useCallback)(({resource:o,dataProviderName:a,invalidates:n,id:s})=>{if(n===!1)return;let f=O(o,I(o,a,e));n.forEach(x=>{switch(x){case"all":t.invalidateQueries(f.all);break;case"list":t.invalidateQueries(f.list());break;case"many":t.invalidateQueries(f.many());break;case"resourceAll":t.invalidateQueries(f.resourceAll);break;case"detail":t.invalidateQueries(f.detail(s||""));break;default:break}})},[])};var Sa=require("react"),wa=h(require("warn-once"));var hn=()=>{var x;let{useParams:e}=Q(),{i18nProvider:t}=(0,Sa.useContext)(Ce),r=L(),{resources:o,resource:a}=N(),{action:n}=e(),s=[];if(!(a!=null&&a.name))return{breadcrumbs:s};let f=u=>{var T;let l=o.find(P=>P.name===u);l&&(l.parentName&&f(l.parentName),s.push({label:(T=l.label)!=null?T:r(`${l.name}.${l.name}`,Ue(l.name)),href:l.list?`/${l.route}`:void 0,icon:l.icon}))};if(a.parentName&&f(a.parentName),s.push({label:(x=a.label)!=null?x:r(`${a.name}.${a.name}`,Ue(a.name)),href:a.list?`/${a.route}`:void 0,icon:a.icon}),n){let u=`actions.${n}`,l=r(u);typeof t<"u"&&l===u?((0,wa.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${n}" action. Please add "actions.${n}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),s.push({label:r(`buttons.${n}`,Ue(n))})):s.push({label:r(u,Ue(n))})}return{breadcrumbs:s}};var Oe=h(require("react"));var Qa=()=>{let{resources:e}=N(),t=L(),{useLocation:r,useParams:o}=Q(),a=r(),n=o(),{hasDashboard:s}=Se(),f=Oe.default.useMemo(()=>{let y=e.find(c=>(a==null?void 0:a.pathname)===`/${c.route}`);y||(y=e.find(c=>(n==null?void 0:n.resource)===c.route));let m;return y!=null&&y.route?m=`/${y==null?void 0:y.route}`:a.pathname==="/"?m="/":m=a==null?void 0:a.pathname,m},[e,a,n]),x=Oe.default.useMemo(()=>e.map(y=>{var c,p;let m=`/${y.route}`;return{...y,icon:y.icon,route:m,key:(c=y.key)!=null?c:m,label:(p=y.label)!=null?p:t(`${y.name}.${y.name}`,Ve(y.name,"plural"))}}),[e,s,t]),u=Oe.default.useMemo(()=>dt(x),[x]),l=Oe.default.useCallback((y,m,c=!1)=>{let p=m.find(i=>c?i.name===y:i.route===y);if(p){let i=[];return c&&p.route&&i.unshift(p.route),p.parentName&&i.unshift(...l(p.parentName,m,!0)),i}return[]},[]),T=Oe.default.useMemo(()=>l(f,x),[f,x]);return Oe.default.useMemo(()=>{let y=m=>m.reduce((c,p)=>{var i,C;return p.children.length>0&&((i=p.options)==null?void 0:i.hide)!==!0?[...c,{...p,children:y(p.children)}]:typeof p.list<"u"&&((C=p.options)==null?void 0:C.hide)!==!0?[...c,p]:c},[]);return{defaultOpenKeys:T,selectedKey:f,menuItems:y(u)}},[T,f,u])};var Aa=()=>{let[e,t]=(0,De.useState)(),{push:r}=Z(),o=L(),a=["edit","create","show"],{useParams:n}=Q(),s=n(),f=ee();return(0,De.useEffect)(()=>{if(s.resource){let x=f(s.resource);s.action&&a.includes(s.action)&&!x[s.action]&&t(o("pages.error.info",{action:s.action,resource:s.resource},`You may have forgotten to add the "${s.action}" component to "${s.resource}" resource.`))}},[s]),De.default.createElement(De.default.Fragment,null,De.default.createElement("h1",null,o("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&De.default.createElement("p",null,e),De.default.createElement("button",{onClick:()=>r("/")},o("pages.error.backHome",void 0,"Back Home")))};var X=h(require("react"));var kt=()=>{let[e,t]=(0,X.useState)(""),[r,o]=(0,X.useState)(""),a=L(),{mutate:n}=_e();return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,a("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:s=>{s.preventDefault(),n({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,a("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:s=>t(s.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,a("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:s=>o(s.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))};var $e=h(require("react"));var K=h(require("react"));var Ba=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:a,wrapperProps:n,renderContent:s,formProps:f})=>{let{Link:x}=Q(),[u,l]=(0,K.useState)(""),[T,P]=(0,K.useState)(""),[y,m]=(0,K.useState)(!1),c=L(),{mutate:p}=_e(),i=(R,b)=>R?typeof R=="string"?K.default.createElement(x,{to:R},b):R:null,C=()=>e?e.map(R=>{var b;return K.default.createElement("div",{key:R.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},K.default.createElement("button",{onClick:()=>p({providerName:R.name}),style:{display:"flex",alignItems:"center"}},R==null?void 0:R.icon,(b=R.label)!=null?b:K.default.createElement("label",null,R.label)))}):null,g=K.default.createElement("div",{...a},K.default.createElement("h1",{style:{textAlign:"center"}},c("pages.login.title","Sign in to your account")),C(),K.default.createElement("hr",null),K.default.createElement("form",{onSubmit:R=>{R.preventDefault(),p({email:u,password:T,remember:y})},...f},K.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},K.default.createElement("label",null,c("pages.login.fields.email","Email")),K.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:R=>l(R.target.value)}),K.default.createElement("label",null,c("pages.login.fields.password","Password")),K.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:T,onChange:R=>P(R.target.value)}),o!=null?o:K.default.createElement(K.default.Fragment,null,K.default.createElement("label",null,c("pages.login.buttons.rememberMe","Remember me"),K.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:y,value:y.toString(),onChange:()=>{m(!y)}}))),K.default.createElement("br",null),r!=null?r:i("/forgot-password",c("pages.login.buttons.forgotPassword","Forgot password?")),K.default.createElement("input",{type:"submit",value:c("pages.login.signin","Sign in")}),t!=null?t:K.default.createElement("span",null,c("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",i("/register",c("pages.login.register","Sign up"))))));return K.default.createElement("div",{...n},s?s(g):g)};var _=h(require("react"));var ka=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:a,formProps:n})=>{let{Link:s}=Q(),[f,x]=(0,_.useState)(""),[u,l]=(0,_.useState)(""),T=L(),{mutate:P,isLoading:y}=St(),m=(i,C)=>i?typeof i=="string"?_.default.createElement(s,{to:i},C):i:null,c=()=>e?e.map(i=>{var C;return _.default.createElement("div",{key:i.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},_.default.createElement("button",{onClick:()=>P({providerName:i.name}),style:{display:"flex",alignItems:"center"}},i==null?void 0:i.icon,(C=i.label)!=null?C:_.default.createElement("label",null,i.label)))}):null,p=_.default.createElement("div",{...o},_.default.createElement("h1",{style:{textAlign:"center"}},T("pages.register.title","Sign up for your account")),c(),_.default.createElement("hr",null),_.default.createElement("form",{onSubmit:i=>{i.preventDefault(),P({email:f,password:u})},...n},_.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},_.default.createElement("label",null,T("pages.register.fields.email","Email")),_.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:f,onChange:i=>x(i.target.value)}),_.default.createElement("label",null,T("pages.register.fields.password","Password")),_.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:u,onChange:i=>l(i.target.value)}),_.default.createElement("input",{type:"submit",value:T("pages.register.buttons.submit","Sign up"),disabled:y}),t!=null?t:_.default.createElement(_.default.Fragment,null,_.default.createElement("span",null,T("pages.login.buttons.haveAccount","Have an account?")," ",m("login",T("pages.login.signin","Sign in")))))));return _.default.createElement("div",{...r},a?a(p):p)};var ae=h(require("react"));var Na=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:a})=>{let n=L(),{Link:s}=Q(),[f,x]=(0,ae.useState)(""),{mutate:u,isLoading:l}=wt(),T=(y,m)=>y?typeof y=="string"?ae.default.createElement(s,{to:y},m):y:null,P=ae.default.createElement("div",{...r},ae.default.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),ae.default.createElement("hr",null),ae.default.createElement("form",{onSubmit:y=>{y.preventDefault(),u({email:f})},...a},ae.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ae.default.createElement("label",null,n("pages.forgotPassword.fields.email","Email")),ae.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:f,onChange:y=>x(y.target.value)}),ae.default.createElement("input",{type:"submit",disabled:l,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),ae.default.createElement("br",null),e!=null?e:ae.default.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",T("/login",n("pages.login.signin","Sign in"))))));return ae.default.createElement("div",{...t},o?o(P):P)};var ne=h(require("react"));var Va=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o})=>{let a=L(),{mutate:n,isLoading:s}=Qt(),[f,x]=(0,ne.useState)(""),[u,l]=(0,ne.useState)(""),T=ne.default.createElement("div",{...t},ne.default.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),ne.default.createElement("hr",null),ne.default.createElement("form",{onSubmit:P=>{P.preventDefault(),n({password:f,confirmPassword:u})},...o},ne.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ne.default.createElement("label",null,a("pages.updatePassword.fields.password","New Password")),ne.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:f,onChange:P=>x(P.target.value)}),ne.default.createElement("label",null,a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ne.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:u,onChange:P=>l(P.target.value)}),ne.default.createElement("input",{type:"submit",disabled:s,value:a("pages.updatePassword.buttons.submit","Update")}))));return ne.default.createElement("div",{...e},r?r(T):T)};var Fa=e=>{let{type:t}=e;return $e.default.createElement($e.default.Fragment,null,(()=>{switch(t){case"register":return $e.default.createElement(ka,{...e});case"forgotPassword":return $e.default.createElement(Na,{...e});case"updatePassword":return $e.default.createElement(Va,{...e});default:return $e.default.createElement(Ba,{...e})}})())};var se=h(require("react")),rr=()=>se.default.createElement(se.default.Fragment,null,se.default.createElement("h1",null,"Welcome on board"),se.default.createElement("p",null,"Your configuration is completed."),se.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",se.default.createElement("code",null,"`resources`")," property of ",se.default.createElement("code",null,"`<Refine>`")),se.default.createElement("div",{style:{display:"flex",gap:8}},se.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Documentation")),se.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Examples")),se.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Community"))));var q=h(require("react")),bt=require("@tanstack/react-query"),_a=require("@tanstack/react-query-devtools");var Ka=require("react");var Ie=require("react");var En="3.103.0",Ha=()=>{let e=(0,Ie.useContext)(W),t=(0,Ie.useContext)(We),r=(0,Ie.useContext)(Me),o=(0,Ie.useContext)(xt),a=(0,Ie.useContext)(ft),{i18nProvider:n}=(0,Ie.useContext)(Ce),s=(0,Ie.useContext)(Tt),f=(0,Ie.useContext)(Ke),{resources:x}=N(),u=e.isProvided,l=!!t.create||!!t.get||!!t.update,T=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),P=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,y=!!a,m=!!(n!=null&&n.changeLocale)||!!(n!=null&&n.getLocale)||!!(n!=null&&n.translate),c=!!s.close||!!s.open,p=!!f.can;return{providers:{auth:u,auditLog:l,live:T,router:P,data:y,i18n:m,notification:c,accessControl:p},version:En,resourceCount:x.length}};var Mn=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Wa=()=>{let e=Ha();return(0,Ka.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${Mn(e)}`},[]),null};var za=require("react");var Oa=require("react"),$a=h(require("lodash/isEqual")),Ga=e=>{let t=(0,Oa.useRef)(e);return(0,$a.default)(t.current,e)||(t.current=e),t.current};var Hr=(e,t)=>{let r=Ga(t);return(0,za.useMemo)(e,r)};var qa=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:o,accessControlProvider:a,auditLogProvider:n,resources:s,DashboardPage:f,ReadyPage:x,LoginPage:u,catchAll:l,children:T,liveProvider:P,i18nProvider:y,mutationMode:m,syncWithLocation:c,warnWhenUnsavedChanges:p,undoableTimeout:i,Title:C,Layout:g,Sider:R,Header:b,Footer:v,OffLayoutArea:E,reactQueryClientConfig:D,reactQueryDevtoolConfig:M,liveMode:S,onLiveEvent:V,disableTelemetry:B,options:A})=>{let{optionsWithDefaults:U,disableTelemetryWithDefault:k,reactQueryWithDefaults:w}=yr({options:A,disableTelemetry:B,liveMode:S,mutationMode:m,reactQueryClientConfig:D,reactQueryDevtoolConfig:M,syncWithLocation:c,warnWhenUnsavedChanges:p,undoableTimeout:i}),te=Hr(()=>{var ye;return w.clientConfig instanceof bt.QueryClient?w.clientConfig:new bt.QueryClient({...w.clientConfig,defaultOptions:{...w.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(ye=w.clientConfig.defaultOptions)==null?void 0:ye.queries}}})},[w.clientConfig]),fe=q.default.useMemo(()=>typeof o=="function"?o:()=>o!=null?o:{},[o])(),j=Hr(()=>{let ye=[];return s==null||s.forEach(z=>{var xe;ye.push({key:z.key,name:z.name,label:(xe=z.options)==null?void 0:xe.label,icon:z.icon,route:qe(z,s),canCreate:!!z.create,canEdit:!!z.edit,canShow:!!z.show,canDelete:z.canDelete,create:z.create,show:z.show,list:z.list,edit:z.edit,options:z.options,parentName:z.parentName})}),ye},[s]);if(j.length===0)return x?q.default.createElement(x,null):q.default.createElement(rr,null);let{RouterComponent:J=q.default.Fragment}=r;return q.default.createElement(bt.QueryClientProvider,{client:te},q.default.createElement(ta,{...fe},q.default.createElement(qr,{...e!=null?e:{},isProvided:Boolean(e)},q.default.createElement(Go,{...t},q.default.createElement(qo,{liveProvider:P},q.default.createElement(Ca,{...r},q.default.createElement(Jo,{resources:j},q.default.createElement(aa,{i18nProvider:y},q.default.createElement(Ra,{...a!=null?a:{}},q.default.createElement(Ea,{...n!=null?n:{}},q.default.createElement(gr,null,q.default.createElement(Io,{mutationMode:U.mutationMode,warnWhenUnsavedChanges:U.warnWhenUnsavedChanges,syncWithLocation:U.syncWithLocation,Title:C,undoableTimeout:U.undoableTimeout,catchAll:l,DashboardPage:f,LoginPage:u,Layout:g,Sider:R,Footer:v,Header:b,OffLayoutArea:E,hasDashboard:!!f,liveMode:U.liveMode,onLiveEvent:V,options:U},q.default.createElement(ua,null,q.default.createElement(J,null,T,!k&&q.default.createElement(Wa,null),q.default.createElement(or,null)))))))))))))),w.devtoolConfig===!1?null:q.default.createElement(_a.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...w.devtoolConfig}))};var ar=require("react");var Cr=({notification:e})=>{let t=L(),{notificationDispatch:r}=ge(),{open:o}=re(),[a,n]=(0,ar.useState)(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:at(e.seconds)},`You have ${at(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:at(e.seconds)}),e.seconds>0)){a&&clearTimeout(a);let f=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);n(f)}};return(0,ar.useEffect)(()=>{s()},[e]),null};var rt=h(require("react"));var ja=({children:e,Layout:t,Sider:r,Header:o,Title:a,Footer:n,OffLayoutArea:s})=>{let{Layout:f,Footer:x,Header:u,Sider:l,Title:T,OffLayoutArea:P}=Se(),y=t!=null?t:f;return rt.default.createElement(y,{Sider:r!=null?r:l,Header:o!=null?o:u,Footer:n!=null?n:x,Title:a!=null?a:T,OffLayoutArea:s!=null?s:P},e,rt.default.createElement(Ln,null))},Ln=()=>{let{Prompt:e}=Q(),t=L(),{warnWhen:r,setWarnWhen:o}=et(),a=n=>(n.preventDefault(),n.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),n.returnValue);return(0,rt.useEffect)(()=>(r&&window.addEventListener("beforeunload",a),window.removeEventListener("beforeunload",a)),[r]),rt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};var Ge=h(require("react"));var Ya=({children:e,fallback:t,loading:r})=>{let{isSuccess:o,isLoading:a,isError:n}=At(),{replace:s}=Z(),{useLocation:f}=Q(),{pathname:x,search:u}=f();if(a)return Ge.default.createElement(Ge.default.Fragment,null,r)||null;if(n){if(!t){let l=`${x}${u}`;return x.includes("/login")||s(`/login?to=${encodeURIComponent(l)}`),null}return Ge.default.createElement(Ge.default.Fragment,null,t)}return o?Ge.default.createElement(Ge.default.Fragment,null,e):null};var nr=require("react");var or=()=>{let{useLocation:e}=Q(),{checkAuth:t}=(0,nr.useContext)(W),r=e();return(0,nr.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var ze=h(require("react"));var Za=({resource:e,action:t,params:r,fallback:o,children:a,...n})=>{let{data:s}=Ar({resource:e,action:t,params:r});return s!=null&&s.can?ze.default.isValidElement(a)?ze.default.cloneElement(a,n):ze.default.createElement(ze.default.Fragment,null,a):(s==null?void 0:s.can)===!1?ze.default.createElement(ze.default.Fragment,null,o!=null?o:null):null};var we=h(require("react"));var Ja=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var Xa=()=>((0,we.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Ja.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),we.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},we.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},we.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},we.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),we.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));
//# sourceMappingURL=index.js.map