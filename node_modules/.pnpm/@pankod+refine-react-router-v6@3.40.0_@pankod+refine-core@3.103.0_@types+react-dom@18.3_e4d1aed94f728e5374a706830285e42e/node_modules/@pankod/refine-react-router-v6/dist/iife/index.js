(()=>{var ua=Object.create;var gt=Object.defineProperty;var la=Object.getOwnPropertyDescriptor;var sa=Object.getOwnPropertyNames;var da=Object.getPrototypeOf,ca=Object.prototype.hasOwnProperty;var g=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var ma=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fa=(e,t)=>{for(var r in t)gt(e,r,{get:t[r],enumerable:!0})},pt=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of sa(t))!ca.call(e,o)&&o!==r&&gt(e,o,{get:()=>t[o],enumerable:!(a=la(t,o))||a.enumerable});return e},ge=(e,t,r)=>(pt(e,t,"default"),r&&pt(r,t,"default")),Ye=(e,t,r)=>(r=e!=null?ua(da(e)):{},pt(t||!e||!e.__esModule?gt(r,"default",{value:e,enumerable:!0}):r,e));var Bt=ma((ai,It)=>{var va=Object.create,at=Object.defineProperty,pa=Object.getOwnPropertyDescriptor,ga=Object.getOwnPropertyNames,ya=Object.getPrototypeOf,ha=Object.prototype.hasOwnProperty,Pa=(e,t)=>{for(var r in t)at(e,r,{get:t[r],enumerable:!0})},tt=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ga(t))!ha.call(e,o)&&o!==r&&at(e,o,{get:()=>t[o],enumerable:!(a=pa(t,o))||a.enumerable});return e},Ea=(e,t,r)=>(tt(e,t,"default"),r&&tt(r,t,"default")),S=(e,t,r)=>(r=e!=null?va(ya(e)):{},tt(t||!e||!e.__esModule?at(r,"default",{value:e,enumerable:!0}):r,e)),ba=e=>tt(at({},"__esModule",{value:!0}),e),xt={};Pa(xt,{AuthPage:()=>An,Authenticated:()=>Xn,CanAccess:()=>Yn,ErrorComponent:()=>kn,GitHubBanner:()=>Zn,LayoutWrapper:()=>_n,LoginPage:()=>Yr,ReadyPage:()=>Gr,Refine:()=>jn,RouteChangeHandler:()=>ea,UndoableQueue:()=>Zr,createTreeView:()=>Mr,file2Base64:()=>eo,getDefaultFilter:()=>Za,getDefaultSortOrder:()=>Ga,getNextPageParam:()=>$r,getPreviousPageParam:()=>Or,handleUseParams:()=>to,importCSVMapper:()=>Sr,parseTableParams:()=>kt,parseTableParamsFromQuery:()=>Ya,routeGenerator:()=>Ot,setInitialFilters:()=>qt,setInitialSorters:()=>Dt,stringifyTableParams:()=>wt,unionFilters:()=>He,unionSorters:()=>St,useApiUrl:()=>bo,useAuthenticated:()=>wr,useBreadcrumb:()=>Mn,useCan:()=>Jr,useCanWithoutCache:()=>vn,useCancelNotification:()=>Ue,useCheckError:()=>ie,useCreate:()=>At,useCreateMany:()=>Rr,useCustom:()=>wo,useCustomMutation:()=>qo,useDataProvider:()=>Y,useDelete:()=>po,useDeleteMany:()=>Eo,useExport:()=>Go,useForgotPassword:()=>br,useForm:()=>Zo,useGetIdentity:()=>hr,useGetLocale:()=>Ho,useHandleNotification:()=>ae,useImport:()=>on,useInfiniteList:()=>Mo,useInvalidate:()=>Ne,useIsExistAuthentication:()=>Va,useList:()=>Tt,useLiveMode:()=>Wr,useLog:()=>st,useLogList:()=>Sn,useLogin:()=>Mt,useLogout:()=>Pr,useMany:()=>Tr,useMenu:()=>Nn,useModal:()=>nn,useMutationMode:()=>Ie,useNavigation:()=>se,useNotification:()=>we,useOne:()=>Qt,usePermissions:()=>Da,usePublish:()=>Me,useRedirectionAfterSubmission:()=>Vr,useRefineContext:()=>it,useRegister:()=>Er,useResource:()=>X,useResourceSubscription:()=>Ve,useResourceWithRoute:()=>he,useRouterContext:()=>_,useSelect:()=>yn,useSetLocale:()=>Bo,useShow:()=>tn,useSubscription:()=>Oo,useSyncWithLocation:()=>Kr,useTable:()=>En,useTitle:()=>_o,useTranslate:()=>W,useUpdate:()=>Ar,useUpdateMany:()=>ho,useUpdatePassword:()=>Cr,useWarnAboutChange:()=>Ut,userFriendlyResourceName:()=>$t});It.exports=ba(xt);Ea(xt,g("@tanstack/react-query"),It.exports);var Le=S(g("react")),Ca=g("react"),yr=S(g("react")),wa=g("@tanstack/react-query"),re=yr.default.createContext({}),Sa=({children:e,isProvided:t,...r})=>{let{replace:a}=se(),o=(0,wa.useQueryClient)(),n=()=>{o.invalidateQueries(["useAuthenticated"]),o.invalidateQueries(["getUserIdentity"]),o.invalidateQueries(["usePermissions"])},i=async m=>{var p;try{let c=await((p=r.login)==null?void 0:p.call(r,m));return n(),Promise.resolve(c)}catch(c){return Promise.reject(c)}},v=async m=>{var p;try{let c=await((p=r.register)==null?void 0:p.call(r,m));return n(),Promise.resolve(c)}catch(c){return Promise.reject(c)}},f=async m=>{var p;try{let c=await((p=r.logout)==null?void 0:p.call(r,m));return n(),Promise.resolve(c)}catch(c){return Promise.reject(c)}},d=async m=>{var p;try{return await((p=r.checkAuth)==null?void 0:p.call(r,m)),Promise.resolve()}catch(c){return c!=null&&c.redirectPath&&a(c.redirectPath),Promise.reject(c)}};return yr.default.createElement(re.Provider,{value:{...r,login:i,logout:f,checkAuth:d,register:v,isProvided:t}},e)},qa=g("@tanstack/react-query"),Da=e=>{let{getPermissions:t}=(0,Ca.useContext)(re);return(0,qa.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})},La=S(g("react")),xa=g("@tanstack/react-query"),hr=({queryOptions:e}={})=>{let{getUserIdentity:t}=La.default.useContext(re);return(0,xa.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})},Ma=S(g("react")),Na=g("@tanstack/react-query"),Pr=({mutationOptions:e}={})=>{let{push:t}=se(),{logout:r}=Ma.default.useContext(re),{open:a}=we();return(0,Na.useMutation)(["useLogout"],r,{onSuccess:(o,n)=>{var i;let v=(i=n==null?void 0:n.redirectPath)!=null?i:o;if(v!==!1){if(v){t(v);return}t("/login")}},onError:o=>{a==null||a({key:"useLogout-error",type:"error",message:(o==null?void 0:o.name)||"Logout Error",description:(o==null?void 0:o.message)||"Something went wrong during logout"})},...e})},ka=S(g("react")),$a=g("@tanstack/react-query"),Oa=S(g("qs")),Mt=({mutationOptions:e}={})=>{let{replace:t}=se(),{login:r}=ka.default.useContext(re),{useLocation:a}=_(),{search:o}=a(),{close:n,open:i}=we(),{to:v}=Oa.default.parse(o,{ignoreQueryPrefix:!0});return(0,$a.useMutation)(["useLogin"],r,{onSuccess:f=>{if(v)return t(v);f!==!1&&t(typeof f=="string"?f:"/"),n==null||n("login-error")},onError:f=>{i==null||i({message:(f==null?void 0:f.name)||"Login Error",description:(f==null?void 0:f.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})},Ta=S(g("react")),Qa=g("@tanstack/react-query"),Er=({mutationOptions:e}={})=>{let{replace:t}=se(),{register:r}=Ta.default.useContext(re),{close:a,open:o}=we();return(0,Qa.useMutation)(["useRegister"],r,{onSuccess:n=>{n!==!1&&t(n||"/"),a==null||a("register-error")},onError:n=>{o==null||o({message:(n==null?void 0:n.name)||"Register Error",description:(n==null?void 0:n.message)||"Error while registering",key:"register-error",type:"error"})},...e})},Aa=S(g("react")),Ra=g("@tanstack/react-query"),br=({mutationOptions:e}={})=>{let{replace:t}=se(),{forgotPassword:r}=Aa.default.useContext(re),{close:a,open:o}=we();return(0,Ra.useMutation)(["useForgotPassword"],r,{onSuccess:n=>{n!==!1&&n&&t(n),a==null||a("forgot-password-error")},onError:n=>{o==null||o({message:(n==null?void 0:n.name)||"Forgot Password Error",description:(n==null?void 0:n.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})},Fa=S(g("react")),Ua=g("@tanstack/react-query"),Wa=S(g("qs")),Cr=({mutationOptions:e}={})=>{let{replace:t}=se(),{updatePassword:r}=Fa.default.useContext(re),{close:a,open:o}=we(),{useLocation:n}=_(),{search:i}=n(),v=Wa.default.parse(i,{ignoreQueryPrefix:!0});return(0,Ua.useMutation)(["useUpdatePassword"],async f=>r==null?void 0:r({...v,...f}),{onSuccess:f=>{f!==!1&&f&&t(f),a==null||a("update-password-error")},onError:f=>{o==null||o({message:(f==null?void 0:f.name)||"Update Password Error",description:(f==null?void 0:f.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})},Ia=g("react"),Ba=g("@tanstack/react-query"),wr=e=>{let{checkAuth:t}=(0,Ia.useContext)(re);return(0,Ba.useQuery)(["useAuthenticated",e],async()=>{var r;return(r=await(t==null?void 0:t(e)))!=null?r:{}},{retry:!1})},Ha=S(g("react")),za=g("@tanstack/react-query"),ie=()=>{let{checkError:e}=Ha.default.useContext(re),{mutate:t}=Pr();return(0,za.useMutation)(["useCheckError"],e,{onError:r=>{t({redirectPath:r})}})},Ka=g("react"),Va=()=>{let{isProvided:e}=(0,Ka.useContext)(re);return e||!1},ja=g("@tanstack/react-query"),yt=e=>e/1e3,_a=S(g("lodash/zip")),Ja=S(g("lodash/fromPairs")),Sr=(e,t=r=>r)=>{let[r,...a]=e;return a.map(o=>(0,Ja.default)((0,_a.default)(r,o))).map((o,n,i)=>t.call(void 0,o,n,i))},Kt=S(g("pluralize")),Nt=S(g("qs")),qr=S(g("lodash/unionWith")),Dr=S(g("lodash/differenceWith")),Xa=S(g("warn-once")),kt=e=>{let{current:t,pageSize:r,sorter:a,filters:o}=Nt.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:a!=null?a:[],parsedFilters:o!=null?o:[]}},Ya=e=>{let t=Nt.default.stringify(e);return kt(`/${t}`)},wt=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,filters:o,...n}=e;return Nt.default.stringify({...n,...r||{},sorter:a,filters:o},t)},Lr=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,xr=(e,t)=>e.field==t.field,He=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,Xa.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,qr.default)(e,t,r,Lr).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),St=(e,t)=>(0,qr.default)(e,t,xr).filter(r=>r.order!==void 0&&r.order!==null),qt=(e,t)=>[...(0,Dr.default)(t,e,Lr),...e],Dt=(e,t)=>[...(0,Dr.default)(t,e,xr),...e],Ga=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},Za=(e,t,r="eq")=>{let a=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:n,field:i}=o;return i===e&&n===r}});if(a)return a.value||[]},eo=e=>new Promise((t,r)=>{let a=new FileReader,o=()=>{a.result&&(a.removeEventListener("load",o,!1),t(a.result))};a.addEventListener("load",o,!1),a.readAsDataURL(e.originFileObj),a.onerror=n=>(a.removeEventListener("load",o,!1),r(n))}),$t=(e="",t)=>{let r=ze(e);return t==="singular"?Kt.default.singular(r):Kt.default.plural(r)},to=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,ue=(e,t,r)=>{let a=t||"default",o={all:[a],resourceAll:[a,e||""],list:n=>[...o.resourceAll,"list",{...n,...r}],many:n=>[...o.resourceAll,"getMany",n&&n.map(String),{...r}].filter(i=>i!==void 0),detail:n=>[...o.resourceAll,"detail",n==null?void 0:n.toString(),{...r}],logList:n=>["logList",e,n,r].filter(i=>i!==void 0)};return o},ro=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),ao=e=>t=>e.parentName?t.name===e.parentName:!1,Ot=(e,t)=>{var r,a,o,n,i;let v,f=(a=(r=e.options)==null?void 0:r.route)!=null?a:e.name;if(e.parentName){let d=t.find(ao(e));d!=null&&d.parentName?v=`${Ot(d,t)}/${f}`:e.parentName&&(v=`${(i=(n=(o=d==null?void 0:d.options)==null?void 0:o.route)!=null?n:d==null?void 0:d.name)!=null?i:e.parentName}/${f}`)}else v=f;return v},Mr=e=>{var t,r,a;let o=[],n={},i={},v,f;for(let d=0;d<e.length;d++){v=e[d];let m=(a=(r=v.route)!=null?r:(t=v.options)==null?void 0:t.route)!=null?a:"";n[m]=v,n[m].children=[],i[v.name]=v,i[v.name].children=[]}for(let d in n)n.hasOwnProperty(d)&&(f=n[d],f.parentName&&i[f.parentName]?i[f.parentName].children.push(f):o.push(f));return o},ze=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Nr=S(g("react")),oo=S(g("react")),kr=({children:e})=>oo.default.createElement("div",null,e),ye={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Ce=Nr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:kr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:ye}),no=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:o,children:n,DashboardPage:i,Title:v,Layout:f=kr,Header:d,Sider:m,Footer:p,OffLayoutArea:c,LoginPage:s=Yr,catchAll:l,liveMode:u="off",onLiveEvent:y,options:P})=>Nr.default.createElement(Ce.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:v,undoableTimeout:o,Layout:f,Header:d,Sider:m,Footer:p,OffLayoutArea:c,DashboardPage:i,LoginPage:s,catchAll:l,liveMode:u,onLiveEvent:y,options:P}},n),io=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:o,reactQueryDevtoolConfig:n,syncWithLocation:i,undoableTimeout:v,warnWhenUnsavedChanges:f}={})=>{var d,m,p,c,s,l,u,y,P,h,b,E,C,q,w,D,M,x,k,A,B,$,Q,N;let G={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(m=(d=e==null?void 0:e.mutationMode)!=null?d:a)!=null?m:ye.mutationMode,undoableTimeout:(c=(p=e==null?void 0:e.undoableTimeout)!=null?p:v)!=null?c:ye.undoableTimeout,syncWithLocation:(l=(s=e==null?void 0:e.syncWithLocation)!=null?s:i)!=null?l:ye.syncWithLocation,warnWhenUnsavedChanges:(y=(u=e==null?void 0:e.warnWhenUnsavedChanges)!=null?u:f)!=null?y:ye.warnWhenUnsavedChanges,liveMode:(h=(P=e==null?void 0:e.liveMode)!=null?P:r)!=null?h:ye.liveMode,redirect:{afterCreate:(E=(b=e==null?void 0:e.redirect)==null?void 0:b.afterCreate)!=null?E:ye.redirect.afterCreate,afterClone:(q=(C=e==null?void 0:e.redirect)==null?void 0:C.afterClone)!=null?q:ye.redirect.afterClone,afterEdit:(D=(w=e==null?void 0:e.redirect)==null?void 0:w.afterEdit)!=null?D:ye.redirect.afterEdit}},oe=(x=(M=e==null?void 0:e.disableTelemetry)!=null?M:t)!=null?x:!1,le={clientConfig:(B=(A=(k=e==null?void 0:e.reactQuery)==null?void 0:k.clientConfig)!=null?A:o)!=null?B:{},devtoolConfig:(N=(Q=($=e==null?void 0:e.reactQuery)==null?void 0:$.devtoolConfig)!=null?Q:n)!=null?N:{}};return{optionsWithDefaults:G,disableTelemetryWithDefault:oe,reactQueryWithDefaults:le}},uo=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}},Vt=async(e,t,r)=>{let a=[];for(let[o,n]of e.entries())try{let i=await n();a.push(t(i,o))}catch(i){a.push(r(i,o))}return a},T=(e,t,r)=>{var a;if(t)return t;let o=r==null?void 0:r.find(n=>n.name===e);return(a=o==null?void 0:o.options)!=null&&a.dataProviderName?o.options.dataProviderName:"default"},ot=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),$r=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,o=(t==null?void 0:t.pageSize)||10,n=Math.ceil((e.total||0)/o);return a<n?Number(a)+1:void 0},Or=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},Tt=({resource:e,config:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:v,liveParams:f,dataProviderName:d})=>{let{resources:m}=X(),p=Y(),c=ue(e,T(e,d,m),n),{getList:s}=p(T(e,d,m)),l=W(),{mutate:u}=ie(),y=ae(),P=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ve({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...f},channel:`resources/${e}`,enabled:P,liveMode:i,onLiveEvent:v}),(0,ja.useQuery)(c.list(t),({queryKey:h,pageParam:b,signal:E})=>{let{hasPagination:C,...q}=t||{};return s({resource:e,...q,hasPagination:C,metaData:{...n,queryContext:{queryKey:h,pageParam:b,signal:E}}})},{...r,onSuccess:h=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,h);let E=typeof a=="function"?a(h,{metaData:n,config:t},e):a;y(E)},onError:h=>{var b;u(h),(b=r==null?void 0:r.onError)==null||b.call(r,h);let E=typeof o=="function"?o(h,{metaData:n,config:t},e):o;y(E,{key:`${e}-useList-notification`,message:l("notifications.error",{statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}})},lo=g("@tanstack/react-query"),Qt=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:v,liveParams:f,dataProviderName:d})=>{let{resources:m}=X(),p=Y(),c=ue(e,T(e,d,m),n),{getOne:s}=p(T(e,d,m)),l=W(),{mutate:u}=ie(),y=ae();return Ve({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:n,subscriptionType:"useOne",...f},enabled:r==null?void 0:r.enabled,liveMode:i,onLiveEvent:v}),(0,lo.useQuery)(c.detail(t),({queryKey:P,pageParam:h,signal:b})=>s({resource:e,id:t,metaData:{...n,queryContext:{queryKey:P,pageParam:h,signal:b}}}),{...r,onSuccess:P=>{var h;(h=r==null?void 0:r.onSuccess)==null||h.call(r,P);let b=typeof a=="function"?a(P,{id:t,metaData:n},e):a;y(b)},onError:P=>{var h;u(P),(h=r==null?void 0:r.onError)==null||h.call(r,P);let b=typeof o=="function"?o(P,{id:t,metaData:n},e):o;y(b,{key:`${t}-${e}-getOne-notification`,message:l("notifications.error",{statusCode:P.statusCode},`Error (status code: ${P.statusCode})`),description:P.message,type:"error"})}})},so=g("@tanstack/react-query"),Tr=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:v,liveParams:f,dataProviderName:d})=>{let{resources:m}=X(),p=Y(),c=ue(e,T(e,d,m),n),{getMany:s,getOne:l}=p(T(e,d,m)),u=W(),{mutate:y}=ie(),P=ae(),h=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ve({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:n,subscriptionType:"useMany",...f},channel:`resources/${e}`,enabled:h,liveMode:i,onLiveEvent:v}),(0,so.useQuery)(c.many(t),({queryKey:b,pageParam:E,signal:C})=>s?s({resource:e,ids:t,metaData:{...n,queryContext:{queryKey:b,pageParam:E,signal:C}}}):ot(t.map(q=>l({resource:e,id:q,metaData:{...n,queryContext:{queryKey:b,pageParam:E,signal:C}}}))),{...r,onSuccess:b=>{var E;(E=r==null?void 0:r.onSuccess)==null||E.call(r,b);let C=typeof a=="function"?a(b,t,e):a;P(C)},onError:b=>{var E;y(b),(E=r==null?void 0:r.onError)==null||E.call(r,b);let C=typeof o=="function"?o(b,t,e):o;P(C,{key:`${t[0]}-${e}-getMany-notification`,message:u("notifications.error",{statusCode:b.statusCode},`Error (status code: ${b.statusCode})`),description:b.message,type:"error"})}})},jt=g("@tanstack/react-query"),et=S(g("react")),ht=S(g("lodash/isEqual")),Qr=et.default.createContext({notifications:[],notificationDispatch:()=>!1}),co=[],mo=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,ht.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,ht.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,ht.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},fo=({children:e})=>{let[t,r]=(0,et.useReducer)(mo,co),a={notifications:t,notificationDispatch:r};return et.default.createElement(Qr.Provider,{value:a},e,typeof window<"u"&&t.map(o=>et.default.createElement(Zr,{key:`${o.id}-${o.resource}-queue`,notification:o})))},_t=S(g("pluralize")),Ar=({mutationOptions:e}={})=>{let{resources:t}=X(),r=(0,jt.useQueryClient)(),a=Y(),{mutationMode:o,undoableTimeout:n}=Ie(),i=W(),{mutate:v}=ie(),f=Me(),{log:d}=st(),{notificationDispatch:m}=Ue(),p=ae(),c=Ne();return(0,jt.useMutation)(({id:s,values:l,resource:u,mutationMode:y,undoableTimeout:P,onCancel:h,metaData:b,dataProviderName:E})=>{let C=y!=null?y:o,q=P!=null?P:n;return C!=="undoable"?a(T(u,E,t)).update({resource:u,id:s,variables:l,metaData:b}):new Promise((w,D)=>{let M=()=>{a(T(u,E,t)).update({resource:u,id:s,variables:l,metaData:b}).then(k=>w(k)).catch(k=>D(k))},x=()=>{D({message:"mutationCancelled"})};h&&h(x),m({type:"ADD",payload:{id:s,resource:u,cancelMutation:x,doMutation:M,seconds:q,isSilent:!!h}})})},{onMutate:async({resource:s,id:l,mutationMode:u,values:y,dataProviderName:P})=>{let h=ue(s,T(s,P,t)),b=r.getQueriesData(h.resourceAll),E=u!=null?u:o;return await r.cancelQueries(h.resourceAll,void 0,{silent:!0}),E!=="pessimistic"&&(r.setQueriesData(h.list(),C=>{if(!C)return null;let q=C.data.map(w=>{var D;return((D=w.id)==null?void 0:D.toString())===(l==null?void 0:l.toString())?{id:l,...w,...y}:w});return{...C,data:q}}),r.setQueriesData(h.many(),C=>{if(!C)return null;let q=C.data.map(w=>{var D;return((D=w.id)==null?void 0:D.toString())===(l==null?void 0:l.toString())&&(w={id:l,...w,...y}),w});return{...C,data:q}}),r.setQueriesData(h.detail(l),C=>C?{...C,data:{...C.data,...y}}:null)),{previousQueries:b,queryKey:h}},onSettled:(s,l,{id:u,resource:y,dataProviderName:P,invalidates:h=["list","many","detail"]})=>{c({resource:y,dataProviderName:T(y,P,t),invalidates:h,id:u}),m({type:"REMOVE",payload:{id:u,resource:y}})},onSuccess:(s,{id:l,resource:u,successNotification:y,dataProviderName:P,values:h,metaData:b},E)=>{var C;let q=_t.default.singular(u),w=typeof y=="function"?y(s,{id:l,values:h},u):y;p(w,{key:`${l}-${u}-notification`,description:i("notifications.success","Successful"),message:i("notifications.editSuccess",{resource:i(`${u}.${u}`,q)},`Successfully updated ${q}`),type:"success"}),f==null||f({channel:`resources/${u}`,type:"updated",payload:{ids:(C=s.data)!=null&&C.id?[s.data.id]:void 0},date:new Date});let D;if(E){let B=r.getQueryData(E.queryKey.detail(l));D=Object.keys(h).reduce(($,Q)=>{var N;return $[Q]=(N=B==null?void 0:B.data)==null?void 0:N[Q],$},{})}let{fields:M,operation:x,variables:k,...A}=b||{};d==null||d.mutate({action:"update",resource:u,data:h,previousData:D,meta:{id:l,dataProviderName:T(u,P,t),...A}})},onError:(s,{id:l,resource:u,errorNotification:y,values:P},h)=>{if(h)for(let b of h.previousQueries)r.setQueryData(b[0],b[1]);if(s.message!=="mutationCancelled"){v==null||v(s);let b=_t.default.singular(u),E=typeof y=="function"?y(s,{id:l,values:P},u):y;p(E,{key:`${l}-${u}-notification`,message:i("notifications.editError",{resource:i(`${u}.${u}`,b),statusCode:s.statusCode},`Error when updating ${b} (status code: ${s.statusCode})`),description:s.message,type:"error"})}},...e})},vo=g("@tanstack/react-query"),Jt=S(g("pluralize")),At=({mutationOptions:e}={})=>{let{mutate:t}=ie(),r=Y(),a=Ne(),{resources:o}=X(),n=W(),i=Me(),{log:v}=st(),f=ae();return(0,vo.useMutation)(({resource:d,values:m,metaData:p,dataProviderName:c})=>r(T(d,c,o)).create({resource:d,variables:m,metaData:p}),{onSuccess:(d,{resource:m,successNotification:p,dataProviderName:c,invalidates:s=["list","many"],values:l,metaData:u})=>{var y,P,h;let b=Jt.default.singular(m),E=typeof p=="function"?p(d,l,m):p;f(E,{key:`create-${m}-notification`,message:n("notifications.createSuccess",{resource:n(`${m}.${m}`,b)},`Successfully created ${b}`),description:n("notifications.success","Success"),type:"success"}),a({resource:m,dataProviderName:T(m,c,o),invalidates:s}),i==null||i({channel:`resources/${m}`,type:"created",payload:{ids:(y=d==null?void 0:d.data)!=null&&y.id?[d.data.id]:void 0},date:new Date});let{fields:C,operation:q,variables:w,...D}=u||{};v==null||v.mutate({action:"create",resource:m,data:l,meta:{dataProviderName:T(m,c,o),id:(h=(P=d==null?void 0:d.data)==null?void 0:P.id)!=null?h:void 0,...D}})},onError:(d,{resource:m,errorNotification:p,values:c})=>{t(d);let s=Jt.default.singular(m),l=typeof p=="function"?p(d,c,m):p;f(l,{key:`create-${m}-notification`,description:d.message,message:n("notifications.createError",{resource:n(`${m}.${m}`,s),statusCode:d.statusCode},`There was an error creating ${s} (status code: ${d.statusCode})`),type:"error"})},...e})},Xt=g("@tanstack/react-query"),Yt=S(g("pluralize")),po=({mutationOptions:e}={})=>{let{mutate:t}=ie(),r=Y(),{resources:a}=X(),o=(0,Xt.useQueryClient)(),{mutationMode:n,undoableTimeout:i}=Ie(),{notificationDispatch:v}=Ue(),f=W(),d=Me(),{log:m}=st(),p=ae(),c=Ne();return(0,Xt.useMutation)(({id:s,mutationMode:l,undoableTimeout:u,resource:y,onCancel:P,metaData:h,dataProviderName:b,values:E})=>{let C=l!=null?l:n,q=u!=null?u:i;return C!=="undoable"?r(T(y,b,a)).deleteOne({resource:y,id:s,metaData:h,variables:E}):new Promise((w,D)=>{let M=()=>{r(T(y,b,a)).deleteOne({resource:y,id:s,metaData:h,variables:E}).then(k=>w(k)).catch(k=>D(k))},x=()=>{D({message:"mutationCancelled"})};P&&P(x),v({type:"ADD",payload:{id:s,resource:y,cancelMutation:x,doMutation:M,seconds:q,isSilent:!!P}})})},{onMutate:async({id:s,resource:l,mutationMode:u,dataProviderName:y})=>{let P=ue(l,T(l,y,a)),h=u!=null?u:n;await o.cancelQueries(P.resourceAll,void 0,{silent:!0});let b=o.getQueriesData(P.resourceAll);return h!=="pessimistic"&&(o.setQueriesData(P.list(),E=>E?{data:E.data.filter(C=>{var q;return((q=C.id)==null?void 0:q.toString())!==s.toString()}),total:E.total-1}:null),o.setQueriesData(P.many(),E=>{if(!E)return null;let C=E.data.filter(q=>{var w;return((w=q.id)==null?void 0:w.toString())!==(s==null?void 0:s.toString())});return{...E,data:C}})),{previousQueries:b,queryKey:P}},onSettled:(s,l,{id:u,resource:y,dataProviderName:P,invalidates:h=["list","many"]})=>{c({resource:y,dataProviderName:T(y,P,a),invalidates:h}),v({type:"REMOVE",payload:{id:u,resource:y}})},onSuccess:(s,{id:l,resource:u,successNotification:y,dataProviderName:P,metaData:h},b)=>{let E=Yt.default.singular(u!=null?u:"");o.removeQueries(b==null?void 0:b.queryKey.detail(l));let C=typeof y=="function"?y(s,l,u):y;p(C,{key:`${l}-${u}-notification`,description:f("notifications.success","Success"),message:f("notifications.deleteSuccess",{resource:f(`${u}.${u}`,E)},`Successfully deleted a ${E}`),type:"success"}),d==null||d({channel:`resources/${u}`,type:"deleted",payload:{ids:l?[l]:[]},date:new Date});let{fields:q,operation:w,variables:D,...M}=h||{};m==null||m.mutate({action:"delete",resource:u,meta:{id:l,dataProviderName:T(u,P,a),...M}}),o.removeQueries(b==null?void 0:b.queryKey.detail(l))},onError:(s,{id:l,resource:u,errorNotification:y},P)=>{if(P)for(let h of P.previousQueries)o.setQueryData(h[0],h[1]);if(s.message!=="mutationCancelled"){t(s);let h=Yt.default.singular(u!=null?u:""),b=typeof y=="function"?y(s,l,u):y;p(b,{key:`${l}-${u}-notification`,message:f("notifications.deleteError",{resource:h,statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})}},...e})},go=g("@tanstack/react-query"),yo=S(g("pluralize")),Rr=({mutationOptions:e}={})=>{let t=Y(),{resources:r}=X(),a=W(),o=Me(),n=ae(),i=Ne();return(0,go.useMutation)(({resource:v,values:f,metaData:d,dataProviderName:m})=>{let p=t(T(v,m,r));return p.createMany?p.createMany({resource:v,variables:f,metaData:d}):ot(f.map(c=>p.create({resource:v,variables:c,metaData:d})))},{onSuccess:(v,{resource:f,successNotification:d,dataProviderName:m,invalidates:p=["list","many"],values:c})=>{let s=yo.default.plural(f),l=typeof d=="function"?d(v,c,f):d;n(l,{key:`createMany-${f}-notification`,message:a("notifications.createSuccess",{resource:a(`${f}.${f}`,f)},`Successfully created ${s}`),description:a("notifications.success","Success"),type:"success"}),i({resource:f,dataProviderName:T(f,m,r),invalidates:p});let u=v==null?void 0:v.data.filter(y=>(y==null?void 0:y.id)!==void 0).map(y=>y.id);o==null||o({channel:`resources/${f}`,type:"created",payload:{ids:u},date:new Date})},onError:(v,{resource:f,errorNotification:d,values:m})=>{let p=typeof d=="function"?d(v,m,f):d;n(p,{key:`createMany-${f}-notification`,description:v.message,message:a("notifications.createError",{resource:a(`${f}.${f}`,f),statusCode:v.statusCode},`There was an error creating ${f} (status code: ${v.statusCode}`),type:"error"})},...e})},Gt=g("@tanstack/react-query"),Zt=S(g("pluralize")),ho=({mutationOptions:e}={})=>{let{resources:t}=X(),r=(0,Gt.useQueryClient)(),a=Y(),o=W(),{mutationMode:n,undoableTimeout:i}=Ie(),{mutate:v}=ie(),{notificationDispatch:f}=Ue(),d=Me(),m=ae(),p=Ne();return(0,Gt.useMutation)(({ids:c,values:s,resource:l,onCancel:u,mutationMode:y,undoableTimeout:P,metaData:h,dataProviderName:b})=>{let E=y!=null?y:n,C=P!=null?P:i,q=a(T(l,b,t)),w=()=>q.updateMany?q.updateMany({resource:l,ids:c,variables:s,metaData:h}):ot(c.map(D=>q.update({resource:l,id:D,variables:s,metaData:h})));return E!=="undoable"?w():new Promise((D,M)=>{let x=()=>{w().then(A=>D(A)).catch(A=>M(A))},k=()=>{M({message:"mutationCancelled"})};u&&u(k),f({type:"ADD",payload:{id:c,resource:l,cancelMutation:k,doMutation:x,seconds:C,isSilent:!!u}})})},{onMutate:async({resource:c,ids:s,values:l,mutationMode:u,dataProviderName:y,metaData:P})=>{let h=ue(c,T(c,y,t),P),b=u!=null?u:n;await r.cancelQueries(h.resourceAll,void 0,{silent:!0});let E=r.getQueriesData(h.resourceAll);if(b!=="pessimistic"){r.setQueriesData(h.list(),C=>{if(!C)return null;let q=C.data.map(w=>w.id!==void 0&&s.filter(D=>D!==void 0).map(String).includes(w.id.toString())?{...w,...l}:w);return{...C,data:q}}),r.setQueriesData(h.many(),C=>{if(!C)return null;let q=C.data.map(w=>w.id!==void 0&&s.filter(D=>D!==void 0).map(String).includes(w.id.toString())?{...w,...l}:w);return{...C,data:q}});for(let C of s)r.setQueriesData(h.detail(C),q=>{if(!q)return null;let w={...q.data,...l};return{...q,data:w}})}return{previousQueries:E,queryKey:h}},onSettled:(c,s,{ids:l,resource:u,dataProviderName:y})=>{p({resource:u,invalidates:["list","many"],dataProviderName:T(u,y,t)}),l.forEach(P=>p({resource:u,invalidates:["detail"],dataProviderName:T(u,y,t),id:P})),f({type:"REMOVE",payload:{id:l,resource:u}})},onSuccess:(c,{ids:s,resource:l,successNotification:u,values:y})=>{let P=Zt.default.singular(l),h=typeof u=="function"?u(c,{ids:s,values:y},l):u;m(h,{key:`${s}-${l}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${l}.${l}`,l)},`Successfully updated ${P}`),type:"success"}),d==null||d({channel:`resources/${l}`,type:"updated",payload:{ids:s.map(String)},date:new Date})},onError:(c,{ids:s,resource:l,errorNotification:u,values:y},P)=>{if(P)for(let h of P.previousQueries)r.setQueryData(h[0],h[1]);if(c.message!=="mutationCancelled"){v==null||v(c);let h=Zt.default.singular(l),b=typeof u=="function"?u(c,{ids:s,values:y},l):u;m(b,{key:`${s}-${l}-updateMany-error-notification`,message:o("notifications.editError",{resource:h,statusCode:c.statusCode},`Error when updating ${h} (status code: ${c.statusCode})`),description:c.message,type:"error"})}},...e})},er=g("@tanstack/react-query"),Po=S(g("pluralize")),Eo=({mutationOptions:e}={})=>{let{mutate:t}=ie(),{mutationMode:r,undoableTimeout:a}=Ie(),o=Y(),{notificationDispatch:n}=Ue(),i=W(),v=Me(),f=ae(),d=Ne(),{resources:m}=X(),p=(0,er.useQueryClient)();return(0,er.useMutation)(({resource:c,ids:s,mutationMode:l,undoableTimeout:u,onCancel:y,metaData:P,dataProviderName:h,values:b})=>{let E=l!=null?l:r,C=u!=null?u:a,q=o(T(c,h,m)),w=()=>q.deleteMany?q.deleteMany({resource:c,ids:s,metaData:P,variables:b}):ot(s.map(D=>q.deleteOne({resource:c,id:D,metaData:P,variables:b})));return E!=="undoable"?w():new Promise((D,M)=>{let x=()=>{w().then(A=>D(A)).catch(A=>M(A))},k=()=>{M({message:"mutationCancelled"})};y&&y(k),n({type:"ADD",payload:{id:s,resource:c,cancelMutation:k,doMutation:x,seconds:C,isSilent:!!y}})})},{onMutate:async({ids:c,resource:s,mutationMode:l,dataProviderName:u})=>{let y=ue(s,T(s,u,m)),P=l!=null?l:r;await p.cancelQueries(y.resourceAll,void 0,{silent:!0});let h=p.getQueriesData(y.resourceAll);if(P!=="pessimistic"){p.setQueriesData(y.list(),b=>b?{data:b.data.filter(E=>E.id&&!c.map(String).includes(E.id.toString())),total:b.total-1}:null),p.setQueriesData(y.many(),b=>{if(!b)return null;let E=b.data.filter(C=>C.id?!c.map(String).includes(C.id.toString()):!1);return{...b,data:E}});for(let b of c)p.setQueriesData(y.detail(b),E=>!E||E.data.id==b?null:{...E})}return{previousQueries:h,queryKey:y}},onSettled:(c,s,{resource:l,ids:u,dataProviderName:y,invalidates:P=["list","many"]})=>{d({resource:l,dataProviderName:T(l,y,m),invalidates:P}),n({type:"REMOVE",payload:{id:u,resource:l}})},onSuccess:(c,{ids:s,resource:l,successNotification:u},y)=>{s.forEach(h=>p.removeQueries(y==null?void 0:y.queryKey.detail(h)));let P=typeof u=="function"?u(c,s,l):u;f(P,{key:`${s}-${l}-notification`,description:i("notifications.success","Success"),message:i("notifications.deleteSuccess",{resource:i(`${l}.${l}`,l)},`Successfully deleted ${l}`),type:"success"}),v==null||v({channel:`resources/${l}`,type:"deleted",payload:{ids:s},date:new Date}),s.forEach(h=>p.removeQueries(y==null?void 0:y.queryKey.detail(h)))},onError:(c,{ids:s,resource:l,errorNotification:u},y)=>{if(y)for(let P of y.previousQueries)p.setQueryData(P[0],P[1]);if(c.message!=="mutationCancelled"){t(c);let P=Po.default.singular(l),h=typeof u=="function"?u(c,s,l):u;f(h,{key:`${s}-${l}-notification`,message:i("notifications.deleteError",{resource:P,statusCode:c.statusCode},`Error (status code: ${c.statusCode})`),description:c.message,type:"error"})}},...e})},bo=e=>{let t=Y(),{getApiUrl:r}=t(e);return r()},Co=g("@tanstack/react-query"),wo=({url:e,method:t,config:r,queryOptions:a,successNotification:o,errorNotification:n,metaData:i,dataProviderName:v})=>{let f=Y(),{custom:d}=f(v),{mutate:m}=ie(),p=W(),c=ae();if(d)return(0,Co.useQuery)([v,"custom",t,e,{...r,...i}],({queryKey:s,pageParam:l,signal:u})=>d({url:e,method:t,...r,metaData:{...i,queryContext:{queryKey:s,pageParam:l,signal:u}}}),{...a,onSuccess:s=>{var l;(l=a==null?void 0:a.onSuccess)==null||l.call(a,s);let u=typeof o=="function"?o(s,{...r,...i}):o;c(u)},onError:s=>{var l;m(s),(l=a==null?void 0:a.onError)==null||l.call(a,s);let u=typeof n=="function"?n(s,{...r,...i}):n;c(u,{key:`${t}-notification`,message:p("notifications.error",{statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},So=g("@tanstack/react-query"),qo=({mutationOptions:e}={})=>{let{mutate:t}=ie(),r=ae(),a=Y(),o=W();return(0,So.useMutation)(({url:n,method:i,values:v,metaData:f,dataProviderName:d,config:m})=>{let{custom:p}=a(d);if(p)return p({url:n,method:i,payload:v,metaData:f,headers:{...m==null?void 0:m.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(n,{successNotification:i,config:v,metaData:f})=>{let d=typeof i=="function"?i(n,{...v,...f}):i;r(d)},onError:(n,{errorNotification:i,method:v,config:f,metaData:d})=>{t(n);let m=typeof i=="function"?i(n,{...f,...d}):i;r(m,{key:`${v}-notification`,message:o("notifications.error",{statusCode:n.statusCode},`Error (status code: ${n.statusCode})`),description:n.message,type:"error"})},...e})},tr=g("react"),Fr=S(g("react")),Do=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Rt=Fr.default.createContext(Do()),Lo=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Fr.default.createElement(Rt.Provider,{value:r},e)},Y=()=>{let e=(0,tr.useContext)(Rt);return(0,tr.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},xo=g("@tanstack/react-query"),Mo=({resource:e,config:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:v,liveParams:f,dataProviderName:d})=>{let{resources:m}=X(),p=Y(),c=ue(e,T(e,d,m),n),{getList:s}=p(T(e,d,m)),l=W(),{mutate:u}=ie(),y=ae(),P=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ve({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...f},channel:`resources/${e}`,enabled:P,liveMode:i,onLiveEvent:v}),(0,xo.useInfiniteQuery)(c.list(t),({queryKey:h,pageParam:b,signal:E})=>{let{hasPagination:C,...q}=t||{},w={...t==null?void 0:t.pagination,current:b};return s({resource:e,...q,pagination:w,hasPagination:C,metaData:{...n,queryContext:{queryKey:h,pageParam:b,signal:E}}}).then(({data:D,total:M,...x})=>({data:D,total:M,pagination:w,...x}))},{getNextPageParam:h=>$r(h),getPreviousPageParam:h=>Or(h),...r,onSuccess:h=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,h);let E=typeof a=="function"?a(h,{metaData:n,config:t},e):a;y(E)},onError:h=>{var b;u(h),(b=r==null?void 0:r.onError)==null||b.call(r,h);let E=typeof o=="function"?o(h,{metaData:n,config:t},e):o;y(E,{key:`${e}-useInfiniteList-notification`,message:l("notifications.error",{statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}})},Pt=g("react"),No=g("@tanstack/react-query"),Ur=S(g("react")),Ke=Ur.default.createContext(void 0),ko=({liveProvider:e,children:t})=>Ur.default.createElement(Ke.Provider,{value:e},t),Ve=({resource:e,params:t,channel:r,types:a,enabled:o=!0,liveMode:n,onLiveEvent:i})=>{let v=(0,No.useQueryClient)(),f=ue(e),d=(0,Pt.useContext)(Ke),{liveMode:m,onLiveEvent:p}=(0,Pt.useContext)(Ce),c=n!=null?n:m;(0,Pt.useEffect)(()=>{let s;return c&&c!=="off"&&o&&(s=d==null?void 0:d.subscribe({channel:r,params:{resource:e,...t},types:a,callback:l=>{c==="auto"&&v.invalidateQueries(f.resourceAll),i==null||i(l),p==null||p(l)}})),()=>{s&&(d==null||d.unsubscribe(s))}},[o])},$o=g("react"),Wr=e=>{let{liveMode:t}=(0,$o.useContext)(Ce);return e!=null?e:t},rr=g("react"),Oo=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:o})=>{let n=(0,rr.useContext)(Ke);(0,rr.useEffect)(()=>{let i;return a&&(i=n==null?void 0:n.subscribe({channel:t,params:e,types:r,callback:o})),()=>{i&&(n==null||n.unsubscribe(i))}},[a])},To=g("react"),Me=()=>{let e=(0,To.useContext)(Ke);return e==null?void 0:e.publish},Qo=g("react"),Ir=S(g("react")),nt=Ir.default.createContext({resources:[]}),Ao=({resources:e,children:t})=>Ir.default.createElement(nt.Provider,{value:{resources:e}},t),X=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:a}=(0,Qo.useContext)(nt),o=he(),{useParams:n}=_(),i=n(),v=o(t!=null?t:i.resource),f=e!=null?e:v.name,d=r!=null?r:i.id;return{resources:a,resource:v,resourceName:f,id:d,action:i.action}},ar=g("react"),he=()=>{let{resources:e}=(0,ar.useContext)(nt);return(0,ar.useCallback)(t=>{let r=e.find(a=>a.route===t);if(!r){let a=e.find(o=>o.name===t);return a!=null?a:{name:t,route:t}}return r},[e])},Ro=g("react"),Ue=()=>{let{notifications:e,notificationDispatch:t}=(0,Ro.useContext)(Qr);return{notifications:e,notificationDispatch:t}},Fo=g("react"),Br=S(g("react")),Ft=(0,Br.createContext)({}),Uo=({open:e,close:t,children:r})=>Br.default.createElement(Ft.Provider,{value:{open:e,close:t}},r),we=()=>{let{open:e,close:t}=(0,Fo.useContext)(Ft);return{open:e,close:t}},Wo=g("react"),ae=()=>{let{open:e}=we();return(0,Wo.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},or=g("react"),Hr=S(g("react")),We=Hr.default.createContext({}),Io=({children:e,i18nProvider:t})=>Hr.default.createElement(We.Provider,{value:{i18nProvider:t}},e),Bo=()=>{let{i18nProvider:e}=(0,or.useContext)(We);return(0,or.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},nr=g("react"),W=()=>{let{i18nProvider:e}=(0,nr.useContext)(We);return(0,nr.useMemo)(()=>{function t(r,a,o){var n,i;return(i=(n=e==null?void 0:e.translate(r,a,o))!=null?n:o)!=null?i:typeof a=="string"&&typeof o>"u"?a:r}return t},[e])},ir=g("react"),Ho=()=>{let{i18nProvider:e}=(0,ir.useContext)(We);return(0,ir.useCallback)(()=>e==null?void 0:e.getLocale(),[])},zo=g("react"),Ie=()=>{let{mutationMode:e,undoableTimeout:t}=(0,zo.useContext)(Ce);return{mutationMode:e,undoableTimeout:t}},ur=g("react"),Lt=S(g("react")),zr=Lt.default.createContext({}),Ko=({children:e})=>{let[t,r]=(0,Lt.useState)(!1);return Lt.default.createElement(zr.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},Ut=()=>{let{warnWhenUnsavedChanges:e}=(0,ur.useContext)(Ce),{warnWhen:t,setWarnWhen:r}=(0,ur.useContext)(zr);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},Vo=g("react"),Kr=()=>{let{syncWithLocation:e}=(0,Vo.useContext)(Ce);return{syncWithLocation:e}},jo=g("react"),_o=()=>{let{Title:e}=(0,jo.useContext)(Ce);return e},Jo=g("react"),it=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:n,hasDashboard:i,mutationMode:v,syncWithLocation:f,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:p,LoginPage:c,catchAll:s,options:l}=(0,Jo.useContext)(Ce);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:n,hasDashboard:i,mutationMode:v,syncWithLocation:f,undoableTimeout:d,warnWhenUnsavedChanges:m,DashboardPage:p,LoginPage:c,catchAll:s,options:l}},Xo=g("react"),Yo=g("export-to-csv-fix-source-map"),Go=({resourceName:e,sorter:t,filters:r,maxItemCount:a,pageSize:o=20,mapData:n=m=>m,exportOptions:i,metaData:v,dataProviderName:f,onError:d}={})=>{let[m,p]=(0,Xo.useState)(!1),{resources:c}=X(),s=he(),l=Y(),{useParams:u}=_(),{resource:y}=u(),{name:P}=s(y);e&&(P=e);let h=`${$t(P,"plural")}-${new Date().toLocaleString()}`,{getList:b}=l(T(P,f,c));return{isLoading:m,triggerExport:async()=>{p(!0);let E=[],C=1,q=!0;for(;q;)try{let{data:w,total:D}=await b({resource:P,filters:r,sort:t,pagination:{current:C,pageSize:o},metaData:v});C++,E.push(...w),a&&E.length>=a&&(E=E.slice(0,a),q=!1),D===E.length&&(q=!1)}catch(w){p(!1),q=!1,d==null||d(w);return}new Yo.ExportToCsv({filename:h,useKeysAsHeaders:!0,...i}).generateCsv(E.map(n)),p(!1)}}},lr=S(g("react")),Zo=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:o,redirect:n,successNotification:i,errorNotification:v,metaData:f,mutationMode:d,liveMode:m,onLiveEvent:p,liveParams:c,undoableTimeout:s,dataProviderName:l,invalidates:u,queryOptions:y,createMutationOptions:P,updateMutationOptions:h}={})=>{var b;let{options:E}=it(),{useParams:C}=_(),{resource:q,action:w,id:D}=C(),M=!e||e===q?r!=null?r:D:r,[x,k]=lr.default.useState(M);lr.default.useEffect(()=>{M!==x&&k(r)},[r]);let A=e!=null?e:q,B=(b=t!=null?t:w==="show"?"create":w)!=null?b:"create",$=he()(A),{mutationMode:Q}=Ie(),N=d!=null?d:Q,G=B==="create",oe=B==="edit",le=B==="clone",K=uo({redirectFromProps:n,action:B,redirectOptions:E.redirect}),F=x!==void 0&&(oe||le),H=Qt({resource:$.name,id:x!=null?x:"",queryOptions:{enabled:F,...y},liveMode:m,onLiveEvent:p,liveParams:c,metaData:f,dataProviderName:l}),{isFetching:de}=H,Se=At({mutationOptions:P}),{mutate:qe,isLoading:je}=Se,ce=Ar({mutationOptions:h}),{mutate:_e,isLoading:ft}=ce,{setWarnWhen:Je}=Ut(),De=Vr();return{...G||le?{formLoading:de||je,mutationResult:Se,onFinish:async ne=>{Je(!1);let ve=pe=>{De({redirect:K,resource:$,id:pe})};return N!=="pessimistic"&&setTimeout(()=>{ve()}),new Promise((pe,$e)=>(N!=="pessimistic"&&pe(),qe({values:ne,resource:$.name,successNotification:i,errorNotification:v,metaData:f,dataProviderName:l,invalidates:u},{onSuccess:(me,Ee,R)=>{var V;a&&a(me,ne,R);let Xe=(V=me==null?void 0:me.data)==null?void 0:V.id;ve(Xe),pe(me)},onError:(me,Ee,R)=>{if(o)return o(me,ne,R);$e()}})))}}:{formLoading:de||ft,mutationResult:ce,onFinish:async ne=>{Je(!1);let ve={id:x!=null?x:"",values:ne,resource:$.name,mutationMode:N,undoableTimeout:s,successNotification:i,errorNotification:v,metaData:f,dataProviderName:l,invalidates:u},pe=()=>{k(M),De({redirect:K,resource:$,id:x})};return N!=="pessimistic"&&setTimeout(()=>{pe()}),new Promise(($e,me)=>(N!=="pessimistic"&&$e(),setTimeout(()=>{_e(ve,{onSuccess:(Ee,R,V)=>{a&&a(Ee,ne,V),N==="pessimistic"&&pe(),$e(Ee)},onError:(Ee,R,V)=>{if(o)return o(Ee,ne,V);me()}})})))}},queryResult:H,id:x,setId:k,redirect:(ne,ve)=>{De({redirect:ne!==void 0?ne:oe?"list":"edit",resource:$,id:ve!=null?ve:x})}}},en=g("react"),Vr=()=>{let{show:e,edit:t,list:r,create:a}=se();return(0,en.useCallback)(({redirect:o,resource:n,id:i})=>{if(o&&n.route)return n.canShow&&o==="show"&&i?e(n.route,i):n.canEdit&&o==="edit"&&i?t(n.route,i):n.canCreate&&o==="create"?a(n.route):r(n.route,"push")},[])},se=()=>{let{useHistory:e}=_(),t=e(),r=he(),a=(d,m="push")=>{m==="push"?t.push(d):t.replace(d)},o=d=>`/${r(d).route}/create`,n=(d,m)=>{let p=r(d),c=encodeURIComponent(m);return`/${p.route}/edit/${c}`},i=(d,m)=>{let p=r(d),c=encodeURIComponent(m);return`/${p.route}/clone/${c}`},v=(d,m)=>{let p=r(d),c=encodeURIComponent(m);return`/${p.route}/show/${c}`},f=d=>`/${r(d).route}`;return{create:(d,m="push")=>{a(o(d),m)},createUrl:o,edit:(d,m,p="push")=>{a(n(d,m),p)},editUrl:n,clone:(d,m,p="push")=>{a(i(d,m),p)},cloneUrl:i,show:(d,m,p="push")=>{a(v(d,m),p)},showUrl:v,list:(d,m="push")=>{a(f(d),m)},listUrl:f,push:(d,...m)=>{t.push(d,...m)},replace:(d,...m)=>{t.replace(d,...m)},goBack:()=>{t.goBack()}}},sr=S(g("react")),tn=({resource:e,id:t,successNotification:r,errorNotification:a,metaData:o,liveMode:n,onLiveEvent:i,dataProviderName:v,queryOptions:f}={})=>{let{useParams:d}=_(),{resource:m,id:p}=d(),c=!e||e===m?t!=null?t:p:t,[s,l]=(0,sr.useState)(c);sr.default.useEffect(()=>{c!==s&&l(c)},[c]);let u=he()(e!=null?e:m);return{queryResult:Qt({resource:u.name,id:s!=null?s:"",queryOptions:{enabled:s!==void 0,...f},successNotification:r,errorNotification:a,metaData:o,liveMode:n,onLiveEvent:i,dataProviderName:v}),showId:s,setShowId:l}},Ge=g("react"),rn=g("papaparse"),an=S(g("lodash/chunk")),on=({resourceName:e,mapData:t=f=>f,paparseOptions:r,batchSize:a=Number.MAX_SAFE_INTEGER,onFinish:o,metaData:n,onProgress:i,dataProviderName:v}={})=>{let[f,d]=(0,Ge.useState)(0),[m,p]=(0,Ge.useState)(0),[c,s]=(0,Ge.useState)(!1),l=he(),{useParams:u}=_(),{resource:y}=u(),{name:P}=l(e!=null?e:y),h=Rr(),b=At(),E;a===1?E=b:E=h;let C=()=>{p(0),d(0),s(!1)},q=D=>{let M={succeeded:D.filter(x=>x.type==="success"),errored:D.filter(x=>x.type==="error")};o==null||o(M),s(!1)};(0,Ge.useEffect)(()=>{i==null||i({totalAmount:m,processedAmount:f})},[m,f]);let w=({file:D})=>(C(),new Promise(M=>{s(!0),(0,rn.parse)(D,{complete:async({data:x})=>{let k=Sr(x,t);if(p(k.length),a===1){let A=k.map($=>async()=>({response:await b.mutateAsync({resource:P,values:$,successNotification:!1,errorNotification:!1,dataProviderName:v,metaData:n}),value:$})),B=await Vt(A,({response:$,value:Q})=>(d(N=>N+1),{response:[$.data],type:"success",request:[Q]}),($,Q)=>({response:[$],type:"error",request:[k[Q]]}));M(B)}else{let A=(0,an.default)(k,a),B=A.map(Q=>async()=>({response:await h.mutateAsync({resource:P,values:Q,successNotification:!1,errorNotification:!1,dataProviderName:v,metaData:n}),value:Q,currentBatchLength:Q.length})),$=await Vt(B,({response:Q,currentBatchLength:N,value:G})=>(d(oe=>oe+N),{response:Q.data,type:"success",request:G}),(Q,N)=>({response:[Q],type:"error",request:A[N]}));M($)}},...r})}).then(M=>(q(M),M)));return{inputProps:{type:"file",accept:".csv",onChange:D=>{D.target.files&&D.target.files.length>0&&w({file:D.target.files[0]})}},mutationResult:E,isLoading:c,handleChange:w}},Et=g("react"),nn=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Et.useState)(e),a=(0,Et.useCallback)(()=>r(!0),[t]),o=(0,Et.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:o}},un=g("react"),jr=S(g("react")),ln={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Wt=jr.default.createContext(ln),sn=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i})=>jr.default.createElement(Wt.Provider,{value:{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i}},e),_=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:a,Link:o,routes:n}=(0,un.useContext)(Wt);return{useHistory:e,useLocation:t,useParams:r,Prompt:a,Link:o,routes:n}},dn=g("react"),cn=g("@tanstack/react-query"),_r=S(g("react")),ut=_r.default.createContext({}),mn=({can:e,children:t})=>_r.default.createElement(ut.Provider,{value:{can:e}},t),Jr=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:o}=(0,dn.useContext)(ut),{resource:n,...i}=r!=null?r:{},{icon:v,list:f,edit:d,create:m,show:p,children:c,...s}=n!=null?n:{},l=(0,cn.useQuery)(["useCan",{action:e,resource:t,params:{...i,resource:s},enabled:a==null?void 0:a.enabled}],()=>{var u;return(u=o==null?void 0:o({action:e,resource:t,params:r}))!=null?u:Promise.resolve({can:!0})},{enabled:typeof o<"u",...a,retry:!1});return typeof o>"u"?{data:{can:!0}}:l},fn=g("react"),vn=()=>{let{can:e}=(0,fn.useContext)(ut);return{can:e}},Oe=g("react"),pn=S(g("lodash/uniqBy")),gn=S(g("lodash/debounce")),Ze=S(g("lodash/get")),yn=e=>{var t,r;let[a,o]=(0,Oe.useState)([]),[n,i]=(0,Oe.useState)([]),[v,f]=(0,Oe.useState)([]),{resource:d,sort:m,filters:p=[],optionLabel:c="title",optionValue:s="id",debounce:l=300,successNotification:u,errorNotification:y,defaultValueQueryOptions:P,queryOptions:h,fetchSize:b,pagination:E,hasPagination:C,liveMode:q,defaultValue:w=[],onLiveEvent:D,onSearch:M,liveParams:x,metaData:k,dataProviderName:A}=e,B=Array.isArray(w)?w:[w],$=(0,Oe.useCallback)(K=>{f(K.data.map(F=>({label:(0,Ze.default)(F,c),value:(0,Ze.default)(F,s)})))},[c,s]),Q=P!=null?P:h,N=Tr({resource:d,ids:B,queryOptions:{...Q,enabled:B.length>0&&((t=P==null?void 0:P.enabled)!=null?t:!0),onSuccess:K=>{var F;$(K),(F=Q==null?void 0:Q.onSuccess)==null||F.call(Q,K)}},metaData:k,liveMode:"off",dataProviderName:A}),G=(0,Oe.useCallback)(K=>{i(K.data.map(F=>({label:(0,Ze.default)(F,c),value:(0,Ze.default)(F,s)})))},[c,s]),oe=Tt({resource:d,config:{sort:m,filters:p.concat(a),pagination:{current:E==null?void 0:E.current,pageSize:(r=E==null?void 0:E.pageSize)!=null?r:b},hasPagination:C},queryOptions:{...h,onSuccess:K=>{var F;G(K),(F=h==null?void 0:h.onSuccess)==null||F.call(h,K)}},successNotification:u,errorNotification:y,metaData:k,liveMode:q,liveParams:x,onLiveEvent:D,dataProviderName:A}),le=K=>{if(M){o(M(K));return}if(K)o([{field:c,operator:"contains",value:K}]);else{o([]);return}};return{queryResult:oe,defaultValueQueryResult:N,options:(0,Oe.useMemo)(()=>(0,pn.default)([...n,...v],"value"),[n,v]),onSearch:(0,gn.default)(le,l)}},xe=g("react"),dr=S(g("qs")),cr=S(g("lodash/differenceWith")),mr=S(g("lodash/isEqual")),hn=[],Pn=[];function En({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:a,permanentSorter:o=Pn,defaultSetFilterBehavior:n="merge",initialFilter:i,permanentFilter:v=hn,syncWithLocation:f,resource:d,successNotification:m,errorNotification:p,queryOptions:c,liveMode:s,onLiveEvent:l,liveParams:u,metaData:y,dataProviderName:P}={}){var h;let{syncWithLocation:b}=Kr(),E=f!=null?f:b,{useLocation:C,useParams:q}=_(),{search:w,pathname:D}=C(),M=Wr(s),{parsedCurrent:x,parsedPageSize:k,parsedSorter:A,parsedFilters:B}=kt(w),$=x||e,Q=k||t,N=A.length?A:a,G=B.length?B:i,{resource:oe}=q(),{replace:le}=se(),K=he()(d!=null?d:oe),[F,H]=(0,xe.useState)(Dt(o,N!=null?N:[])),[de,Se]=(0,xe.useState)(qt(v,G!=null?G:[])),[qe,je]=(0,xe.useState)($),[ce,_e]=(0,xe.useState)(Q),ft=({pagination:{current:R,pageSize:V},sorter:Xe,filters:zt})=>{let vt=dr.default.parse(w==null?void 0:w.substring(1)),ia=wt({pagination:{pageSize:V,current:R},sorter:Xe,filters:zt,...vt});return`${D}?${ia}`};(0,xe.useEffect)(()=>{w===""&&(je($),_e(Q),H(Dt(o,N!=null?N:[])),Se(qt(v,G!=null?G:[])))},[w]);let Je=()=>{let{sorter:R,filters:V,pageSize:Xe,current:zt,...vt}=dr.default.parse(w,{ignoreQueryPrefix:!0});return vt};(0,xe.useEffect)(()=>{if(E){let R=Je(),V=wt({...r?{pagination:{pageSize:ce,current:qe}}:{},sorter:(0,cr.default)(F,o,mr.default),filters:(0,cr.default)(de,v,mr.default),...R});return le(`${D}?${V}`,void 0,{shallow:!0})}},[E,qe,ce,F,de]);let De=Tt({resource:K.name,config:{hasPagination:r,pagination:{current:qe,pageSize:ce},filters:He(v,de),sort:St(o,F)},queryOptions:c,successNotification:m,errorNotification:p,metaData:y,liveMode:M,liveParams:u,onLiveEvent:l,dataProviderName:P}),ne=R=>{Se(V=>He(v,R,V))},ve=R=>{Se(He(v,R))},pe=R=>{Se(V=>He(v,R(V)))},$e=(R,V=n)=>{typeof R=="function"?pe(R):V==="replace"?ve(R):ne(R)},me=R=>{H(()=>St(o,R))},Ee=(0,xe.useMemo)(()=>{var R,V;return r?{current:qe,setCurrent:je,pageSize:ce,setPageSize:_e,pageCount:ce?Math.ceil(((V=(R=De.data)==null?void 0:R.total)!=null?V:0)/ce):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,qe,ce,(h=De.data)==null?void 0:h.total]);return{tableQueryResult:De,sorter:F,setSorter:me,filters:de,setFilters:$e,...Ee,createLinkForSyncWithLocation:ft}}var fr=g("react"),bt=g("@tanstack/react-query"),Xr=S(g("react")),lt=Xr.default.createContext({}),bn=({create:e,get:t,update:r,children:a})=>Xr.default.createElement(lt.Provider,{value:{create:e,get:t,update:r}},a),st=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,bt.useQueryClient)(),a=(0,fr.useContext)(lt),{resources:o}=(0,fr.useContext)(nt),{data:n,refetch:i,isLoading:v}=hr({queryOptions:{enabled:!!a}}),f=(0,bt.useMutation)(async m=>{var p,c,s;let l=o.find(P=>P.name===m.resource),u=(c=(p=l==null?void 0:l.options)==null?void 0:p.auditLog)==null?void 0:c.permissions;if(u&&!ro(u,m.action))return;let y;return v&&(y=await i()),await((s=a.create)==null?void 0:s.call(a,{...m,author:n!=null?n:y==null?void 0:y.data}))},e),d=(0,bt.useMutation)(async m=>{var p;return await((p=a.update)==null?void 0:p.call(a,m))},{onSuccess:m=>{if(m!=null&&m.resource){let p=ue(m==null?void 0:m.resource);r.invalidateQueries(p.logList())}},...t});return{log:f,rename:d}},Cn=g("react"),wn=g("@tanstack/react-query"),Sn=({resource:e,action:t,meta:r,author:a,metaData:o,queryOptions:n})=>{let{get:i}=(0,Cn.useContext)(lt),v=ue(e,void 0,o);return(0,wn.useQuery)(v.logList(r),()=>{var f;return(f=i==null?void 0:i({resource:e,action:t,author:a,meta:r,metaData:o}))!=null?f:Promise.resolve([])},{enabled:typeof i<"u",...n,retry:!1})},qn=g("react"),Dn=g("@tanstack/react-query"),Ne=()=>{let{resources:e}=X(),t=(0,Dn.useQueryClient)();return(0,qn.useCallback)(({resource:r,dataProviderName:a,invalidates:o,id:n})=>{if(o===!1)return;let i=ue(r,T(r,a,e));o.forEach(v=>{switch(v){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(n||""));break;default:break}})},[])},Ln=g("react"),xn=S(g("warn-once")),Mn=()=>{var e;let{useParams:t}=_(),{i18nProvider:r}=(0,Ln.useContext)(We),a=W(),{resources:o,resource:n}=X(),{action:i}=t(),v=[];if(!(n!=null&&n.name))return{breadcrumbs:v};let f=d=>{var m;let p=o.find(c=>c.name===d);p&&(p.parentName&&f(p.parentName),v.push({label:(m=p.label)!=null?m:a(`${p.name}.${p.name}`,ze(p.name)),href:p.list?`/${p.route}`:void 0,icon:p.icon}))};if(n.parentName&&f(n.parentName),v.push({label:(e=n.label)!=null?e:a(`${n.name}.${n.name}`,ze(n.name)),href:n.list?`/${n.route}`:void 0,icon:n.icon}),i){let d=`actions.${i}`,m=a(d);typeof r<"u"&&m===d?((0,xn.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${i}" action. Please add "actions.${i}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),v.push({label:a(`buttons.${i}`,ze(i))})):v.push({label:a(d,ze(i))})}return{breadcrumbs:v}},Te=S(g("react")),Nn=()=>{let{resources:e}=X(),t=W(),{useLocation:r,useParams:a}=_(),o=r(),n=a(),{hasDashboard:i}=it(),v=Te.default.useMemo(()=>{let c=e.find(l=>(o==null?void 0:o.pathname)===`/${l.route}`);c||(c=e.find(l=>(n==null?void 0:n.resource)===l.route));let s;return c!=null&&c.route?s=`/${c==null?void 0:c.route}`:o.pathname==="/"?s="/":s=o==null?void 0:o.pathname,s},[e,o,n]),f=Te.default.useMemo(()=>e.map(c=>{var s,l;let u=`/${c.route}`;return{...c,icon:c.icon,route:u,key:(s=c.key)!=null?s:u,label:(l=c.label)!=null?l:t(`${c.name}.${c.name}`,$t(c.name,"plural"))}}),[e,i,t]),d=Te.default.useMemo(()=>Mr(f),[f]),m=Te.default.useCallback((c,s,l=!1)=>{let u=s.find(y=>l?y.name===c:y.route===c);if(u){let y=[];return l&&u.route&&y.unshift(u.route),u.parentName&&y.unshift(...m(u.parentName,s,!0)),y}return[]},[]),p=Te.default.useMemo(()=>m(v,f),[v,f]);return Te.default.useMemo(()=>{let c=s=>s.reduce((l,u)=>{var y,P;return u.children.length>0&&((y=u.options)==null?void 0:y.hide)!==!0?[...l,{...u,children:c(u.children)}]:typeof u.list<"u"&&((P=u.options)==null?void 0:P.hide)!==!0?[...l,u]:l},[]);return{defaultOpenKeys:p,selectedKey:v,menuItems:c(d)}},[p,v,d])},kn=()=>{let[e,t]=(0,Le.useState)(),{push:r}=se(),a=W(),o=["edit","create","show"],{useParams:n}=_(),i=n(),v=he();return(0,Le.useEffect)(()=>{if(i.resource){let f=v(i.resource);i.action&&o.includes(i.action)&&!f[i.action]&&t(a("pages.error.info",{action:i.action,resource:i.resource},`You may have forgotten to add the "${i.action}" component to "${i.resource}" resource.`))}},[i]),Le.default.createElement(Le.default.Fragment,null,Le.default.createElement("h1",null,a("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Le.default.createElement("p",null,e),Le.default.createElement("button",{onClick:()=>r("/")},a("pages.error.backHome",void 0,"Back Home")))},J=S(g("react")),Yr=()=>{let[e,t]=(0,J.useState)(""),[r,a]=(0,J.useState)(""),o=W(),{mutate:n}=Mt();return J.default.createElement(J.default.Fragment,null,J.default.createElement("h1",null,o("pages.login.title","Sign in your account")),J.default.createElement("form",{onSubmit:i=>{i.preventDefault(),n({username:e,password:r})}},J.default.createElement("table",null,J.default.createElement("tbody",null,J.default.createElement("tr",null,J.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),J.default.createElement("td",null,J.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:i=>t(i.target.value)}))),J.default.createElement("tr",null,J.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),J.default.createElement("td",null,J.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:i=>a(i.target.value)}))))),J.default.createElement("br",null),J.default.createElement("input",{type:"submit",value:"login"})))},Qe=S(g("react")),U=S(g("react")),$n=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:o,wrapperProps:n,renderContent:i,formProps:v})=>{let{Link:f}=_(),[d,m]=(0,U.useState)(""),[p,c]=(0,U.useState)(""),[s,l]=(0,U.useState)(!1),u=W(),{mutate:y}=Mt(),P=(E,C)=>E?typeof E=="string"?U.default.createElement(f,{to:E},C):E:null,h=()=>e?e.map(E=>{var C;return U.default.createElement("div",{key:E.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},U.default.createElement("button",{onClick:()=>y({providerName:E.name}),style:{display:"flex",alignItems:"center"}},E==null?void 0:E.icon,(C=E.label)!=null?C:U.default.createElement("label",null,E.label)))}):null,b=U.default.createElement("div",{...o},U.default.createElement("h1",{style:{textAlign:"center"}},u("pages.login.title","Sign in to your account")),h(),U.default.createElement("hr",null),U.default.createElement("form",{onSubmit:E=>{E.preventDefault(),y({email:d,password:p,remember:s})},...v},U.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},U.default.createElement("label",null,u("pages.login.fields.email","Email")),U.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:d,onChange:E=>m(E.target.value)}),U.default.createElement("label",null,u("pages.login.fields.password","Password")),U.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:p,onChange:E=>c(E.target.value)}),a!=null?a:U.default.createElement(U.default.Fragment,null,U.default.createElement("label",null,u("pages.login.buttons.rememberMe","Remember me"),U.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:s,value:s.toString(),onChange:()=>{l(!s)}}))),U.default.createElement("br",null),r!=null?r:P("/forgot-password",u("pages.login.buttons.forgotPassword","Forgot password?")),U.default.createElement("input",{type:"submit",value:u("pages.login.signin","Sign in")}),t!=null?t:U.default.createElement("span",null,u("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",P("/register",u("pages.login.register","Sign up"))))));return U.default.createElement("div",{...n},i?i(b):b)},j=S(g("react")),On=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:o,formProps:n})=>{let{Link:i}=_(),[v,f]=(0,j.useState)(""),[d,m]=(0,j.useState)(""),p=W(),{mutate:c,isLoading:s}=Er(),l=(P,h)=>P?typeof P=="string"?j.default.createElement(i,{to:P},h):P:null,u=()=>e?e.map(P=>{var h;return j.default.createElement("div",{key:P.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},j.default.createElement("button",{onClick:()=>c({providerName:P.name}),style:{display:"flex",alignItems:"center"}},P==null?void 0:P.icon,(h=P.label)!=null?h:j.default.createElement("label",null,P.label)))}):null,y=j.default.createElement("div",{...a},j.default.createElement("h1",{style:{textAlign:"center"}},p("pages.register.title","Sign up for your account")),u(),j.default.createElement("hr",null),j.default.createElement("form",{onSubmit:P=>{P.preventDefault(),c({email:v,password:d})},...n},j.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},j.default.createElement("label",null,p("pages.register.fields.email","Email")),j.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:P=>f(P.target.value)}),j.default.createElement("label",null,p("pages.register.fields.password","Password")),j.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:d,onChange:P=>m(P.target.value)}),j.default.createElement("input",{type:"submit",value:p("pages.register.buttons.submit","Sign up"),disabled:s}),t!=null?t:j.default.createElement(j.default.Fragment,null,j.default.createElement("span",null,p("pages.login.buttons.haveAccount","Have an account?")," ",l("login",p("pages.login.signin","Sign in")))))));return j.default.createElement("div",{...r},o?o(y):y)},ee=S(g("react")),Tn=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:o})=>{let n=W(),{Link:i}=_(),[v,f]=(0,ee.useState)(""),{mutate:d,isLoading:m}=br(),p=(s,l)=>s?typeof s=="string"?ee.default.createElement(i,{to:s},l):s:null,c=ee.default.createElement("div",{...r},ee.default.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),ee.default.createElement("hr",null),ee.default.createElement("form",{onSubmit:s=>{s.preventDefault(),d({email:v})},...o},ee.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ee.default.createElement("label",null,n("pages.forgotPassword.fields.email","Email")),ee.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:s=>f(s.target.value)}),ee.default.createElement("input",{type:"submit",disabled:m,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),ee.default.createElement("br",null),e!=null?e:ee.default.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",p("/login",n("pages.login.signin","Sign in"))))));return ee.default.createElement("div",{...t},a?a(c):c)},te=S(g("react")),Qn=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let o=W(),{mutate:n,isLoading:i}=Cr(),[v,f]=(0,te.useState)(""),[d,m]=(0,te.useState)(""),p=te.default.createElement("div",{...t},te.default.createElement("h1",{style:{textAlign:"center"}},o("pages.updatePassword.title","Update Password")),te.default.createElement("hr",null),te.default.createElement("form",{onSubmit:c=>{c.preventDefault(),n({password:v,confirmPassword:d})},...a},te.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},te.default.createElement("label",null,o("pages.updatePassword.fields.password","New Password")),te.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:v,onChange:c=>f(c.target.value)}),te.default.createElement("label",null,o("pages.updatePassword.fields.confirmPassword","Confirm New Password")),te.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:d,onChange:c=>m(c.target.value)}),te.default.createElement("input",{type:"submit",disabled:i,value:o("pages.updatePassword.buttons.submit","Update")}))));return te.default.createElement("div",{...e},r?r(p):p)},An=e=>{let{type:t}=e;return Qe.default.createElement(Qe.default.Fragment,null,(()=>{switch(t){case"register":return Qe.default.createElement(On,{...e});case"forgotPassword":return Qe.default.createElement(Tn,{...e});case"updatePassword":return Qe.default.createElement(Qn,{...e});default:return Qe.default.createElement($n,{...e})}})())},Z=S(g("react")),Gr=()=>Z.default.createElement(Z.default.Fragment,null,Z.default.createElement("h1",null,"Welcome on board"),Z.default.createElement("p",null,"Your configuration is completed."),Z.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",Z.default.createElement("code",null,"`resources`")," property of ",Z.default.createElement("code",null,"`<Refine>`")),Z.default.createElement("div",{style:{display:"flex",gap:8}},Z.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},Z.default.createElement("button",null,"Documentation")),Z.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},Z.default.createElement("button",null,"Examples")),Z.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},Z.default.createElement("button",null,"Community")))),z=S(g("react")),Ct=g("@tanstack/react-query"),Rn=g("@tanstack/react-query-devtools"),Fn=g("react"),be=g("react"),Un="3.103.0",Wn=()=>{let e=(0,be.useContext)(re),t=(0,be.useContext)(lt),r=(0,be.useContext)(Ke),a=(0,be.useContext)(Wt),o=(0,be.useContext)(Rt),{i18nProvider:n}=(0,be.useContext)(We),i=(0,be.useContext)(Ft),v=(0,be.useContext)(ut),{resources:f}=X(),d=e.isProvided,m=!!t.create||!!t.get||!!t.update,p=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),c=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,s=!!o,l=!!(n!=null&&n.changeLocale)||!!(n!=null&&n.getLocale)||!!(n!=null&&n.translate),u=!!i.close||!!i.open,y=!!v.can;return{providers:{auth:d,auditLog:m,live:p,router:c,data:s,i18n:l,notification:u,accessControl:y},version:Un,resourceCount:f.length}},In=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Bn=()=>{let e=Wn();return(0,Fn.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${In(e)}`},[]),null},Hn=g("react"),zn=g("react"),Kn=S(g("lodash/isEqual")),Vn=e=>{let t=(0,zn.useRef)(e);return(0,Kn.default)(t.current,e)||(t.current=e),t.current},vr=(e,t)=>{let r=Vn(t);return(0,Hn.useMemo)(e,r)},jn=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:a,accessControlProvider:o,auditLogProvider:n,resources:i,DashboardPage:v,ReadyPage:f,LoginPage:d,catchAll:m,children:p,liveProvider:c,i18nProvider:s,mutationMode:l,syncWithLocation:u,warnWhenUnsavedChanges:y,undoableTimeout:P,Title:h,Layout:b,Sider:E,Header:C,Footer:q,OffLayoutArea:w,reactQueryClientConfig:D,reactQueryDevtoolConfig:M,liveMode:x,onLiveEvent:k,disableTelemetry:A,options:B})=>{let{optionsWithDefaults:$,disableTelemetryWithDefault:Q,reactQueryWithDefaults:N}=io({options:B,disableTelemetry:A,liveMode:x,mutationMode:l,reactQueryClientConfig:D,reactQueryDevtoolConfig:M,syncWithLocation:u,warnWhenUnsavedChanges:y,undoableTimeout:P}),G=vr(()=>{var F;return N.clientConfig instanceof Ct.QueryClient?N.clientConfig:new Ct.QueryClient({...N.clientConfig,defaultOptions:{...N.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(F=N.clientConfig.defaultOptions)==null?void 0:F.queries}}})},[N.clientConfig]),oe=z.default.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])(),le=vr(()=>{let F=[];return i==null||i.forEach(H=>{var de;F.push({key:H.key,name:H.name,label:(de=H.options)==null?void 0:de.label,icon:H.icon,route:Ot(H,i),canCreate:!!H.create,canEdit:!!H.edit,canShow:!!H.show,canDelete:H.canDelete,create:H.create,show:H.show,list:H.list,edit:H.edit,options:H.options,parentName:H.parentName})}),F},[i]);if(le.length===0)return f?z.default.createElement(f,null):z.default.createElement(Gr,null);let{RouterComponent:K=z.default.Fragment}=r;return z.default.createElement(Ct.QueryClientProvider,{client:G},z.default.createElement(Uo,{...oe},z.default.createElement(Sa,{...e!=null?e:{},isProvided:Boolean(e)},z.default.createElement(Lo,{...t},z.default.createElement(ko,{liveProvider:c},z.default.createElement(sn,{...r},z.default.createElement(Ao,{resources:le},z.default.createElement(Io,{i18nProvider:s},z.default.createElement(mn,{...o!=null?o:{}},z.default.createElement(bn,{...n!=null?n:{}},z.default.createElement(fo,null,z.default.createElement(no,{mutationMode:$.mutationMode,warnWhenUnsavedChanges:$.warnWhenUnsavedChanges,syncWithLocation:$.syncWithLocation,Title:h,undoableTimeout:$.undoableTimeout,catchAll:m,DashboardPage:v,LoginPage:d,Layout:b,Sider:E,Footer:q,Header:C,OffLayoutArea:w,hasDashboard:!!v,liveMode:$.liveMode,onLiveEvent:k,options:$},z.default.createElement(Ko,null,z.default.createElement(K,null,p,!Q&&z.default.createElement(Bn,null),z.default.createElement(ea,null)))))))))))))),N.devtoolConfig===!1?null:z.default.createElement(Rn.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...N.devtoolConfig}))},pr=g("react"),Zr=({notification:e})=>{let t=W(),{notificationDispatch:r}=Ue(),{open:a}=we(),[o,n]=(0,pr.useState)(),i=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:yt(e.seconds)},`You have ${yt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:yt(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let v=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);n(v)}};return(0,pr.useEffect)(()=>{i()},[e]),null},rt=S(g("react")),_n=({children:e,Layout:t,Sider:r,Header:a,Title:o,Footer:n,OffLayoutArea:i})=>{let{Layout:v,Footer:f,Header:d,Sider:m,Title:p,OffLayoutArea:c}=it(),s=t!=null?t:v;return rt.default.createElement(s,{Sider:r!=null?r:m,Header:a!=null?a:d,Footer:n!=null?n:f,Title:o!=null?o:p,OffLayoutArea:i!=null?i:c},e,rt.default.createElement(Jn,null))},Jn=()=>{let{Prompt:e}=_(),t=W(),{warnWhen:r,setWarnWhen:a}=Ut(),o=n=>(n.preventDefault(),n.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),n.returnValue);return(0,rt.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),rt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},Ae=S(g("react")),Xn=({children:e,fallback:t,loading:r})=>{let{isSuccess:a,isLoading:o,isError:n}=wr(),{replace:i}=se(),{useLocation:v}=_(),{pathname:f,search:d}=v();if(o)return Ae.default.createElement(Ae.default.Fragment,null,r)||null;if(n){if(!t){let m=`${f}${d}`;return f.includes("/login")||i(`/login?to=${encodeURIComponent(m)}`),null}return Ae.default.createElement(Ae.default.Fragment,null,t)}return a?Ae.default.createElement(Ae.default.Fragment,null,e):null},gr=g("react"),ea=()=>{let{useLocation:e}=_(),{checkAuth:t}=(0,gr.useContext)(re),r=e();return(0,gr.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},Re=S(g("react")),Yn=({resource:e,action:t,params:r,fallback:a,children:o,...n})=>{let{data:i}=Jr({resource:e,action:t,params:r});return i!=null&&i.can?Re.default.isValidElement(o)?Re.default.cloneElement(o,n):Re.default.createElement(Re.default.Fragment,null,o):(i==null?void 0:i.can)===!1?Re.default.createElement(Re.default.Fragment,null,a!=null?a:null):null},Fe=S(g("react")),Gn=[`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],Zn=()=>((0,Fe.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Gn.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),Fe.default.createElement("div",{className:"banner",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},Fe.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},Fe.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},Fe.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),Fe.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"Refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var fe={};fa(fe,{BrowserRouterComponent:()=>Ht,HashRouterComponent:()=>ra,MemoryRouterComponent:()=>ta,default:()=>ti});var na=Ye(Bt()),Pe=g("react-router-dom");var ke=Ye(g("react")),Be=g("react-router-dom");var L=Ye(g("react")),I=g("react-router-dom"),O=Ye(Bt()),dt=({route:e})=>{let{catchAll:t}=(0,O.useRefineContext)(),{useParams:r}=(0,O.useRouterContext)(),{resources:a}=(0,O.useResource)(),{action:o,id:n}=r(),i=a.find(v=>v.route===e);if(i){let{list:v,create:f,edit:d,show:m,name:p,canCreate:c,canEdit:s,canShow:l,canDelete:u,options:y}=i,P=v!=null?v:()=>null,h=f!=null?f:()=>null,b=d!=null?d:()=>null,E=m!=null?m:()=>null;return(()=>{switch(o){case void 0:return L.default.createElement(O.CanAccess,{resource:p,action:"list",fallback:t!=null?t:L.default.createElement(O.ErrorComponent,null),params:{resource:i}},v?L.default.createElement(P,{name:p,canCreate:c,canEdit:s,canDelete:u,canShow:l,options:y}):t!=null?t:L.default.createElement(O.ErrorComponent,null));case"create":case"clone":return L.default.createElement(O.CanAccess,{resource:p,action:"create",fallback:t!=null?t:L.default.createElement(O.ErrorComponent,null),params:{id:n?decodeURIComponent(n):void 0,resource:i}},f?L.default.createElement(h,{name:p,canCreate:c,canEdit:s,canDelete:u,canShow:l,options:y}):t!=null?t:L.default.createElement(O.ErrorComponent,null));case"edit":return L.default.createElement(O.CanAccess,{resource:p,action:"edit",params:{id:n?decodeURIComponent(n):void 0,resource:i},fallback:t!=null?t:L.default.createElement(O.ErrorComponent,null)},d?L.default.createElement(b,{name:p,canCreate:c,canEdit:s,canDelete:u,canShow:l,options:y}):t!=null?t:L.default.createElement(O.ErrorComponent,null));case"show":return L.default.createElement(O.CanAccess,{resource:p,action:"show",params:{id:n?decodeURIComponent(n):void 0,resource:i},fallback:t!=null?t:L.default.createElement(O.ErrorComponent,null)},m?L.default.createElement(E,{name:p,canCreate:c,canEdit:s,canDelete:u,canShow:l,options:y}):t!=null?t:L.default.createElement(O.ErrorComponent,null));default:return L.default.createElement(L.default.Fragment,null,t!=null?t:L.default.createElement(O.ErrorComponent,null))}})()}return L.default.createElement(L.default.Fragment,null,t!=null?t:L.default.createElement(O.ErrorComponent,null))},ct=({initialRoute:e})=>{let{resources:t}=(0,O.useResource)(),{catchAll:r,DashboardPage:a,LoginPage:o}=(0,O.useRefineContext)(),{routes:n}=(0,O.useRouterContext)(),{isFetching:i,isError:v}=(0,O.useAuthenticated)({type:"routeProvider"});if(i)return L.default.createElement(I.Routes,null,L.default.createElement(I.Route,{path:"*",element:null}));let f=!v,d=()=>{let{pathname:l,search:u}=location,y=`${l}${u}`;return L.default.createElement(I.Navigate,{to:`/login?to=${encodeURIComponent(y)}`})},m=[];t.map(l=>{let u=L.default.createElement(I.Route,{key:`${l.route}`,path:`${l.route}`,element:L.default.createElement(dt,{route:l.route})},L.default.createElement(I.Route,{path:":action",element:L.default.createElement(dt,{route:l.route})},L.default.createElement(I.Route,{path:":id",element:L.default.createElement(dt,{route:l.route})})));m.push(u)});let p=()=>{var l;return L.default.createElement(I.Routes,null,[...n||[]].filter(u=>!u.layout).map((u,y)=>L.default.createElement(I.Route,{key:`custom-route-${y}`,...u,element:u.element})),L.default.createElement(I.Route,{path:"/",element:L.default.createElement(O.LayoutWrapper,null,L.default.createElement(I.Outlet,null))},[...n||[]].filter(u=>u.layout).map((u,y)=>L.default.createElement(I.Route,{key:`custom-route-${y}`,...u,element:u.element})),L.default.createElement(I.Route,{index:!0,element:a?L.default.createElement(O.CanAccess,{resource:"dashboard",action:"list",fallback:r!=null?r:L.default.createElement(O.ErrorComponent,null)},L.default.createElement(a,null)):L.default.createElement(I.Navigate,{to:e!=null?e:`/${(l=t.find(u=>u.list))==null?void 0:l.route}`})}),...[...m||[]],L.default.createElement(I.Route,{path:"*",element:L.default.createElement(dt,{route:""})})))},c=()=>o?L.default.createElement(o,null):L.default.createElement(O.LoginPage,null);return f?p():(()=>L.default.createElement(I.Routes,null,[...n||[]].map((l,u)=>L.default.createElement(I.Route,{key:`custom-route-${u}`,...l})),L.default.createElement(I.Route,{path:"/",element:c()}),L.default.createElement(I.Route,{path:"/login",element:c()}),L.default.createElement(I.Route,{path:"*",element:L.default.createElement(d,null)})))()};function Ht({children:e,...t}){return ke.default.createElement(Be.BrowserRouter,{...t},ke.default.createElement(ct,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}function ta({children:e,...t}){return ke.default.createElement(Be.MemoryRouter,{...t},ke.default.createElement(ct,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}function ra({children:e,...t}){return ke.default.createElement(Be.HashRouter,{...t},ke.default.createElement(ct,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}var mt=g("react"),aa=g("react-router-dom"),oa=({message:e,when:t,setWarnWhen:r})=>{let a=(0,mt.useContext)(aa.UNSAFE_NavigationContext).navigator;return(0,mt.useEffect)(()=>{if(!t)return;let o=a.block(n=>{window.confirm(e)?(r==null||r(!1),o(),n.retry()):a.location.pathname=window.location.pathname});return o},[t,location,e]),null};ge(fe,g("react-router-dom"));var ei={useHistory:()=>{let e=(0,Pe.useNavigate)();return{push:e,replace:t=>{e(t,{replace:!0})},goBack:()=>{e(-1)}}},useLocation:Pe.useLocation,useParams:()=>{let e=(0,Pe.useParams)(),{pathname:t}=(0,Pe.useLocation)(),r=`/${Object.values(e).join("/")}`;return(0,na.handleUseParams)({...e,resource:Object.keys(e).length===0?t.substring(1):decodeURIComponent(t.substring(1)).replace(r,"")})},Prompt:oa,Link:Pe.Link,RouterComponent:Ht},ti=ei;})();
//# sourceMappingURL=index.js.map