{"version":3,"sources":["../src/index.ts","../src/serve-client.ts","../src/serve-ws.ts","../src/constants.ts","../src/reload-on-change.ts","../src/setup-server.ts","../src/create-db.ts","../src/serve-api.ts","../src/feed/get-feed.ts","../src/packages/get-installed-package-data.ts","../src/packages/get-installed-package-json-path.ts","../src/packages/get-packages-from-package-json.ts","../src/packages/get-changelog.ts","../src/packages/get-documentation.ts","../src/packages/get-all-packages.ts","../src/packages/get-available-packages.ts","../src/packages/update-package.ts","../src/packages/get-latest-package-data.ts","../src/project-id/get-project-id-from-package-json.ts","../src/project-id/set-project-id-to-package-json.ts","../src/project-id/set-project-id-to-refine-component.ts","../src/project-id/update-project-id.ts","../src/serve-proxy.ts","../src/serve-open-in-editor.ts","../src/cli.ts"],"sourcesContent":["import express from \"express\";\n\nimport { DevtoolsEvent, receive, send } from \"@refinedev/devtools-shared\";\n\nimport { serveClient } from \"./serve-client\";\nimport { serveWs } from \"./serve-ws\";\nimport { reloadOnChange } from \"./reload-on-change\";\nimport { setupServer } from \"./setup-server\";\nimport { type Activity, createDb } from \"./create-db\";\nimport { serveApi } from \"./serve-api\";\nimport { serveProxy } from \"./serve-proxy\";\nimport { serveOpenInEditor } from \"./serve-open-in-editor\";\n\ntype Options = {\n  projectPath?: string;\n  onError?: () => void;\n};\n\nexport const server = async ({\n  projectPath = process.cwd(),\n  onError = () => {\n    process.exit(1);\n  },\n}: Options = {}) => {\n  return new Promise((_, reject) => {\n    const app = express();\n    const server = setupServer(app, () => {\n      reject();\n      onError();\n    });\n    const ws = serveWs(server, () => {\n      reject();\n      onError();\n    });\n\n    const db = createDb();\n\n    ws.on(\"connection\", (client) => {\n      // Initialize development client\n      receive(client as any, DevtoolsEvent.DEVTOOLS_INIT, (data) => {\n        if (db.connectedApp) {\n          // send client the devtools client url if already connected\n          send(client as any, DevtoolsEvent.DEVTOOLS_ALREADY_CONNECTED, {\n            url: db.connectedApp,\n          });\n        } else {\n          db.connectedApp = data.url;\n          db.clientWs = client;\n\n          ws.clients.forEach((c) => {\n            send(c as any, DevtoolsEvent.DEVTOOLS_CONNECTED_APP, {\n              url: db.connectedApp,\n            });\n          });\n        }\n      });\n\n      receive(client as any, DevtoolsEvent.ACTIVITY, (data) => {\n        // match by identifier, if identifier is same, update data instead of pushing\n        const index = db.activities.findIndex(\n          (activity) => activity.identifier === data.identifier,\n        );\n\n        const record: Activity = {\n          ...data,\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        };\n\n        if (index > -1) {\n          record.createdAt = db.activities[index].createdAt;\n\n          db.activities[index] = record;\n        } else {\n          db.activities.push(record);\n        }\n\n        ws.clients.forEach((c) => {\n          send(c as any, DevtoolsEvent.DEVTOOLS_ACTIVITY_UPDATE, {\n            updatedActivities: [record],\n          });\n        });\n      });\n\n      receive(\n        client as any,\n        DevtoolsEvent.DEVTOOLS_HIGHLIGHT_IN_MONITOR,\n        ({ name }) => {\n          ws.clients.forEach((c) => {\n            send(c as any, DevtoolsEvent.DEVTOOLS_HIGHLIGHT_IN_MONITOR_ACTION, {\n              name,\n            });\n          });\n        },\n      );\n\n      receive(\n        client as any,\n        DevtoolsEvent.DEVTOOLS_INVALIDATE_QUERY,\n        ({ queryKey }) => {\n          ws.clients.forEach((c) => {\n            send(c as any, DevtoolsEvent.DEVTOOLS_INVALIDATE_QUERY_ACTION, {\n              queryKey,\n            });\n          });\n        },\n      );\n\n      receive(client as any, DevtoolsEvent.DEVTOOLS_LOGIN_SUCCESS, () => {\n        ws.clients.forEach((c) => {\n          send(c as any, DevtoolsEvent.DEVTOOLS_RELOAD_AFTER_LOGIN, {});\n        });\n      });\n\n      receive(\n        client as any,\n        DevtoolsEvent.DEVTOOLS_LOGIN_FAILURE,\n        ({ error, code }) => {\n          ws.clients.forEach((c) => {\n            send(c as any, DevtoolsEvent.DEVTOOLS_DISPLAY_LOGIN_FAILURE, {\n              error,\n              code,\n            });\n          });\n        },\n      );\n\n      // close connected app if client disconnects\n      client.on(\"close\", (_, reason) => {\n        if (__DEVELOPMENT__) {\n          console.log(\"Client disconnected\", ws.clients.size);\n        }\n\n        if (db.clientWs) {\n          if (!ws.clients.has(db.clientWs)) {\n            db.clientWs = null;\n            db.connectedApp = null;\n\n            db.activities = [];\n\n            ws.clients.forEach((c) => {\n              send(c as any, DevtoolsEvent.DEVTOOLS_DISCONNECTED_APP, {\n                url: db.connectedApp,\n              });\n            });\n          }\n        }\n      });\n\n      if (__DEVELOPMENT__) {\n        console.log(\"Client connected\", ws.clients.size);\n      }\n    });\n\n    reloadOnChange(ws);\n    serveClient(app);\n    serveApi(app, db);\n    serveProxy(app);\n    serveOpenInEditor(app, projectPath);\n\n    process.on(\"SIGTERM\", () => {\n      reject();\n    });\n  });\n};\n","import express from \"express\";\nimport path from \"path\";\n\nimport type { Express } from \"express\";\n\nexport const serveClient = (app: Express) => {\n  app.use(express.static(path.join(__dirname, \"client\")));\n\n  app.use((req, res, next) => {\n    if (req.path.startsWith(\"/api\")) {\n      return next();\n    }\n    if (req.path.startsWith(\"/open-in-editor\")) {\n      return next();\n    }\n    res.status(200).sendFile(path.join(`${__dirname}/client/index.html`));\n  });\n};\n","import WebSocket from \"ws\";\nimport { SERVER_PORT } from \"./constants\";\nimport { bold, cyanBright } from \"chalk\";\nimport type http from \"http\";\n\nexport const serveWs = (\n  server: http.Server<typeof http.IncomingMessage, typeof http.ServerResponse>,\n  onError: () => void,\n) => {\n  const ws = new WebSocket.Server({ server }).on(\"error\", (error: any) => {\n    if (error?.code === \"EADDRINUSE\") {\n      console.error(\n        `\\n${cyanBright.bold(\"\\u2717 \")}${bold(\n          \"Refine Devtools server\",\n        )} (websocket) failed to start. Port ${SERVER_PORT} is already in use.\\n`,\n      );\n    } else {\n      console.error(\n        `\\n${cyanBright.bold(\"\\u2717 \")}${bold(\"error from refine devtools\")}`,\n        error,\n      );\n    }\n    ws.close(() => {\n      if (__DEVELOPMENT__) {\n        console.log(\"Process terminated\");\n      }\n    });\n    onError();\n  });\n\n  ws.on(\"connection\", (client) => {\n    client.on(\"close\", () => {\n      client.terminate();\n    });\n  });\n\n  process.on(\"SIGTERM\", () => {\n    ws.close(() => {\n      if (__DEVELOPMENT__) {\n        console.log(\"Process terminated\");\n      }\n    });\n  });\n\n  return ws;\n};\n","import dotenv from \"dotenv\";\n\nconst refineEnv: Record<string, string> = {};\ndotenv.config({ processEnv: refineEnv });\n\nconst RAW_ENV_REFINE_DEVTOOLS_PORT =\n  process.env.REFINE_DEVTOOLS_PORT || refineEnv.REFINE_DEVTOOLS_PORT;\nexport const DEFAULT_SERVER_PORT = 5001;\nexport const SERVER_PORT =\n  Number(RAW_ENV_REFINE_DEVTOOLS_PORT) || DEFAULT_SERVER_PORT;\n\nexport const AUTH_SERVER_URL = __DEVELOPMENT__\n  ? \"https://develop.auth.refine.dev\"\n  : \"https://auth.refine.dev\";\n\nexport const REFINE_API_URL = __DEVELOPMENT__\n  ? \"https://develop.cloud.refine.dev\"\n  : \"https://cloud2.refine.dev\";\n\nexport const AUTH_TRIGGER_API_PATH = \"/api/login\";\nexport const AUTH_CALLBACK_API_PATH = \"/api/login-callback\";\nexport const AUTH_CALLBACK_UI_PATH = \"/after-login\";\n\nexport const FEED_MD_URL =\n  \"https://raw.githubusercontent.com/refinedev/refine/main/packages/devtools-server/FEED.md\";\n","import fs from \"fs\";\nimport path from \"path\";\nimport debounce from \"lodash/debounce\";\nimport { DevtoolsEvent, send } from \"@refinedev/devtools-shared\";\n\nimport type { Server } from \"ws\";\nimport { OPEN } from \"ws\";\n\nexport const reloadOnChange = __DEVELOPMENT__\n  ? (ws: Server) => {\n      const reloadEmitter = debounce(() => {\n        setTimeout(() => {\n          ws.clients.forEach((client) => {\n            if (client.readyState === OPEN) {\n              console.log(\"Reloading connected client...\");\n              send(client as any, DevtoolsEvent.RELOAD, {});\n            }\n          });\n        }, 800);\n      }, 1000);\n\n      const watcher = fs.watch(\n        path.resolve(__dirname, \"client\"),\n        { recursive: true },\n        reloadEmitter,\n      );\n\n      process.on(\"SIGTERM\", () => {\n        watcher.close();\n      });\n    }\n  : () => 0;\n","import type { Express } from \"express\";\nimport { SERVER_PORT } from \"./constants\";\nimport { bold, cyanBright } from \"chalk\";\nimport http from \"http\";\n\nexport const setupServer = (app: Express, onError: () => void) => {\n  const server = http.createServer(app);\n\n  server\n    .on(\"error\", (error: any) => {\n      if (error?.code === \"EADDRINUSE\") {\n        console.error(\n          `\\n${cyanBright.bold(\"\\u2717 \")}${bold(\n            \"Refine Devtools server\",\n          )} (http) failed to start. Port ${SERVER_PORT} is already in use.\\n`,\n        );\n        console.info(\n          `${cyanBright.bold(\n            \"\\u2139 \",\n          )}You can change the port by setting the ${bold(\n            \"REFINE_DEVTOOLS_PORT\",\n          )} environment variable.`,\n        );\n      } else {\n        console.error(\n          `\\n${cyanBright.bold(\"\\u2717 \")}${bold(\n            \"error from Refine Devtools\",\n          )}`,\n          error,\n        );\n      }\n      server.close(() => {\n        if (__DEVELOPMENT__) {\n          console.log(\"Process terminated\");\n        }\n      });\n      onError();\n    })\n    .on(\"listening\", () => {\n      console.log(\n        `\\n${cyanBright.bold(\"\\u2713 \")}${bold(\n          \"Refine Devtools\",\n        )} is running at port ${cyanBright.bold(SERVER_PORT)}\\n`,\n      );\n    });\n\n  process.on(\"SIGTERM\", () => {\n    server.close(() => {\n      if (__DEVELOPMENT__) {\n        console.log(\"Process terminated\");\n      }\n    });\n  });\n\n  server.listen(SERVER_PORT, undefined, undefined, () => {\n    if (__DEVELOPMENT__) {\n      console.log(`Server started on PORT ${SERVER_PORT}`);\n    }\n  });\n\n  return server;\n};\n","import type {\n  DevtoolsEvent,\n  DevtoolsEventPayloads,\n} from \"@refinedev/devtools-shared\";\nimport type { WebSocket } from \"ws\";\n\nexport type Activity =\n  DevtoolsEventPayloads[DevtoolsEvent.DEVTOOLS_ACTIVITY_UPDATE][\"updatedActivities\"][number];\n\nexport type Data = {\n  connectedApp: null | string;\n  clientWs: null | WebSocket;\n  devtoolsWsClients: WebSocket[];\n  appWsClients: WebSocket[];\n  activities: Activity[];\n  packages: string[];\n};\n\nconst defaultData: Data = {\n  connectedApp: null,\n  clientWs: null,\n  // connections\n  devtoolsWsClients: [],\n  appWsClients: [],\n  // data\n  activities: [],\n  packages: [],\n};\n\nexport const createDb = (): Data => {\n  return {\n    ...defaultData,\n  };\n};\n","import type { Express } from \"express\";\nimport { json } from \"express\";\nimport uniq from \"lodash/uniq\";\nimport type {\n  AvailablePackageType,\n  Feed,\n  PackageType,\n} from \"@refinedev/devtools-shared\";\n\nimport type { Data } from \"./create-db\";\nimport { getFeed } from \"./feed/get-feed\";\nimport { getAllPackages } from \"./packages/get-all-packages\";\nimport { getAvailablePackages } from \"./packages/get-available-packages\";\nimport { updatePackage } from \"./packages/update-package\";\nimport { getLatestPackageData } from \"./packages/get-latest-package-data\";\nimport { getProjectIdFromPackageJson } from \"./project-id/get-project-id-from-package-json\";\nimport { updateProjectId } from \"./project-id/update-project-id\";\n\nexport const serveApi = (app: Express, db: Data) => {\n  app.use(\"/api\", json());\n\n  app.get(\"/api/connected-app\", (_, res) => {\n    res.json({ url: db.connectedApp });\n  });\n\n  app.get(\"/api/activities\", (req, res) => {\n    const { offset = 0, limit = db.activities.length } = req.query;\n\n    res.setHeader(\"x-total-count\", db.activities.length);\n\n    res.json({\n      data: db.activities.slice(Number(offset), Number(limit)),\n    });\n  });\n\n  app.get(\"/api/activities/reset\", (_, res) => {\n    db.activities = [];\n    res.json({ success: true });\n  });\n\n  app.get(\"/api/unique-trace-items\", (req, res) => {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\n      \"Access-Control-Allow-Headers\",\n      \"Origin, X-Requested-With, Content-Type, Accept\",\n    );\n\n    const traceItems = db.activities.flatMap(\n      (activity) =>\n        activity.trace?.map((t) => t.function).filter(Boolean) ?? [],\n    ) as string[];\n    const uniqueTraceItems = uniq(traceItems);\n\n    res.setHeader(\"x-total-count\", uniqueTraceItems.length);\n\n    res.json({ data: uniqueTraceItems });\n  });\n\n  let cachedInstalledPackages: PackageType[] | null = null;\n  app.get(\"/api/installed-packages\", async (req, res) => {\n    const { force } = req.query ?? {};\n\n    if (!cachedInstalledPackages || force) {\n      cachedInstalledPackages = await getAllPackages();\n    }\n\n    res.header(\"x-total-count\", `${cachedInstalledPackages.length}`);\n\n    res.json({ data: cachedInstalledPackages });\n  });\n\n  let cachedAvailablePackages: AvailablePackageType[] | null = null;\n  app.get(\"/api/available-packages\", async (_, res) => {\n    if (!cachedAvailablePackages) {\n      cachedAvailablePackages = await getAvailablePackages();\n    }\n\n    res.header(\"x-total-count\", `${cachedAvailablePackages.length}`);\n\n    res.json({ data: cachedAvailablePackages });\n  });\n\n  const cachedLatestPackages = new Map<string, any>();\n  app.get(\"/api/packages/:packageName/latest\", async (req, res) => {\n    const { packageName } = req.params ?? {};\n\n    if (!packageName) {\n      res.status(400).json({ error: \"Package name is required\" });\n      return;\n    }\n\n    if (!cachedLatestPackages.has(packageName)) {\n      const latest = await getLatestPackageData(packageName);\n      cachedLatestPackages.set(packageName, latest);\n    }\n\n    return res.json({ data: cachedLatestPackages.get(packageName) });\n  });\n\n  app.post(\"/api/packages/install\", async (req, res) => {\n    const { packages } = req.body ?? {};\n\n    if (packages?.length === 0) {\n      res.status(400).json({ error: \"Package name is required\" });\n      return;\n    }\n\n    const success = await updatePackage(packages as string[]);\n\n    if (success) {\n      cachedInstalledPackages = null;\n      cachedAvailablePackages = null;\n      res.status(200).json({ success: true });\n    } else {\n      res.status(400).json({\n        success: false,\n        error: \"Failed to update package\",\n      });\n    }\n  });\n\n  let cachedFeed: Feed | null = null;\n  app.get(\"/api/feed\", async (req, res) => {\n    if (!cachedFeed) {\n      cachedFeed = await getFeed();\n    }\n\n    res.header(\"x-total-count\", `${cachedFeed.length}`);\n\n    res.json({ data: cachedFeed });\n  });\n\n  app.get(\"/api/project-id/status\", async (_, res) => {\n    const CODES = {\n      OK: 0,\n      NOT_FOUND: 1,\n      ERROR: 2,\n    };\n\n    const projectId = await getProjectIdFromPackageJson();\n\n    if (projectId) {\n      res.status(200).json({ projectId, status: CODES.OK });\n      return;\n    }\n    if (projectId === false) {\n      res.status(200).json({ projectId: null, status: CODES.NOT_FOUND });\n      return;\n    }\n    res.status(200).json({ projectId: null, status: CODES.ERROR });\n    return;\n  });\n\n  app.post(\"/api/project-id/update\", async (req, res) => {\n    const { projectId } = req.body ?? {};\n\n    if (!projectId) {\n      res.status(400).json({ error: \"Project ID is required\" });\n      return;\n    }\n\n    const success = await updateProjectId(projectId);\n\n    if (success) {\n      res.status(200).json({ success: true });\n      return;\n    }\n    res.status(500).json({\n      success: false,\n      error: \"Failed to update project ID\",\n    });\n    return;\n  });\n};\n","import fetch from \"node-fetch\";\nimport matter from \"gray-matter\";\nimport { marked } from \"marked\";\nimport sanitizeHtml from \"sanitize-html\";\n\nimport type { Feed, FeedSection } from \"@refinedev/devtools-shared\";\n\nimport { FEED_MD_URL } from \"src/constants\";\n\nconst splitSections = (feed: string) => {\n  const sections = feed.split(\"---section\");\n\n  return sections.slice(1).map((section) => `---section${section}`);\n};\n\nconst contentToHtml = (content: string) => {\n  const renderer = new marked.Renderer();\n  renderer.link = function (...args) {\n    const out = marked.Renderer.prototype.link.apply(this, args);\n    return out.replace(/^<a/, '<a target=\"_blank\" rel=\"noopener noreferrer\"');\n  };\n\n  const html = marked(content, {\n    renderer,\n  });\n\n  return sanitizeHtml(html, {\n    allowedTags: sanitizeHtml.defaults.allowedTags.concat([\"img\"]),\n    allowedAttributes: {\n      ...sanitizeHtml.defaults.allowedAttributes,\n      img: [\"src\"],\n    },\n  });\n};\n\nconst parseSection = (section: string): FeedSection => {\n  const parsed = matter(section.replace(\"---section\", \"---\"));\n\n  return {\n    ...parsed.data,\n    content: contentToHtml(parsed.content),\n  } as FeedSection;\n};\n\nconst fetchFeed = async () => {\n  try {\n    const response = await fetch(FEED_MD_URL);\n\n    return response.text();\n  } catch (_) {\n    return \"\";\n  }\n};\n\nexport const getFeed = async (): Promise<Feed> => {\n  try {\n    const rawContent = await fetchFeed();\n    const rawSections = splitSections(rawContent);\n    const sections = rawSections.map(parseSection);\n\n    return sections;\n  } catch (e) {\n    return [];\n  }\n};\n","import fs from \"fs\";\nimport { getInstalledPackageJSONPath } from \"./get-installed-package-json-path\";\n\nexport const getInstalledPackageData = async (packageName: string) => {\n  try {\n    const packagePath = await getInstalledPackageJSONPath(packageName);\n\n    if (!packagePath) {\n      return null;\n    }\n\n    const parsed = JSON.parse(\n      fs.readFileSync(packagePath, { encoding: \"utf-8\" }),\n    );\n\n    return {\n      name: parsed.name,\n      version: parsed.version,\n      description: parsed.description,\n    };\n  } catch (e) {\n    return null;\n  }\n};\n","import path from \"path\";\nimport globby from \"globby\";\n\nexport const getInstalledPackageJSONPath = async (packageName: string) => {\n  try {\n    const filesFromGlobbySearch = await globby(\n      `node_modules/${packageName}/package.json`,\n      {\n        onlyFiles: true,\n      },\n    );\n\n    let fileFromModule: string | null = null;\n\n    try {\n      const pkgJsonPath = require.resolve(\n        path.join(packageName, \"package.json\"),\n      );\n      if (pkgJsonPath) {\n        fileFromModule = pkgJsonPath;\n      }\n    } catch (err) {\n      //\n    }\n\n    return (\n      [\n        ...filesFromGlobbySearch,\n        ...(fileFromModule ? [fileFromModule] : []),\n      ][0] ?? null\n    );\n  } catch (err) {\n    return null;\n  }\n};\n","import path from \"path\";\nimport { readJSON } from \"fs-extra\";\n\nexport const getPackagesFromPackageJSON = async (\n  projectPath: string = process.cwd(),\n) => {\n  const packageJson = await readJSON(path.join(projectPath, \"package.json\"), {\n    encoding: \"utf-8\",\n  });\n\n  const refinePackages = Object.keys(packageJson.dependencies).filter(\n    (packageName) => packageName.startsWith(\"@refinedev/\"),\n  );\n\n  return refinePackages;\n};\n","export const getChangelog = (packageName: string) => {\n  return packageName.replace(\"@refinedev/\", \"https://c.refine.dev/\");\n};\n","export const getDocumentation = (packageName: string) => {\n  return \"https://refine.dev/docs/api-reference/general-concepts/\";\n};\n","import type { PackageType } from \"@refinedev/devtools-shared\";\nimport { getInstalledPackageData } from \"./get-installed-package-data\";\nimport { getPackagesFromPackageJSON } from \"./get-packages-from-package-json\";\nimport { getChangelog } from \"./get-changelog\";\nimport { getDocumentation } from \"./get-documentation\";\n\nexport const getAllPackages = async (projectPath?: string) => {\n  try {\n    const refinePackages = await getPackagesFromPackageJSON(projectPath);\n    const installedVersions = await Promise.all(\n      refinePackages.map(async (packageName) => {\n        const currentInfo = await getInstalledPackageData(packageName);\n\n        return {\n          name: packageName,\n          currentVersion: currentInfo?.version,\n          description: currentInfo?.description,\n          changelog: getChangelog(packageName),\n          documentation: getDocumentation(packageName),\n        } as PackageType;\n      }),\n    );\n\n    return installedVersions;\n  } catch (error) {\n    return [];\n  }\n};\n","import type { AvailablePackageType } from \"@refinedev/devtools-shared\";\nimport dedent from \"dedent\";\nimport { getPackagesFromPackageJSON } from \"./get-packages-from-package-json\";\n\nexport const AVAILABLE_PACKAGES: AvailablePackageType[] = [\n  {\n    name: \"@refinedev/ably\",\n    description: \"Ably integration for Refine\",\n    install: \"npm install @refinedev/ably\",\n    usage: dedent(\n      `\n            import { liveProvider, Ably } from \"@refinedev/ably\";\n\n            export const ablyClient = new Ably.Realtime(\"YOUR_API_TOKEN\");\n\n            const App = () => {\n                return (\n                    <Refine\n                        liveProvider={liveProvider(ablyClient)}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n        `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/airtable\",\n    description: \"Airtable integration for Refine\",\n    install: \"npm install @refinedev/airtable\",\n    usage: dedent(\n      `\n            import dataProvider from \"@refinedev/airtable\";\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(\"API_KEY\", \"BASE_ID\")}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/antd\",\n    description: \"Ant Design integration for Refine\",\n    install: \"npm install @refinedev/antd antd\",\n    usage: dedent(\n      `\n            import { ThemedLayout } from \"@refinedev/antd\";\n\n            import \"@refinedev/antd/dist/reset.css\";\n\n            const App = () => {\n                return (\n                    <Refine\n                        /* ... */\n                    >\n                        <ThemedLayout>\n                            {/* ... */}\n                        </ThemedLayout>\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/appwrite\",\n    description: \"Appwrite integration for Refine\",\n    install: \"npm install @refinedev/appwrite\",\n    usage: dedent(\n      `\n            import { dataProvider, liveProvider, Account, Appwrite, Storage } from \"@refinedev/appwrite\";\n\n            const appwriteClient = new Appwrite();\n            appwriteClient.setEndpoint(\"API_URL\").setProject(\"PROJECT_ID\");\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(appwriteClient, { databaseId: \"default\" })}\n                        liveProvider={liveProvider(appwriteClient, { databaseId: \"default\" })}\n                        /* ... */\n                    >\n                        <ThemedLayout>\n                            {/* ... */}\n                        </ThemedLayout>\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/chakra-ui\",\n    description: \"Chakra UI integration for Refine\",\n    install:\n      \"npm install @refinedev/chakra-ui @chakra-ui/react @emotion/react @emotion/styled framer-motion @tabler/icons-react\",\n    usage: dedent(\n      `\n            import { ThemedLayout } from \"@refinedev/chakra-ui\";\n            import { ChakraProvider } from \"@chakra-ui/react\";\n\n            const App = () => {\n                return (\n                        <ChakraProvider>\n                        <Refine\n                            /* ... */\n                        >\n                            <ThemedLayout>\n                                {/* ... */}\n                            </ThemedLayout>\n                        </Refine>\n                    </ChakraProvider>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/graphql\",\n    description: \"GraphQL integration for Refine\",\n    install: \"npm install @refinedev/graphql\",\n    usage: dedent(\n      `\n            import dataProvider, { GraphQLClient } from \"@refinedev/graphql\";\n\n            const client = new GraphQLClient(\"YOUR_API_URL\");\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(client)}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/hasura\",\n    description: \"GraphQL integration for Refine\",\n    install: \"npm install @refinedev/hasura\",\n    usage: dedent(\n      `\n            import dataProvider, { GraphQLClient } from \"@refinedev/hasura\";\n\n            const client = new GraphQLClient(\"HASURA_API_URL\", {\n                headers: {\n                    \"x-hasura-role\": \"public\",\n                },\n            });\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(client)}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/inferencer\",\n    description: \"Auto generate views based on your APIs with Refine\",\n    install: \"npm install @refinedev/inferencer\",\n    usage: dedent(\n      `\n        import { AntdInferencer } from \"@refinedev/inferencer/antd\";\n\n        const App = () => {\n            return (\n                <Refine\n                    /* ... */\n                >\n                    <AntdInferencer action=\"list\" resource=\"posts\" />\n                </Refine>\n            );\n        };\n        `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/kbar\",\n    description: \"Command palette integration with kbar for Refine\",\n    install: \"npm install @refinedev/kbar\",\n    usage: dedent(\n      `\n            import { RefineKbar, RefineKbarProvider } from \"@refinedev/kbar\";\n\n            const App = () => {\n                return (\n                    <RefineKbarProvider>\n                        <Refine\n                            /* ... */\n                        >\n                            <RefineKbar />\n                        </Refine>\n                    </RefineKbarProvider>\n                );\n            };\n        `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/mantine\",\n    description: \"Mantine UI integration for Refine\",\n    install:\n      \"npm install @refinedev/mantine @refinedev/react-table @mantine/core @mantine/hooks @mantine/form @mantine/notifications @emotion/react @tabler/icons-react\",\n    usage: dedent(\n      `\n            import { ThemedLayout } from \"@refinedev/mantine\";\n            import { MantineProvider } from \"@mantine/core\";\n\n            const App = () => {\n                return (\n                    <MantineProvider>\n                        <Refine\n                            /* ... */\n                        >\n                            <ThemedLayout>\n                                {/* ... */}\n                            </ThemedLayout>\n                        </Refine>\n                    </MantineProvider>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/medusa\",\n    description: \"Medusa store integration for Refine\",\n    install: \"npm install @refinedev/medusa\",\n    usage: dedent(\n      `\n            import dataProvider, { authProvider } from \"@refinedev/medusa\";\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(\"API_URL\")}\n                        authProvider={authProvider(\"API_URL\")}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/mui\",\n    description: \"Material UI integration for Refine\",\n    install:\n      \"npm install @refinedev/mui @refinedev/react-hook-form @mui/material @mui/lab @mui/x-data-grid @emotion/react @emotion/styled react-hook-form\",\n    usage: dedent(\n      `\n            import { ThemedLayout } from \"@refinedev/mui\";\n\n            import CssBaseline from \"@mui/material/CssBaseline\";\n            import GlobalStyles from \"@mui/material/GlobalStyles\";\n            import { ThemeProvider } from \"@mui/material/styles\";\n\n            const App = () => {\n                return (\n                    <ThemeProvider>\n                        <CssBaseline />\n                        <GlobalStyles styles={{ html: { WebkitFontSmoothing: \"auto\" } }} />\n                        <Refine\n                            /* ... */\n                        >\n                            <ThemedLayout>\n                                {/* ... */}\n                            </ThemedLayout>\n                        </Refine>\n                    </ThemeProvider>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/nestjs-query\",\n    description: \"NestJS Query data provider integration for Refine\",\n    install: \"npm install @refinedev/nestjs-query graphql-ws\",\n    usage: dedent(\n      `\n            import dataProvider, {\n                GraphQLClient,\n                liveProvider,\n            } from \"@refinedev/nestjs-query\";\n\n            import { createClient } from \"graphql-ws\";\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(new GraphQLClient( \"API_URL\" ))}\n                        liveProvider={liveProvider(createClient({ url: \"WS_URL\" }))}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/nestjsx-crud\",\n    description: \"NestJSX CRUD data provider integration for Refine\",\n    install: \"npm install @refinedev/nestjsx-crud\",\n    usage: dedent(\n      `\n            import dataProvider from \"@refinedev/nestjsx-crud\";\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(\"API_URL\")}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/react-hook-form\",\n    description: \"React Hook Form integration for Refine\",\n    install: \"npm install @refinedev/react-hook-form react-hook-form\",\n    usage: dedent(\n      `\n            import { useForm } from \"@refinedev/react-hook-form\";\n\n            const EditPost = () => {\n                const {\n                    register,\n                    handleSubmit,\n                    formState,\n                    refineCore,\n                } = useForm({\n                    refineCoreProps: {\n                        resource: \"posts\",\n                        id: \"1\",\n                    },\n                });\n\n                return /* ... */\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/react-table\",\n    description: \"Tanstack React Table integration for Refine\",\n    install: \"npm install @refinedev/react-table @tanstack/react-table\",\n    usage: dedent(\n      `\n            import { useTable } from \"@refinedev/react-table\";\n\n            import { ColumnDef, flexRender } from \"@tanstack/react-table\";\n\n            const EditPost = () => {\n                const columns = React.useMemo<ColumnDef<IPost>[]>(\n                    () => [\n                        {\n                            id: \"id\",\n                            header: \"ID\",\n                            accessorKey: \"id\",\n                        },\n                        {\n                            id: \"title\",\n                            header: \"Title\",\n                            accessorKey: \"title\",\n                            meta: {\n                                filterOperator: \"contains\",\n                            },\n                        },\n                ], []);\n\n                const tableInstance = useTable({\n                    columns,\n                    refineCoreProps: {\n                        resource: \"posts\",\n                    }\n                });\n\n                return /* ... */\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/simple-rest\",\n    description: \"Data provider integration for REST APIs with Refine\",\n    install: \"npm install @refinedev/simple-rest\",\n    usage: dedent(\n      `\n            import dataProvider from \"@refinedev/simple-rest\";\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(\"API_URL\")}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/supabase\",\n    description:\n      \"Data provider and live provider integrations for Supabase with Refine\",\n    install: \"npm install @refinedev/supabase\",\n    usage: dedent(\n      `\n            import { dataProvider, liveProvider, createClient } from \"@refinedev/supabase\";\n\n            const supabaseClient = createClient(\"SUPABASE_URL\", \"SUPABASE_KEY\");\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={dataProvider(supabaseClient)}\n                        liveProvider={liveProvider(supabaseClient)}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/strapi\",\n    description: \"Strapi integration of Refine\",\n    install: \"npm install @refinedev/strapi axios\",\n    usage: dedent(\n      `\n            import { DataProvider, AuthHelper } from \"@refinedev/strapi\";\n\n            const axiosInstance = axios.create();\n            const strapiAuthHelper = AuthHelper(\"API_URL\");\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={DataProvider(\"API_URL\", axiosInstance)}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n  {\n    name: \"@refinedev/strapi-v4\",\n    description: \"StrapiV4 integration of Refine\",\n    install: \"npm install @refinedev/strapi-v4 axios\",\n    usage: dedent(\n      `\n            import { DataProvider, AuthHelper } from \"@refinedev/strapi-v4\";\n\n            const axiosInstance = axios.create();\n            const strapiAuthHelper = AuthHelper(\"API_URL\");\n\n            const App = () => {\n                return (\n                    <Refine\n                        dataProvider={DataProvider(\"API_URL\", axiosInstance)}\n                        /* ... */\n                    >\n                        {/* ... */}\n                    </Refine>\n                );\n            };\n            `.trim(),\n    ),\n  },\n];\n\nexport const getAvailablePackages = async (projectPath?: string) => {\n  const installedRefinePackages = await getPackagesFromPackageJSON(projectPath);\n\n  return AVAILABLE_PACKAGES.filter(\n    (p) => !installedRefinePackages.includes(p.name),\n  );\n};\n","import { detect } from \"package-manager-detector\";\nimport execa from \"execa\";\n\nexport const updatePackage = async (\n  packages: string[],\n  projectPath: string = process.cwd(),\n) => {\n  try {\n    const detected = await detect({ cwd: projectPath });\n    const [pm] = (detected?.agent || \"npm\").split(\"@\");\n\n    const { failed } = await execa(pm, [\n      \"install\",\n      ...packages.map((p) => `${p}@latest`),\n    ]);\n\n    return !failed;\n  } catch (error) {\n    return false;\n  }\n};\n","import execa from \"execa\";\n\nexport const getLatestPackageData = async (\n  packageName: string,\n): Promise<{ name: string; version?: string }> => {\n  try {\n    const { stdout } = await execa(\"npm\", [\n      \"view\",\n      packageName,\n      \"name\",\n      \"version\",\n      \"--json\",\n    ]);\n    const parsed = JSON.parse(stdout);\n\n    return parsed;\n  } catch (e) {\n    return { name: packageName };\n  }\n};\n","import { readJSON } from \"fs-extra\";\nimport path from \"path\";\n\nexport const getProjectIdFromPackageJson = async (\n  projectPath = process.cwd(),\n) => {\n  try {\n    const packageJson = await readJSON(path.join(projectPath, \"package.json\"), {\n      encoding: \"utf-8\",\n    });\n\n    const projectId = packageJson?.refine?.projectId as string;\n\n    if (projectId) {\n      return projectId;\n    }\n\n    return false;\n  } catch (e) {\n    return null;\n  }\n};\n","import execa from \"execa\";\n\nexport const setProjectIdToPackageJson = async (\n  projectId: string,\n  projectPath = process.cwd(),\n) => {\n  try {\n    execa.sync(\"npm\", [\"pkg\", \"set\", `refine.projectId=${projectId}`], {\n      cwd: projectPath,\n    });\n    return true;\n  } catch (e) {\n    return null;\n  }\n};\n","import execa from \"execa\";\nimport path from \"path\";\n\nexport const setProjectIdToRefineComponent = async (\n  projectId: string,\n  projectPath = process.cwd(),\n) => {\n  try {\n    const jscodeshiftExecutable = require.resolve(\".bin/jscodeshift\");\n\n    const execution = execa.sync(\n      jscodeshiftExecutable,\n      [\n        \"./\",\n        \"--extensions=ts,tsx,js,jsx\",\n        \"--parser=tsx\",\n        `--transform=${path.resolve(\n          path.join(__dirname, \"..\", \"src\", \"project-id\", \"transform.ts\"),\n        )}`,\n        \"--ignore-pattern=**/.cache/**\",\n        \"--ignore-pattern=**/node_modules/**\",\n        \"--ignore-pattern=**/build/**\",\n        \"--ignore-pattern=**/dist/**\",\n        \"--ignore-pattern=**/.next/**\",\n        `--__projectId=${projectId}`,\n      ],\n      {\n        cwd: projectPath,\n        timeout: 1000 * 10,\n      },\n    );\n\n    if (execution.stderr) {\n      console.error(execution.stderr);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return;\n};\n","import { setProjectIdToPackageJson } from \"./set-project-id-to-package-json\";\nimport { setProjectIdToRefineComponent } from \"./set-project-id-to-refine-component\";\n\nexport const updateProjectId = async (\n  projectId: string,\n  projectPath = process.cwd(),\n) => {\n  try {\n    await Promise.all([\n      setProjectIdToPackageJson(projectId, projectPath),\n      setProjectIdToRefineComponent(projectId, projectPath),\n    ]);\n\n    return true;\n  } catch (_) {\n    return false;\n  }\n};\n","import path from \"path\";\nimport { readJSON, writeJSON } from \"fs-extra\";\nimport { createProxyMiddleware, fixRequestBody } from \"http-proxy-middleware\";\nimport {\n  REFINE_API_URL,\n  AUTH_SERVER_URL,\n  AUTH_CALLBACK_API_PATH,\n  AUTH_CALLBACK_UI_PATH,\n  AUTH_TRIGGER_API_PATH,\n} from \"./constants\";\nimport { getProjectIdFromPackageJson } from \"./project-id/get-project-id-from-package-json\";\n\nimport type { Express, RequestHandler } from \"express\";\n\nconst persistPath = path.join(__dirname, \"..\", \".persist.json\");\n\nconst saveAuth = async (token?: string, jwt?: string) => {\n  try {\n    await writeJSON(persistPath, { token, jwt });\n  } catch (error) {\n    //\n  }\n};\n\nconst loadAuth = async () => {\n  try {\n    return (await readJSON(persistPath)) as { token?: string; jwt?: string };\n  } catch (error) {\n    //\n  }\n\n  return {};\n};\n\nexport const serveProxy = async (app: Express) => {\n  let { token, jwt } = await loadAuth();\n\n  const authProxy = createProxyMiddleware({\n    target: `${AUTH_SERVER_URL}/api/.auth`,\n    secure: false,\n    changeOrigin: true,\n    logger: __DEVELOPMENT__ ? console : undefined,\n    on: {\n      proxyReq: fixRequestBody,\n      proxyRes: (_proxyRes, req) => {\n        if (req.url?.includes(\"self-service/logout/api\")) {\n          token = undefined;\n          jwt = undefined;\n          saveAuth();\n        }\n      },\n    },\n  });\n\n  const refineProxy = createProxyMiddleware({\n    target: `${REFINE_API_URL}/.refine`,\n    secure: false,\n    changeOrigin: true,\n    logger: __DEVELOPMENT__ ? console : undefined,\n    on: {\n      proxyReq: fixRequestBody,\n    },\n  });\n\n  let currentProjectId: string | null | false = null;\n  const projectIdAppender: RequestHandler = async (req, _res, next) => {\n    if (!currentProjectId) {\n      currentProjectId = await getProjectIdFromPackageJson();\n    }\n\n    if (currentProjectId) {\n      req.headers[\"x-project-id\"] = currentProjectId;\n    }\n\n    next();\n  };\n\n  const appendAuth: RequestHandler = async (req, _res, next) => {\n    if (token) {\n      req.headers[\"X-Session-Token\"] = token;\n    }\n    if (req.url?.includes(\"self-service/logout/api\")) {\n      req.body = {\n        session_token: token,\n      };\n\n      req.headers[\"Content-Length\"] = Buffer.byteLength(\n        JSON.stringify(req.body),\n      ).toString();\n    }\n\n    next();\n  };\n\n  const appendJwt: RequestHandler = async (req, _res, next) => {\n    if (jwt) {\n      req.headers[\"Authorization\"] = `Bearer ${jwt}`;\n      delete req.headers[\"cookie\"];\n    }\n\n    next();\n  };\n\n  const loginCallback: RequestHandler = async (req, res, _next) => {\n    const query = req.query;\n\n    if (query.token && query.jwt) {\n      token = query.token as string;\n      jwt = query.jwt as string;\n      await saveAuth(query.token as string, query.jwt as string);\n    }\n\n    const errorParams = new URLSearchParams();\n    if (query.error) {\n      errorParams.set(\"error\", query.error as string);\n    }\n    if (query.code) {\n      errorParams.set(\"code\", query.code as string);\n    }\n\n    res.redirect(`${AUTH_CALLBACK_UI_PATH}?${errorParams.toString()}`);\n  };\n\n  const loginTrigger: RequestHandler = async (req, res, _next) => {\n    const query = req.query;\n    const protocol = req.secure ? \"https\" : \"http\";\n    const host = req.headers.host;\n\n    if (!host) {\n      res.redirect(`${AUTH_CALLBACK_API_PATH}?error=Missing%20Host`);\n      return;\n    }\n\n    const callbackUrl = `${protocol}://${host}${AUTH_CALLBACK_API_PATH}`;\n\n    const params = new URLSearchParams({\n      provider: query.provider as string,\n      returnUrl: encodeURIComponent(callbackUrl),\n    });\n\n    res.redirect(`${AUTH_SERVER_URL}/login?${params.toString()}`);\n  };\n\n  app.use(AUTH_TRIGGER_API_PATH, loginTrigger);\n\n  app.use(AUTH_CALLBACK_API_PATH, loginCallback);\n\n  app.use(\"/api/.auth\", appendAuth, authProxy);\n\n  app.use(\"/api/.refine\", projectIdAppender, appendJwt, refineProxy);\n};\n","import type { Express } from \"express\";\nimport path from \"path\";\n\nexport const serveOpenInEditor = (app: Express, basePath: string) => {\n  app.get(\"/open-in-editor/*\", (req, res) => {\n    const { line, column } = req.query;\n\n    const filePath = req.path.replace(\"/open-in-editor\", \"\");\n\n    const vscodeUrl = `vscode://file/${path.join(basePath, filePath)}?${\n      line ? `line=${line}` : \"\"\n    }${column ? `&column=${column}` : \"\"}`;\n\n    res.redirect(vscodeUrl);\n  });\n};\n","#!/usr/bin/env node\nimport { server } from \"./index\";\n\nserver().catch(() => 0);\n"],"mappings":"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","names":["import_express","import_devtools_shared","express","path","dotenv","server","WebSocket","import_ws","import_chalk","server","http","import_express","sanitizeHtml","matter","fetch","import_path","globby","path","fs","import_path","path","dedent","execa","import_execa","execa","import_fs_extra","import_path","path","import_execa","execa","import_execa","import_path","execa","path","uniq","import_path","import_fs_extra","path","import_path","path","express","server","_"]}