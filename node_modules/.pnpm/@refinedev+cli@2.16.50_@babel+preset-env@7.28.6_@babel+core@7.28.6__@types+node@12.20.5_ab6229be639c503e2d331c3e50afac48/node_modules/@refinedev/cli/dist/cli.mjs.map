{"version":3,"sources":["../src/cli.ts","../src/components/update-warning-table/table.ts","../src/utils/spinner/index.ts","../src/utils/package/index.ts","../src/components/version-table/index.ts","../src/utils/text/index.ts","../src/commands/check-updates/index.tsx","../src/commands/check-updates/utils.ts","../src/definitions/projectTypes.ts","../src/definitions/uiFrameworks.ts","../src/definitions/package.ts","../src/utils/project/index.ts","../src/utils/resource/index.ts","../src/utils/compile/index.ts","../src/commands/add/sub-commands/resource/create-resources.ts","../src/commands/add/sub-commands/resource/get-command-root-dir.ts","../src/commands/create-resource/index.ts","../src/commands/runner/start/index.ts","../src/update-notifier/index.tsx","../src/utils/encode/index.ts","../src/utils/env/index.ts","../src/update-notifier/utils.ts","../src/commands/runner/projectScripts.ts","../src/commands/runner/runScript.ts","../src/commands/runner/utils/index.ts","../src/commands/runner/dev/index.ts","../src/commands/devtools/index.ts","../src/transformers/add-devtools-component.ts","../src/utils/swizzle/prettierFormat.ts","../src/utils/refine/index.ts","../src/commands/runner/build/index.ts","../src/commands/runner/run/index.ts","../src/commands/swizzle/index.tsx","../src/utils/swizzle/index.ts","../src/utils/swizzle/provideCliHelpers.ts","../src/index.ts","../src/utils/swizzle/import.ts","../src/utils/swizzle/appendAfterImports.ts","../src/utils/swizzle/getFileContent.ts","../src/components/swizzle-message/index.tsx","../src/utils/swizzle/codes.ts","../src/utils/swizzle/renderCodeMarkdown.ts","../src/utils/marked-terminal-renderer/index.ts","../src/utils/swizzle/parseSwizzleBlocks.ts","../src/utils/swizzle/getPathPrefix.ts","../src/commands/swizzle/install-required-packages/utils.ts","../src/commands/swizzle/install-required-packages/index.ts","../src/commands/update/index.ts","../src/commands/update/interactive/index.ts","../src/utils/array/index.ts","../src/commands/whoami/index.ts","../src/commands/add/prompt.ts","../src/commands/add/sub-commands/integration/prompt.ts","../src/commands/add/sub-commands/integration/run-transformer.ts","../src/commands/add/sub-commands/integration/utils/prettify-choice.ts","../src/commands/add/sub-commands/integration/packages/ant-design.ts","../src/commands/add/sub-commands/integration/packages/react-router.ts","../src/commands/add/sub-commands/integration/packages/index.ts","../src/commands/add/sub-commands/provider/prompt.ts","../src/commands/add/sub-commands/provider/create-providers.ts","../src/commands/add/sub-commands/provider/providers.ts","../src/commands/add/sub-commands/integration/command.ts","../src/commands/add/sub-commands/provider/command.ts","../src/commands/add/sub-commands/resource/command.ts","../src/commands/add/index.ts","../src/utils/os/index.ts","../src/telemetry/index.ts","../src/utils/announcement/index.tsx"],"sourcesContent":["#!/usr/bin/env node\nimport { Command } from \"commander\";\n\nimport figlet from \"figlet\";\n\nimport checkUpdates from \"@commands/check-updates\";\nimport createResource from \"@commands/create-resource\";\nimport { build, dev, run, start } from \"@commands/runner\";\nimport swizzle from \"@commands/swizzle\";\nimport update from \"@commands/update\";\nimport whoami from \"@commands/whoami\";\nimport devtools from \"@commands/devtools\";\nimport add from \"@commands/add\";\nimport { telemetryHook } from \"@telemetryindex\";\nimport { printAnnouncements } from \"@utils/announcement\";\nimport \"@utils/env\";\n\n// It reads and updates from package.json during build. ref: tsup.config.ts\nconst REFINE_CLI_VERSION = \"1.0.0\";\n\nconst bootstrap = () => {\n  const program = new Command();\n\n  program\n    .version(\n      `@refinedev/cli@${REFINE_CLI_VERSION}`,\n      \"-v, --version\",\n      \"Output the current version.\",\n    )\n    .description(\n      figlet.textSync(\"refine\", {\n        font: \"Isometric1\",\n        horizontalLayout: \"full\",\n        verticalLayout: \"full\",\n        whitespaceBreak: true,\n      }),\n    )\n    .usage(\"<command> [options]\")\n    .helpOption(\"-h, --help\", \"Output usage information.\");\n\n  // load commands\n  swizzle(program);\n  createResource(program);\n  update(program);\n  dev(program);\n  build(program);\n  start(program);\n  run(program);\n  checkUpdates(program);\n  whoami(program);\n  devtools(program);\n  add(program);\n\n  program.hook(\"preAction\", async (thisCommand) => {\n    if (thisCommand.args.includes(\"dev\")) {\n      await printAnnouncements();\n    }\n  });\n\n  program.hook(\"postAction\", (thisCommand) => {\n    const command = thisCommand.args[0];\n\n    if ([\"run\"].includes(command)) return;\n\n    telemetryHook();\n  });\n\n  program.parse(process.argv);\n\n  if (!process.argv.slice(2).length) {\n    program.outputHelp();\n  }\n};\n\nbootstrap();\n","import type { RefinePackageInstalledVersionData } from \"../../definitions/package\";\nimport chalk from \"chalk\";\nimport center from \"center-align\";\nimport {\n  getDependencies,\n  getPreferedPM,\n  getScripts,\n} from \"../../utils/package\";\nimport { getVersionTable } from \"../version-table\";\n\nexport interface UpdateWarningTableParams {\n  data: RefinePackageInstalledVersionData[];\n}\n\nexport const printUpdateWarningTable = async (\n  params: UpdateWarningTableParams,\n) => {\n  const data = params?.data;\n  const tableHead = Object.keys(data?.[0] || {});\n  if (!data || !tableHead.length) return;\n\n  const { table, width } = getVersionTable(data);\n  console.log();\n  console.log(center(\"Update Available\", width));\n  console.log();\n  console.log(\n    `- ${chalk.yellow(\n      chalk.bold(\"Current\"),\n    )}: The version of the package that is currently installed`,\n  );\n  console.log(\n    `- ${chalk.yellow(\n      chalk.bold(\"Wanted\"),\n    )}: The maximum version of the package that satisfies the semver range specified in \\`package.json\\``,\n  );\n  console.log(\n    `- ${chalk.yellow(\n      chalk.bold(\"Latest\"),\n    )}: The latest version of the package available on npm`,\n  );\n  console.log(table);\n  console.log(\n    center(\n      `To update ${chalk.bold(\"`Refine`\")} packages with wanted version`,\n      width,\n    ),\n  );\n  console.log(\n    center(\n      ` Run the following command: ${chalk.yellowBright(\n        await getInstallCommand(),\n      )}`,\n      width,\n    ),\n  );\n  console.log();\n};\n\nexport const getInstallCommand = async () => {\n  const fallbackCommand = \"npx @refinedev/cli update\";\n\n  const dependencies = getDependencies();\n  const scriptKeys = Object.keys(getScripts());\n\n  const hasCli = dependencies.includes(\"@refinedev/cli\");\n  const hasScript = scriptKeys.includes(\"refine\");\n\n  if (!hasCli && !hasScript) {\n    return fallbackCommand;\n  }\n\n  const pm = await getPreferedPM();\n\n  if (hasScript) {\n    return `${pm.name} run refine update`;\n  }\n\n  if (hasCli) {\n    return \"npx refine update\";\n  }\n\n  return fallbackCommand;\n};\n","import ora from \"ora\";\n\nconst spinner = async <T>(fn: () => Promise<T>, message: string) => {\n  const spinner = ora({\n    color: \"cyan\",\n    text: message,\n  }).start();\n  const result = await fn();\n  spinner.stop();\n  return result;\n};\n\nexport default spinner;\n","import spinner from \"@utils/spinner\";\nimport execa from \"execa\";\nimport { existsSync, pathExists, readFileSync, readJSON } from \"fs-extra\";\nimport globby from \"globby\";\nimport path from \"path\";\nimport preferredPM from \"preferred-pm\";\nimport type { PackageJson } from \"../../definitions/package\";\n\nexport const getPackageJson = (): PackageJson => {\n  if (!existsSync(\"package.json\")) {\n    console.error(\"âŒ `package.json` not found.\");\n    throw new Error(\"./package.json not found\");\n  }\n\n  return JSON.parse(readFileSync(\"package.json\", \"utf8\"));\n};\n\nexport const getDependencies = () => {\n  const packageJson = getPackageJson();\n  return Object.keys(packageJson.dependencies || {});\n};\n\nexport const getDependenciesWithVersion = () => {\n  const packageJson = getPackageJson();\n  return packageJson?.dependencies || {};\n};\n\nexport const getDevDependencies = () => {\n  const packageJson = getPackageJson();\n  return Object.keys(packageJson.devDependencies || {});\n};\n\nexport const getAllDependencies = () => {\n  return [...getDependencies(), ...getDependencies()];\n};\n\nexport const getScripts = () => {\n  const packageJson = getPackageJson();\n  return packageJson?.scripts || {};\n};\n\nexport const getInstalledRefinePackages = async () => {\n  try {\n    const execution = await execa(\"npm\", [\"ls\", \"--depth=0\", \"--json\"], {\n      reject: false,\n    });\n\n    const dependencies = JSON.parse(execution.stdout)?.dependencies || {};\n    const refineDependencies = Object.keys(dependencies).filter(\n      (dependency) =>\n        dependency.startsWith(\"@refinedev\") ||\n        dependency.startsWith(\"@pankod/refine-\"),\n    );\n\n    const normalize: {\n      name: string;\n      version: string;\n    }[] = [];\n\n    for (const dependency of refineDependencies) {\n      const version = dependencies[dependency].version;\n      normalize.push({\n        name: dependency,\n        version,\n      });\n    }\n\n    return normalize;\n  } catch (error) {\n    return Promise.resolve(null);\n  }\n};\n\nexport const getInstalledRefinePackagesFromNodeModules = async () => {\n  const REFINE_PACKAGES = [\"ably\", \"airtable\", \"antd\", \"appwrite\", \"chakra-ui\", \"codemod\", \"core\", \"devtools\", \"devtools-internal\", \"devtools-server\", \"devtools-shared\", \"devtools-ui\", \"graphql\", \"hasura\", \"inferencer\", \"kbar\", \"mantine\", \"medusa\", \"mui\", \"nestjs-query\", \"nestjsx-crud\", \"nextjs-router\", \"react-hook-form\", \"react-router\", \"react-table\", \"refine-ui\", \"remix-router\", \"rest\", \"shared\", \"simple-rest\", \"strapi\", \"strapi-v4\", \"supabase\"];\n\n  try {\n    const packagesFromGlobbySearch = await globby(\"node_modules/@refinedev/*\", {\n      onlyDirectories: true,\n    });\n\n    const packageDirsFromModules = REFINE_PACKAGES.flatMap((pkg) => {\n      try {\n        const pkgPath = require.resolve(\n          path.join(\"@refinedev\", pkg, \"package.json\"),\n        );\n\n        return [path.dirname(pkgPath)];\n      } catch (err) {\n        return [];\n      }\n    });\n\n    const refinePackages: Array<{\n      name: string;\n      path: string;\n      version: string;\n    }> = [];\n\n    await Promise.all(\n      [...packageDirsFromModules, ...packagesFromGlobbySearch].map(\n        async (packageDir) => {\n          const hasPackageJson = await pathExists(`${packageDir}/package.json`);\n          if (hasPackageJson) {\n            const packageJson = await readJSON(`${packageDir}/package.json`);\n\n            refinePackages.push({\n              name: packageJson.name,\n              version: packageJson.version,\n              path: packageDir,\n            });\n          }\n        },\n      ),\n    );\n\n    return refinePackages;\n  } catch (err) {\n    return [];\n  }\n};\n\nexport const isPackageHaveRefineConfig = async (packagePath: string) => {\n  return await pathExists(`${packagePath}/refine.config.js`);\n};\n\nexport const pmCommands = {\n  npm: {\n    add: [\"install\", \"--save\"],\n    addDev: [\"install\", \"--save-dev\"],\n    outdatedJson: [\"outdated\", \"--json\"],\n    install: [\"install\"],\n  },\n  yarn: {\n    add: [\"add\"],\n    addDev: [\"add\", \"-D\"],\n    outdatedJson: [\"outdated\", \"--json\"],\n    install: [\"install\"],\n  },\n  pnpm: {\n    add: [\"add\"],\n    addDev: [\"add\", \"-D\"],\n    outdatedJson: [\"outdated\", \"--format\", \"json\"],\n    install: [\"install\"],\n  },\n  bun: {\n    add: [\"add\"],\n    addDev: [\"add\", \"--dev\"],\n    outdatedJson: [\"outdated\", \"--format\", \"json\"],\n    install: [\"install\"],\n  },\n};\n\nexport const getPreferedPM = async () => {\n  const pm = await spinner(\n    () => preferredPM(process.cwd()),\n    \"Getting package manager...\",\n  );\n\n  if (!pm) {\n    throw new Error(\"Package manager not found.\");\n  }\n\n  return pm;\n};\n\nexport const installPackages = async (\n  packages: string[],\n  type: \"all\" | \"add\" = \"all\",\n  successMessage = \"All `Refine` packages updated  ðŸŽ‰\",\n) => {\n  const pm = await getPreferedPM();\n\n  try {\n    const installCommand =\n      type === \"all\" ? pmCommands[pm.name].install : pmCommands[pm.name].add;\n\n    const execution = execa(pm.name, [...installCommand, ...packages], {\n      stdio: \"inherit\",\n    });\n\n    execution.on(\"message\", (message) => {\n      console.log(message);\n    });\n\n    execution.on(\"error\", (error) => {\n      console.log(error);\n    });\n\n    execution.on(\"exit\", (exitCode) => {\n      if (exitCode === 0) {\n        console.log(successMessage);\n        return;\n      }\n\n      console.log(`Application exited with code ${exitCode}`);\n    });\n  } catch (error: any) {\n    throw new Error(error);\n  }\n};\n\nexport const installPackagesSync = async (packages: string[]) => {\n  const pm = await getPreferedPM();\n\n  try {\n    const installCommand = pmCommands[pm.name].add;\n\n    const execution = execa.sync(pm.name, [...installCommand, ...packages], {\n      stdio: \"inherit\",\n    });\n\n    if (execution.failed || execution.exitCode !== 0) {\n      throw new Error(execution.stderr);\n    }\n\n    return execution;\n  } catch (error: any) {\n    throw new Error(error);\n  }\n};\n\nexport interface PackageNameAndVersion {\n  name: string;\n  version: string | null;\n}\n\nexport const parsePackageNameAndVersion = (\n  str: string,\n): PackageNameAndVersion => {\n  const versionStartIndex = str.lastIndexOf(\"@\");\n\n  if (versionStartIndex <= 0) {\n    return {\n      name: str,\n      version: null,\n    };\n  }\n\n  return {\n    name: str.slice(0, versionStartIndex),\n    version: str.slice(versionStartIndex + 1),\n  };\n};\n\nexport const getRefineProjectId = () => {\n  const packageJson = getPackageJson();\n\n  return packageJson?.refine?.projectId;\n};\n\nexport const isDevtoolsInstalled = async () => {\n  const installedPackages = await getInstalledRefinePackagesFromNodeModules();\n\n  return installedPackages.some((pkg) => pkg.name === \"@refinedev/devtools\");\n};\n\nexport const getNotInstalledPackages = (packages: string[]) => {\n  const dependencies = getDependencies();\n\n  return packages.filter((pkg) => !dependencies.includes(pkg));\n};\n\nexport const installMissingPackages = async (packages: string[]) => {\n  console.log(\"ðŸŒ± Checking dependencies...\");\n\n  const missingPackages = getNotInstalledPackages(packages);\n\n  if (missingPackages.length > 0) {\n    console.log(`ðŸŒ± Installing ${missingPackages.join(\", \")}`);\n\n    await installPackagesSync(missingPackages);\n\n    console.log(\"ðŸŽ‰ Installation complete...\");\n  } else {\n    console.log(\"ðŸŽ‰ All required packages are already installed\");\n  }\n};\n\nexport const hasIncomatiblePackages = (packages: string[]): boolean => {\n  const allDependencies = getAllDependencies();\n\n  const incompatiblePackages = packages.filter((pkg) =>\n    allDependencies.includes(pkg),\n  );\n\n  if (incompatiblePackages.length > 0) {\n    console.log(\n      `ðŸš¨ This feature doesn't support ${incompatiblePackages.join(\n        \", \",\n      )} package.`,\n    );\n    return true;\n  }\n\n  return false;\n};\n\nexport const getAllVersionsOfPackage = async (\n  packageName: string,\n): Promise<string[]> => {\n  const pm = \"npm\";\n\n  const { stdout, timedOut } = await execa(\n    pm,\n    [\"view\", packageName, \"versions\", \"--json\"],\n    {\n      reject: false,\n      timeout: 25 * 1000,\n    },\n  );\n\n  if (timedOut) {\n    console.log(\"âŒ Timed out while checking for updates.\");\n    process.exit(1);\n  }\n\n  let result:\n    | string[]\n    | {\n        error: {\n          code: string;\n        };\n      } = [];\n\n  try {\n    result = JSON.parse(stdout);\n    if (!result || \"error\" in result) {\n      console.log(\"âŒ Something went wrong while checking for updates.\");\n      process.exit(1);\n    }\n  } catch (error) {\n    console.log(\"âŒ Something went wrong while checking for updates.\");\n    process.exit(1);\n  }\n\n  return result;\n};\n\nexport const isInstalled = async (packageName: string) => {\n  const installedPackages = await getInstalledRefinePackages();\n  if (!installedPackages) {\n    return false;\n  }\n\n  return installedPackages.some((pkg) => pkg.name === packageName);\n};\n","import type { RefinePackageInstalledVersionData } from \"../../definitions/package\";\nimport Table from \"cli-table3\";\nimport chalk from \"chalk\";\nimport { removeANSIColors } from \"@utils/text\";\n\nconst columns = {\n  name: \"name\",\n  current: \"current\",\n  wanted: \"wanted\",\n  latest: \"latest\",\n  changelog: \"changelog\",\n} as const;\n\nconst orderedColumns: (typeof columns)[keyof typeof columns][] = [\n  columns.name,\n  columns.current,\n  columns.wanted,\n  columns.latest,\n  columns.changelog,\n];\n\nexport const getVersionTable = (\n  packages: RefinePackageInstalledVersionData[] = [],\n) => {\n  const tableHead = Object.keys(packages?.[0] || {});\n  if (!packages || !tableHead.length) return { table: \"\", width: 0 };\n\n  const terminalWidth = process.stdout.columns || 80;\n\n  const nameColumnWidth =\n    Math.max(...packages.map((row) => row.name.length)) + 2;\n  const versionColumnWidth = 7 + 2;\n  const bordersWidth = 6;\n  const changelogColumnWidth = Math.min(\n    35,\n    terminalWidth - nameColumnWidth - versionColumnWidth * 3 - bordersWidth,\n  );\n\n  const columnWidths = {\n    name: nameColumnWidth,\n    current: versionColumnWidth,\n    wanted: versionColumnWidth,\n    latest: versionColumnWidth,\n    changelog: changelogColumnWidth,\n  } as const;\n\n  const table = new Table({\n    head: orderedColumns,\n    wordWrap: false,\n    wrapOnWordBoundary: true,\n    colWidths: orderedColumns.map((column) => columnWidths[column]),\n    style: {\n      head: [\"blue\"],\n    },\n  });\n\n  const ellipsisFromCenter = (text: string, length: number) => {\n    // if text is longer than length, cut it from the center to fit the length (add ellipsis)\n    if (text.length > length) {\n      const fitLength = length - 3;\n      const start = text.slice(0, Math.floor(fitLength / 2));\n      const end = text.slice(-Math.ceil(fitLength / 2));\n      return `${start}...${end}`;\n    }\n    return text;\n  };\n\n  packages.forEach((row) => {\n    table.push(\n      orderedColumns.map((column) => {\n        const columnValue = row[column];\n        if (!columnValue) return columnValue;\n\n        if (column === \"latest\" || column === \"wanted\") {\n          const installedVersion = parseVersions(row.current);\n          const latestVersion = parseVersions(columnValue);\n          const colors = getColorsByVersionDiffrence(\n            installedVersion,\n            latestVersion,\n          );\n          const textMajor = chalk[colors.major](latestVersion.major);\n          const textMinor = chalk[colors.minor](latestVersion.minor);\n          const textPatch = chalk[colors.patch](latestVersion.patch);\n          return `${textMajor}.${textMinor}.${textPatch}`;\n        }\n\n        if (column === \"changelog\") {\n          return chalk.blueBright.underline(columnValue);\n        }\n\n        return columnValue;\n      }),\n    );\n  });\n\n  const tableString = table.toString();\n  const tableWidth = removeANSIColors(\n    tableString.split(\"\\n\")?.[0] || \"\",\n  ).length;\n\n  return { table: tableString, width: tableWidth };\n};\n\nconst parseVersions = (text: string) => {\n  const versions = text.split(\".\");\n  return {\n    major: versions[0],\n    minor: versions[1],\n    patch: versions[2],\n  };\n};\n\nconst getColorsByVersionDiffrence = (\n  installedVersion: ReturnType<typeof parseVersions>,\n  nextVersion: ReturnType<typeof parseVersions>,\n) => {\n  const isMajorDiffrence =\n    installedVersion.major.trim() !== nextVersion.major.trim();\n\n  if (isMajorDiffrence)\n    return {\n      major: \"red\",\n      minor: \"red\",\n      patch: \"red\",\n    } as const;\n\n  const isMinorDiffrence =\n    installedVersion.minor.trim() !== nextVersion.minor.trim();\n\n  if (isMinorDiffrence)\n    return {\n      major: \"white\",\n      minor: \"yellow\",\n      patch: \"yellow\",\n    } as const;\n\n  const isPatchDiffrence =\n    installedVersion.patch.trim() !== nextVersion.patch.trim();\n  if (isPatchDiffrence)\n    return {\n      major: \"white\",\n      minor: \"white\",\n      patch: \"green\",\n    } as const;\n\n  return {\n    major: \"white\",\n    minor: \"white\",\n    patch: \"white\",\n  } as const;\n};\n","export const uppercaseFirstChar = (str: string): string => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nexport const removeANSIColors = (str: string): string => {\n  return str.replace(\n    // biome-ignore lint/suspicious/noControlCharactersInRegex: we want to remove invisible characters here.\n    /[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,\n    \"\",\n  );\n};\n","import type { Command } from \"commander\";\nimport { printUpdateWarningTable } from \"@components/update-warning-table\";\nimport {\n  getAllVersionsOfPackage,\n  getDependenciesWithVersion,\n} from \"@utils/package\";\nimport spinner from \"@utils/spinner\";\nimport type { RefinePackageInstalledVersionData } from \"../../definitions/package\";\nimport semverDiff from \"semver-diff\";\nimport { maxSatisfying } from \"semver\";\nimport { getOutdatedPackageList } from \"./utils\";\n\nconst load = (program: Command) => {\n  return program\n    .command(\"check-updates\")\n    .description(\"Check all installed `Refine` packages are up to date\")\n    .action(action);\n};\n\nconst action = async () => {\n  const packages = await spinner(isRefineUptoDate, \"Checking for updates...\");\n  if (!packages.length) {\n    console.log(\"All `Refine` packages are up to date ðŸŽ‰\\n\");\n    return;\n  }\n\n  await printUpdateWarningTable({ data: packages });\n};\n\n/**\n *\n * @returns `Refine` packages that have updates.\n * @returns `[]` if no Refine package found.\n * @returns `[]` if all `Refine` packages are up to date.\n */\nexport const isRefineUptoDate = async () => {\n  const refinePackages = await getOutdatedRefinePackages();\n\n  return refinePackages;\n};\n\n/**\n * Uses `npm outdated` command to get the list of outdated packages.\n * @returns `[]` if no Refine package found.\n * @returns `Refine` packages that have updates.\n */\nexport const getOutdatedRefinePackages = async () => {\n  const packages = await getOutdatedPackageList();\n  if (!packages) return [];\n\n  const list: RefinePackageInstalledVersionData[] = [];\n\n  Object.keys(packages).forEach((packageName) => {\n    const dependency = packages[packageName];\n\n    if (packageName.includes(\"@refinedev\")) {\n      list.push({\n        ...dependency,\n        name: packageName,\n        changelog: packageName.replace(/@refinedev\\//, \"https://c.refine.dev/\"),\n      });\n    }\n  });\n\n  // When user has installed `next` version, it will be ahead of the `latest` version. But `npm outdated` command still returns as an outdated package.\n  // So we need to filter out the if `current` version is ahead of `latest` version.\n  // ex: in the npm registry `next` version is 1.1.1 -> [current:1.1.1, wanted:1.1.1, latest:1.1.0]\n  const filteredList = list.filter((item) => {\n    const diff = semverDiff(item.current, item.latest);\n    return !!diff;\n  });\n\n  return filteredList;\n};\n\n/**\n * The `npm outdated` command's `wanted` field shows the desired update version (e.g., `^1.2.0` in `package.json` resolves to `1.2.1`).\n * This function returns the version that matches the semver range in `package.json` (e.g., `^1.2.0` resolves to `^1.2.1`).\n *\n * @param packageName The name of the package.\n * @param versionWanted The version that the user wants to update to. Wihtout semver range.\n * @returns The version that satisfies the semver range in `package.json` with the preferred wildcard.\n */\nexport const getWantedWithPreferredWildcard = (\n  packageName: RefinePackageInstalledVersionData[\"name\"],\n  versionWanted: RefinePackageInstalledVersionData[\"wanted\"],\n): string => {\n  const dependencies = getDependenciesWithVersion();\n  const versionInPackageJson = dependencies[packageName];\n\n  if (!versionInPackageJson) {\n    return `^${versionWanted}`;\n  }\n\n  if (versionInPackageJson === \"latest\") {\n    return \"latest\";\n  }\n\n  if (versionInPackageJson === \"*\") {\n    return \"*\";\n  }\n\n  // has range\n  // if the version in the package.json has a range, it means the user has installed the package with a range.\n  // in that case, we should not change the version. package manager will install the latest version that satisfies the semver range.\n  if (\n    [\">\", \"<\", \">=\", \"<=\", \"||\"].some((char) =>\n      versionInPackageJson.includes(char),\n    )\n  ) {\n    return versionInPackageJson;\n  }\n\n  // has `x`\n  // if the version in the package.json has `x` in it, it means the user has installed the package with a wildcard.\n  // in that case, we should not change the version. package manager will install the latest version that satisfies the semver range.\n  if (versionInPackageJson?.includes(\"x\")) {\n    return `${versionInPackageJson}`;\n  }\n\n  // has tilda\n  if (versionInPackageJson?.startsWith(\"~\")) {\n    return `~${versionWanted}`;\n  }\n\n  // has caret\n  if (versionInPackageJson?.startsWith(\"^\")) {\n    return `^${versionWanted}`;\n  }\n\n  return versionWanted;\n};\n\n/**\n *\n * @param packageName to get the latest minor version of the package available on npm.\n * @param version current installed version of the package. This will be used to calculate the latest minor version.\n * @returns The latest minor version of the package available on npm.\n */\nexport const getLatestMinorVersionOfPackage = async (\n  packageName: RefinePackageInstalledVersionData[\"name\"],\n  version: RefinePackageInstalledVersionData[\"wanted\"],\n) => {\n  const versionAll = await getAllVersionsOfPackage(packageName);\n\n  /**\n   * The `semver` package's `maxSatisfying` function returns the highest version in the list that satisfies the range.\n   */\n  const versionLatest = maxSatisfying(versionAll, `^${version}`);\n  return versionLatest ?? version;\n};\n\nexport default load;\n","import type { NpmOutdatedResponse } from \"@definitions/package\";\nimport { pmCommands } from \"@utils/package\";\nimport execa from \"execa\";\n\n/**\n * @returns `npm outdated` command response\n */\nexport const getOutdatedPackageList = async () => {\n  const pm = \"npm\";\n\n  const { stdout, timedOut } = await execa(pm, pmCommands[pm].outdatedJson, {\n    reject: false,\n    timeout: 25 * 1000,\n  });\n\n  if (timedOut) {\n    throw new Error(\"Timed out while checking for updates.\");\n  }\n\n  if (!stdout) return null;\n\n  return JSON.parse(stdout) as NpmOutdatedResponse | null;\n};\n","export enum ProjectTypes {\n  REACT_SCRIPT = \"react-scripts\",\n  REMIX = \"remix\",\n  REMIX_VITE = \"remix-vite\",\n  REMIX_SPA = \"remix-spa\",\n  NEXTJS = \"nextjs\",\n  VITE = \"vite\",\n  CRACO = \"craco\",\n  PARCEL = \"parcel\",\n  UNKNOWN = \"unknown\",\n}\n","export enum UIFrameworks {\n  ANTD = \"antd\",\n  MUI = \"mui\",\n  MANTINE = \"mantine\",\n  CHAKRA = \"chakra-ui\",\n}\n","export enum PackageManagerTypes {\n  NPM = \"npm\",\n  YARN = \"yarn\",\n  PNPM = \"pnpm\",\n}\n\n/**\n * type of `npm outdated` command response\n */\nexport type NpmOutdatedResponse = Record<\n  string,\n  {\n    current: string;\n    wanted: string;\n    latest: string;\n    dependent: string;\n    location: string;\n  }\n>;\n\nexport type RefinePackageInstalledVersionData = {\n  name: string;\n  /**\n   * version of the package that is currently installed. Without semver range wildcard.\n   */\n  current: string;\n  /**\n   * version that the user wants to update to. Without semver range wildcard.\n   * e.g. `^1.0.0` in `package.json` resolves to `1.0.1` in the this field.\n   */\n  wanted: string;\n  /**\n   * latest version of the package available on npm\n   */\n  latest: string;\n  /**\n   * changelog url\n   */\n  changelog?: string;\n  /**\n   * dependent package name\n   */\n  dependent: string;\n  /**\n   * location of the package\n   */\n  location: string;\n};\n\n/**\n * key is the script name and value is the script command\n */\nexport type PackageDependency = Record<string, string>;\n\nexport type PackageJson = {\n  name: string;\n  version: string;\n  scripts?: Record<string, string>;\n  dependencies?: PackageDependency;\n  devDependencies?: PackageDependency;\n  peerDependencies?: PackageDependency;\n  refine?: {\n    projectId?: string;\n  };\n};\n","import { ProjectTypes, UIFrameworks } from \"../../definitions\";\nimport { getDependencies, getDevDependencies } from \"@utils/package\";\n\nexport const getProjectType = (platform?: ProjectTypes): ProjectTypes => {\n  if (platform) {\n    return platform;\n  }\n  // read dependencies from package.json\n  let dependencies: string[] = [];\n  let devDependencies: string[] = [];\n\n  try {\n    dependencies = getDependencies();\n    devDependencies = getDevDependencies();\n  } catch (error) {}\n\n  // check for craco\n  // craco and react-scripts installs together. We need to check for craco first\n  if (\n    dependencies.includes(\"@craco/craco\") ||\n    devDependencies.includes(\"@craco/craco\")\n  ) {\n    return ProjectTypes.CRACO;\n  }\n\n  // check for react-scripts\n  if (\n    dependencies.includes(\"react-scripts\") ||\n    devDependencies.includes(\"react-scripts\")\n  ) {\n    return ProjectTypes.REACT_SCRIPT;\n  }\n\n  // check for next\n  if (dependencies.includes(\"next\") || devDependencies.includes(\"next\")) {\n    return ProjectTypes.NEXTJS;\n  }\n\n  // check for remix\n  if (\n    dependencies.includes(\"@remix-run/react\") ||\n    devDependencies.includes(\"@remix-run/react\")\n  ) {\n    // check for remix-vite\n    if (dependencies.includes(\"vite\") || devDependencies.includes(\"vite\")) {\n      return ProjectTypes.REMIX_VITE;\n    }\n\n    return ProjectTypes.REMIX;\n  }\n\n  // check for vite\n  if (dependencies.includes(\"vite\") || devDependencies.includes(\"vite\")) {\n    return ProjectTypes.VITE;\n  }\n\n  if (dependencies.includes(\"parcel\") || devDependencies.includes(\"parcel\")) {\n    return ProjectTypes.PARCEL;\n  }\n\n  return ProjectTypes.UNKNOWN;\n};\n\nexport const getUIFramework = (): UIFrameworks | undefined => {\n  // read dependencies from package.json\n  const dependencies = getDependencies();\n\n  // check for antd\n  if (dependencies.includes(\"@refinedev/antd\")) {\n    return UIFrameworks.ANTD;\n  }\n\n  // check for mui\n  if (dependencies.includes(\"@refinedev/mui\")) {\n    return UIFrameworks.MUI;\n  }\n\n  // check for chakra\n  if (dependencies.includes(\"@refinedev/chakra-ui\")) {\n    return UIFrameworks.CHAKRA;\n  }\n\n  // check for mantine\n  if (dependencies.includes(\"@refinedev/mantine\")) {\n    return UIFrameworks.MANTINE;\n  }\n\n  return;\n};\n\nexport const getDevtoolsEnvKeyByProjectType = (\n  projectType: ProjectTypes,\n): string => {\n  switch (projectType) {\n    case ProjectTypes.REACT_SCRIPT:\n      return \"REACT_APP_REFINE_DEVTOOLS_PORT\";\n    case ProjectTypes.NEXTJS:\n      return \"NEXT_PUBLIC_REFINE_DEVTOOLS_PORT\";\n    case ProjectTypes.VITE:\n      return \"VITE_REFINE_DEVTOOLS_PORT\";\n    default:\n      return \"REFINE_DEVTOOLS_PORT\";\n  }\n};\n","import { ProjectTypes } from \"../../definitions/projectTypes\";\nimport camelCase from \"camelcase\";\n\nexport const getResourcePath = (\n  projectType: ProjectTypes,\n): { path: string; alias: string } => {\n  switch (projectType) {\n    case ProjectTypes.NEXTJS:\n      return {\n        path: \"src/components\",\n        alias: \"../src/components\",\n      };\n    case ProjectTypes.REMIX:\n    case ProjectTypes.REMIX_VITE:\n    case ProjectTypes.REMIX_SPA:\n      return {\n        path: \"app/components\",\n        alias: \"~/components\",\n      };\n  }\n\n  // vite and react\n  return {\n    path: \"src/pages\",\n    alias: \"pages\",\n  };\n};\n\nexport const getProviderPath = (\n  projectType: ProjectTypes,\n): { path: string; alias: string } => {\n  switch (projectType) {\n    case ProjectTypes.NEXTJS:\n      return {\n        path: \"src/providers\",\n        alias: \"../src/providers\",\n      };\n    case ProjectTypes.REMIX:\n    case ProjectTypes.REMIX_VITE:\n    case ProjectTypes.REMIX_SPA:\n      return {\n        path: \"app/providers\",\n        alias: \"~/providers\",\n      };\n  }\n\n  // vite and react\n  return {\n    path: \"src/providers\",\n    alias: \"providers\",\n  };\n};\n\nexport const getFilesPathByProject = (projectType?: ProjectTypes) => {\n  switch (projectType) {\n    case ProjectTypes.REMIX:\n    case ProjectTypes.REMIX_VITE:\n    case ProjectTypes.REMIX_SPA:\n      return \"./app\";\n    default:\n      return \"./src\";\n  }\n};\n\nexport const getComponentNameByResource = (resource: string): string => {\n  return camelCase(resource, {\n    preserveConsecutiveUppercase: true,\n    pascalCase: true,\n  });\n};\n","import Handlebars from \"handlebars\";\nimport {\n  readFileSync,\n  readdirSync,\n  createFileSync,\n  writeFileSync,\n  unlinkSync,\n} from \"fs-extra\";\nimport { getComponentNameByResource } from \"@utils/resource\";\n\nexport const compile = (filePath: string, params: any): string => {\n  const content = readFileSync(filePath);\n\n  Handlebars.registerHelper(\"ifIn\", (elem, list, options) => {\n    if (elem.includes(list)) {\n      return options.fn(Handlebars);\n    }\n    return options.inverse(Handlebars);\n  });\n\n  Handlebars.registerHelper(\"formatInferencerComponent\", (string) => {\n    if (!string) {\n      return;\n    }\n\n    switch (string) {\n      case \"chakra-ui\":\n        return \"ChakraUI\";\n\n      default:\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n  });\n\n  Handlebars.registerHelper(\"capitalize\", (string) => {\n    if (!string) {\n      return;\n    }\n\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  });\n\n  Handlebars.registerHelper(\"getComponentNameByResource\", (string) => {\n    if (!string) {\n      return;\n    }\n\n    return getComponentNameByResource(string);\n  });\n\n  const template = Handlebars.compile(content.toString());\n  return template(params);\n};\n\n/**\n * compile all hbs files under the specified directory. recursively\n */\nexport const compileDir = (dirPath: string, params: any) => {\n  const files = readdirSync(dirPath, { recursive: true });\n\n  files.forEach((file: string | Buffer) => {\n    // the target file should be a handlebars file\n    if (typeof file !== \"string\" || !file.endsWith(\".hbs\")) return;\n\n    const templateFilePath = `${dirPath}/${file}`;\n    // create file\n    const compiledFilePath = `${dirPath}/${file.replace(\".hbs\", \"\")}`;\n    createFileSync(compiledFilePath);\n\n    // write compiled file\n    writeFileSync(compiledFilePath, compile(templateFilePath, params));\n\n    // delete template file (*.hbs)\n    unlinkSync(templateFilePath);\n  });\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\nimport { compileDir } from \"@utils/compile\";\nimport { installPackages, isInstalled } from \"@utils/package\";\nimport { getProjectType, getUIFramework } from \"@utils/project\";\nimport { getResourcePath } from \"@utils/resource\";\nimport spinner from \"@utils/spinner\";\nimport { uppercaseFirstChar } from \"@utils/text\";\nimport execa from \"execa\";\nimport {\n  copySync,\n  mkdirSync,\n  moveSync,\n  pathExistsSync,\n  unlinkSync,\n} from \"fs-extra\";\nimport inquirer from \"inquirer\";\nimport { join } from \"path\";\nimport { plural } from \"pluralize\";\nimport temp from \"temp\";\nimport { getCommandRootDir } from \"./get-command-root-dir\";\n\nexport const defaultActions = [\"list\", \"create\", \"edit\", \"show\"];\n\nexport const createResources = async (\n  params: { actions?: string; path?: string },\n  resources: string[],\n) => {\n  const destinationPath =\n    params?.path || getResourcePath(getProjectType()).path;\n  let actions = params.actions || defaultActions.join(\",\");\n\n  if (!resources.length) {\n    const { name, selectedActions } = await inquirer.prompt<{\n      name: string;\n      selectedActions: string[];\n    }>([\n      {\n        type: \"input\",\n        name: \"name\",\n        message: \"Resource Name (users, products, orders etc.)\",\n        validate: (value) => {\n          if (!value) {\n            return \"Resource Name is required\";\n          }\n\n          return true;\n        },\n      },\n      {\n        type: \"checkbox\",\n        name: \"selectedActions\",\n        message: \"Select Actions\",\n        choices: defaultActions,\n        default: params?.actions?.split(\",\"),\n      },\n    ]);\n\n    resources = [name];\n    actions = selectedActions.join(\",\");\n  }\n\n  let isAtleastOneResourceCreated = false;\n  resources.forEach((resourceName) => {\n    const customActions = actions ? actions.split(\",\") : undefined;\n    const resourceFolderName = plural(resourceName).toLowerCase();\n\n    // check exist resource\n    const resourcePath = join(\n      process.cwd(),\n      destinationPath,\n      resourceFolderName,\n    );\n\n    if (pathExistsSync(resourcePath)) {\n      console.error(\n        `âŒ Resource (${join(\n          destinationPath,\n          resourceFolderName,\n        )}) already exist!`,\n      );\n      return;\n    }\n    isAtleastOneResourceCreated = true;\n\n    // uppercase first letter\n    const resource = uppercaseFirstChar(resourceName);\n\n    // get the project type\n    const uiFramework = getUIFramework();\n\n    // if next.js, need to add the use client directive\n    const projectType = getProjectType();\n    const isNextJs = projectType === ProjectTypes.NEXTJS;\n\n    const sourceDir = `${getCommandRootDir()}/../templates/resource/components`;\n\n    // create temp dir\n    const tempDir = generateTempDir();\n\n    // copy template files\n    copySync(sourceDir, tempDir);\n\n    const compileParams = {\n      resourceName,\n      resource,\n      actions: customActions || defaultActions,\n      uiFramework,\n      isNextJs,\n    };\n\n    // compile dir\n    compileDir(tempDir, compileParams);\n\n    // delete ignored actions\n    if (customActions) {\n      defaultActions.forEach((action) => {\n        if (!customActions.includes(action)) {\n          unlinkSync(`${tempDir}/${action}.tsx`);\n        }\n      });\n    }\n\n    // create desctination dir\n    mkdirSync(destinationPath, { recursive: true });\n\n    // copy to destination\n    const destinationResourcePath = `${destinationPath}/${resourceFolderName}`;\n\n    let moveSyncOptions = {};\n\n    // empty dir override\n    if (pathExistsSync(destinationResourcePath)) {\n      moveSyncOptions = { overwrite: true };\n    }\n    moveSync(tempDir, destinationResourcePath, moveSyncOptions);\n\n    // clear temp dir\n    temp.cleanupSync();\n\n    // if use Next.js, generate page files. This makes easier to use the resource\n    if (isNextJs) {\n      generateNextJsPages(\n        resource,\n        resourceFolderName,\n        customActions || defaultActions,\n      );\n    }\n\n    const jscodeshiftExecutable = require.resolve(\".bin/jscodeshift\");\n    const { stderr } = execa.sync(jscodeshiftExecutable, [\n      \"./\",\n      \"--extensions=ts,tsx,js,jsx\",\n      \"--parser=tsx\",\n      `--transform=${getCommandRootDir()}/../src/transformers/resource.ts`,\n      \"--ignore-pattern=.cache\",\n      \"--ignore-pattern=node_modules\",\n      \"--ignore-pattern=build\",\n      \"--ignore-pattern=.next\",\n      \"--ignore-pattern=dist\",\n      // pass custom params to transformer file\n      `--__actions=${compileParams.actions}`,\n      `--__pathAlias=${getResourcePath(getProjectType()).alias}`,\n      `--__resourceFolderName=${resourceFolderName}`,\n      `--__resource=${resource}`,\n      `--__resourceName=${resourceName}`,\n    ]);\n\n    if (stderr) {\n      console.log(stderr);\n    }\n\n    console.log(\n      `ðŸŽ‰ Resource (${destinationResourcePath}) generated successfully!`,\n    );\n  });\n\n  if (isAtleastOneResourceCreated) {\n    installInferencer();\n  }\n\n  return;\n};\n\nconst generateTempDir = (): string => {\n  temp.track();\n  return temp.mkdirSync(\"resource\");\n};\n\n/**\n * generate resource pages for Next.js App Router\n */\nconst generateNextJsPages = (\n  resource: string,\n  resourceFolderName: string,\n  actions: string[],\n): void => {\n  const resourcePageRootDirPath = join(\n    process.cwd(),\n    \"src/app/\",\n    resourceFolderName,\n  );\n\n  // this is specific to Next.js, so defined here\n  const actionPageRelativeDirPaths: { [key: string]: string } = {\n    list: \"/\",\n    create: \"/create\",\n    edit: \"/edit/[id]\",\n    show: \"/show/[id]\",\n  };\n\n  actions.forEach((action) => {\n    // create page dir\n    const actionPageRelativeDirPath = actionPageRelativeDirPaths[action];\n    const actionPageDirPath = join(\n      resourcePageRootDirPath,\n      actionPageRelativeDirPath,\n    );\n    mkdirSync(actionPageDirPath, { recursive: true });\n\n    // copy template files as page files\n    const sourceFilePath = `${getCommandRootDir()}/../templates/resource/pages/next/${actionPageRelativeDirPath}/page.tsx.hbs`;\n    const destFilePath = join(actionPageDirPath, \"page.tsx.hbs\");\n    copySync(sourceFilePath, destFilePath);\n  });\n\n  // compile page files\n  const compileParams = { resource, resourceFolderName };\n  compileDir(resourcePageRootDirPath, compileParams);\n};\n\nexport const installInferencer = async () => {\n  console.log();\n  const isInferencerInstalled = await spinner(\n    () => isInstalled(\"@refinedev/inferencer\"),\n    \"Checking if '@refinedev/inferencer' package is installed...\",\n  );\n  if (!isInferencerInstalled) {\n    console.log(\"ðŸ“¦ Installing '@refinedev/inferencer' package...\");\n    await installPackages(\n      [\"@refinedev/inferencer@latest\"],\n      \"add\",\n      \"âœ… '@refinedev/inferencer' package installed successfully!\",\n    );\n  }\n};\n","// this export is for testing\nexport const getCommandRootDir = () => {\n  return __dirname;\n};\n","import type { Command } from \"commander\";\nimport { getProjectType } from \"@utils/project\";\nimport { getResourcePath } from \"@utils/resource\";\nimport { createResources } from \"@commands/add/sub-commands/resource/create-resources\";\n\nconst load = (program: Command) => {\n  const projectType = getProjectType();\n  const { path } = getResourcePath(projectType);\n\n  return program\n    .command(\"create-resource\")\n    .allowExcessArguments(true)\n    .description(\n      `Create a new resource files (deprecated, please use \"add resource\" command)`,\n    )\n    .option(\n      \"-a, --actions [actions]\",\n      \"Only generate the specified actions. (ex: list,create,edit,show)\",\n      \"list,create,edit,show\",\n    )\n    .option(\"-p, --path [path]\", \"Path to generate the resource files\", path)\n    .action(action);\n};\n\nconst action = async (\n  params: { actions: string; path: string },\n  options: Command,\n) => {\n  createResources(params, options.args);\n};\n\nexport default load;\n","import { ProjectTypes } from \"@definitions/projectTypes\";\nimport { getProjectType } from \"@utils/project\";\nimport { type Command, Option } from \"commander\";\nimport { updateNotifier } from \"src/update-notifier\";\nimport { projectScripts } from \"../projectScripts\";\nimport { runScript } from \"../runScript\";\nimport { getPlatformOptionDescription, getRunnerDescription } from \"../utils\";\n\nconst start = (program: Command) => {\n  return program\n    .command(\"start\")\n    .description(getRunnerDescription(\"start\"))\n    .allowUnknownOption(true)\n    .addOption(\n      new Option(\n        \"-p, --platform <platform>\",\n        getPlatformOptionDescription(),\n      ).choices(\n        Object.values(ProjectTypes).filter(\n          (type) => type !== ProjectTypes.UNKNOWN,\n        ),\n      ),\n    )\n    .argument(\"[args...]\")\n    .action(action);\n};\n\nconst action = async (\n  args: string[],\n  { platform }: { platform: ProjectTypes },\n) => {\n  const projectType = getProjectType(platform);\n\n  const binPath = projectScripts[projectType].getBin(\"start\");\n  const command = projectScripts[projectType].getStart(args);\n\n  await updateNotifier();\n\n  runScript(binPath, command);\n};\n\nexport default start;\n","import Conf from \"conf\";\nimport { isRefineUptoDate } from \"@commands/check-updates\";\nimport { printUpdateWarningTable } from \"@components/update-warning-table\";\nimport type { RefinePackageInstalledVersionData } from \"../definitions/package\";\nimport {\n  isUpdateNotifierDisabled,\n  validateKey,\n  isPackagesCacheExpired,\n  generateKeyFromPackages,\n} from \"./utils\";\n\nconst STORE_NAME = \"refine-update-notifier\";\n\nexport interface Store {\n  key: string;\n  lastUpdated: number;\n  packages: RefinePackageInstalledVersionData[];\n}\n\nexport const store = new Conf<Store>({\n  projectName: STORE_NAME,\n  defaults: {\n    key: \"\",\n    lastUpdated: 0,\n    packages: [],\n  },\n});\n\n// update notifier should not throw any unhandled error to prevent breaking user workflow.\nexport const updateNotifier = async () => {\n  if (isUpdateNotifierDisabled()) return;\n\n  const shouldUpdate = await shouldUpdatePackagesCache();\n  if (shouldUpdate === null) return;\n  if (shouldUpdate) {\n    updatePackagesCache();\n    return;\n  }\n\n  showWarning();\n  updatePackagesCache();\n};\n\n/**\n * renders outdated packages table if there is any\n */\nconst showWarning = async () => {\n  const packages = store.get(\"packages\");\n  if (!packages?.length) return;\n\n  await printUpdateWarningTable({ data: packages });\n  console.log(\"\\n\");\n};\n\n/**\n * @returns `null` It's mean something went wrong while checking key or cache. so we should not update cache.\n * @returns `boolean` if cache should be updated or not\n *   if cache is expired or key is invalid, update cache in background and not show warning\n */\nexport const shouldUpdatePackagesCache = async () => {\n  const isKeyValid = await validateKey();\n  const isExpired = isPackagesCacheExpired();\n\n  if (isKeyValid === null) return null;\n\n  if (isExpired || !isKeyValid) return true;\n\n  return false;\n};\n\n/**\n * @returns `null` something went wrong\n * @returns `packages` if packages updated\n */\nexport const updatePackagesCache = async () => {\n  try {\n    const packages = await isRefineUptoDate();\n\n    store.set(\"packages\", packages);\n    store.set(\"lastUpdated\", Date.now());\n    store.set(\"key\", await generateKeyFromPackages());\n\n    return packages;\n  } catch (error) {\n    // invalidate store\n    store.set(\"packages\", []);\n    store.set(\"lastUpdated\", Date.now());\n    store.set(\"key\", \"\");\n    return null;\n  }\n};\n","export const stringToBase64 = (str: string) => {\n  if (typeof btoa !== \"undefined\") {\n    return btoa(str);\n  }\n\n  return Buffer.from(str).toString(\"base64\");\n};\n\nexport const base64ToString = (base64: string) => {\n  if (typeof atob !== \"undefined\") {\n    return atob(base64);\n  }\n  return Buffer.from(base64, \"base64\").toString();\n};\n","import type { NODE_ENV } from \"../../definitions/node\";\nimport * as dotenv from \"dotenv\";\n\nconst refineEnv: Record<string, string> = {};\n\ndotenv.config({ processEnv: refineEnv });\n\nconst envSearchMap: Record<Exclude<NODE_ENV, \"custom\">, RegExp> = {\n  development: /dev/i,\n  production: /prod/i,\n  test: /test|tst/i,\n  \"continuous-integration\": /ci/i,\n  \"user-acceptance-testing\": /uat/i,\n  \"system-integration-testing\": /sit/i,\n};\n\nexport const getNodeEnv = (): NODE_ENV => {\n  const nodeEnv = process.env.NODE_ENV;\n\n  if (!nodeEnv) {\n    return \"development\";\n  }\n\n  let env: NODE_ENV = \"custom\";\n\n  for (const [key, value] of Object.entries(envSearchMap)) {\n    if (value.test(nodeEnv)) {\n      env = key as NODE_ENV;\n      break;\n    }\n  }\n\n  return env;\n};\n\nconst getEnvValue = (key: string): string | undefined => {\n  return process.env[key] || refineEnv[key];\n};\n\nexport const ENV = {\n  NODE_ENV: getNodeEnv(),\n  REFINE_NO_TELEMETRY: getEnvValue(\"REFINE_NO_TELEMETRY\") || \"false\",\n  UPDATE_NOTIFIER_IS_DISABLED:\n    getEnvValue(\"UPDATE_NOTIFIER_IS_DISABLED\") || \"false\",\n  UPDATE_NOTIFIER_CACHE_TTL:\n    getEnvValue(\"UPDATE_NOTIFIER_CACHE_TTL\") || 1000 * 60 * 60 * 24,\n  REFINE_DEVTOOLS_PORT: getEnvValue(\"REFINE_DEVTOOLS_PORT\"),\n};\n","import { stringToBase64 } from \"@utils/encode\";\nimport { ENV } from \"@utils/env\";\nimport { getInstalledRefinePackages } from \"@utils/package\";\nimport chalk from \"chalk\";\nimport { store } from \".\";\n\nexport const isPackagesCacheExpired = () => {\n  const lastUpdated = store.get(\"lastUpdated\");\n\n  if (!lastUpdated) return true;\n\n  const now = Date.now();\n\n  const diff = now - lastUpdated;\n  const cacheTTL = Number(ENV.UPDATE_NOTIFIER_CACHE_TTL);\n\n  return diff >= cacheTTL;\n};\n\n/**\n * @returns `true` if key is valid\n * @returns `false` if key is invalid\n * @returns `null` if there is an error\n */\nexport const validateKey = async () => {\n  const key = store.get(\"key\");\n  const newKey = await generateKeyFromPackages();\n\n  if (newKey === null) return null;\n\n  return key === newKey;\n};\n\n/**\n * @returns `null` if there is an error\n * @returns `string` if key is generated\n */\nexport const generateKeyFromPackages = async () => {\n  const packages = await getInstalledRefinePackages();\n  if (!packages) {\n    console.error(\n      chalk.red(\n        \"Something went wrong when trying to get installed `Refine` packages.\",\n      ),\n    );\n\n    return null;\n  }\n\n  const currentVersionsWithName = packages.map((p) => `${p.name}@${p.version}`);\n  const hash = stringToBase64(currentVersionsWithName.toString());\n\n  return hash;\n};\n\nexport const isUpdateNotifierDisabled = () => {\n  return ENV.UPDATE_NOTIFIER_IS_DISABLED.toLocaleLowerCase() === \"true\";\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\n\nfunction resolveBin(name: string) {\n  if (process.platform === \"win32\") {\n    try {\n      return require.resolve(`.bin/${name}.exe`);\n    } catch {}\n  }\n  return require.resolve(`.bin/${name}`);\n}\n\n/**\n * Map `Refine` cli commands to project script\n */\nexport const projectScripts = {\n  [ProjectTypes.REACT_SCRIPT]: {\n    getDev: (args: string[]) => [\"start\", ...args],\n    getStart: (args: string[]) => [\"start\", ...args],\n    getBuild: (args: string[]) => [\"build\", ...args],\n    getBin: () => resolveBin(\"react-scripts\"),\n  },\n  [ProjectTypes.VITE]: {\n    getDev: (args: string[]) => [\"dev\", ...args],\n    getStart: (args: string[]) => [\"preview\", ...args],\n    getBuild: (args: string[]) => [\"build\", ...args],\n    getBin: () => resolveBin(\"vite\"),\n  },\n  [ProjectTypes.NEXTJS]: {\n    getDev: (args: string[]) => [\"dev\", ...args],\n    getStart: (args: string[]) => [\"start\", ...args],\n    getBuild: (args: string[]) => [\"build\", ...args],\n    getBin: () => resolveBin(\"next\"),\n  },\n  [ProjectTypes.REMIX]: {\n    getDev: (args: string[]) => [\"dev\", ...args],\n    getStart: (args: string[]) => {\n      // remix-serve accepts a path to the entry file as an argument\n      // if we have arguments, we will pass them to remix-serve and do nothing.\n      // ex: `refine start ./build/index.js`\n      const hasArgs = args?.length;\n      if (hasArgs) {\n        return args;\n      }\n\n      // otherwise print a warning and use `./build/index.js` as default\n      console.log();\n      console.warn(\n        \"ðŸš¨ Remix requires a path to the entry file. Please provide it as an argument to `refine start` command in package.json scripts\",\n      );\n      console.warn(\"Refine will use `./build/index.js` as default\");\n      console.warn(\"Example: `refine start ./build/index.js`\");\n      console.log();\n\n      return [\"./build/index.js\"];\n    },\n    getBuild: (args: string[]) => [\"build\", ...args],\n    getBin: (type?: \"dev\" | \"start\" | \"build\") => {\n      return resolveBin(type === \"start\" ? \"remix-serve\" : \"remix\");\n    },\n  },\n  [ProjectTypes.REMIX_VITE]: {\n    getDev: (args: string[]) => [\"vite:dev\", ...args],\n    getStart: (args: string[]) => {\n      // remix-serve accepts a path to the entry file as an argument\n      // if we have arguments, we will pass them to remix-serve and do nothing.\n      // ex: `refine start ./build/server/index.js`\n      const hasArgs = args?.length;\n      if (hasArgs) {\n        return args;\n      }\n\n      // otherwise print a warning and use `./build/server/index.js` as default\n      console.log();\n      console.warn(\n        \"ðŸš¨ Remix requires a path to the entry file. Please provide it as an argument to `refine start` command in package.json scripts\",\n      );\n      console.warn(\"Refine will use `./build/server/index.js` as default\");\n      console.warn(\"Example: `refine start ./build/server/index.js`\");\n      console.log();\n\n      return [\"./build/server/index.js\"];\n    },\n    getBuild: (args: string[]) => [\"vite:build\", ...args],\n    getBin: (type?: \"dev\" | \"start\" | \"build\") => {\n      return resolveBin(type === \"start\" ? \"remix-serve\" : \"remix\");\n    },\n  },\n  [ProjectTypes.REMIX_SPA]: {\n    getDev: (args: string[]) => [\"vite:dev\", ...args],\n    getStart: (args: string[]) => [\"preview\", ...args],\n    getBuild: (args: string[]) => [\"vite:build\", ...args],\n    getBin: (type?: \"dev\" | \"start\" | \"build\") => {\n      return resolveBin(type === \"start\" ? \"vite\" : \"remix\");\n    },\n  },\n  [ProjectTypes.CRACO]: {\n    getDev: (args: string[]) => [\"start\", ...args],\n    getStart: (args: string[]) => [\"start\", ...args],\n    getBuild: (args: string[]) => [\"build\", ...args],\n    getBin: () => resolveBin(\"craco\"),\n  },\n  [ProjectTypes.PARCEL]: {\n    getDev: (args: string[]) => [\"start\", ...args],\n    getStart: (args: string[]) => [\"start\", ...args],\n    getBuild: (args: string[]) => [\"build\", ...args],\n    getBin: () => resolveBin(\"parcel\"),\n  },\n  [ProjectTypes.UNKNOWN]: {\n    getDev: (args: string[]) => [...args],\n    getStart: (args: string[]) => [...args],\n    getBuild: (args: string[]) => [...args],\n    getBin: () => {\n      return \"unknown\";\n    },\n  },\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\nimport { ENV } from \"@utils/env\";\nimport execa from \"execa\";\n\nexport const runScript = async (\n  binPath: string,\n  args: string[],\n  env: Record<string, string> = {},\n) => {\n  if (binPath === \"unknown\") {\n    const supportedProjectTypes = Object.values(ProjectTypes)\n      .filter((v) => v !== \"unknown\")\n      .join(\", \");\n\n    console.error(\n      `We couldn't find executable for your project. Supported executables are ${supportedProjectTypes}.\\nPlease use your own script directly. If you think this is an issue, please report it at: https://github.com/refinedev/refine/issues`,\n    );\n\n    return;\n  }\n\n  const execution = execa(binPath, args, {\n    stdio: \"pipe\",\n    windowsHide: false,\n    env: {\n      FORCE_COLOR: \"true\",\n      REFINE_NO_TELEMETRY: ENV.REFINE_NO_TELEMETRY,\n      ...env,\n      ...process.env,\n    },\n  });\n\n  execution.stdout?.pipe(process.stdout);\n  execution.stderr?.pipe(process.stderr);\n\n  return await execution;\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\nimport { getProjectType } from \"@utils/project\";\nimport { projectScripts } from \"../projectScripts\";\n\nexport const getRunnerDescription = (runner: \"dev\" | \"start\" | \"build\") => {\n  let projectType = getProjectType();\n\n  let command: string[] = [];\n  switch (runner) {\n    case \"dev\":\n      command = projectScripts[projectType].getDev([\"\"]);\n      break;\n    case \"start\":\n      command = projectScripts[projectType].getStart([\"\"]);\n      break;\n    case \"build\":\n      command = projectScripts[projectType].getBuild([\"\"]);\n      break;\n  }\n\n  if (runner === \"start\") {\n    switch (projectType) {\n      case ProjectTypes.REMIX:\n      case ProjectTypes.REMIX_VITE:\n        projectType = \"remix-serve\" as ProjectTypes;\n        break;\n      case ProjectTypes.REMIX_SPA:\n        projectType = ProjectTypes.VITE;\n        break;\n    }\n  }\n\n  return `It runs: \\`${projectType} ${command.join(\n    \" \",\n  )}\\`. Also accepts all the arguments \\`${projectType}\\` accepts.`;\n};\n\nexport const getPlatformOptionDescription = () => {\n  return `Platform to run command on. \\nex: ${Object.values(ProjectTypes).join(\n    \", \",\n  )}`;\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\nimport { getDevtoolsEnvKeyByProjectType, getProjectType } from \"@utils/project\";\nimport { type Command, Option } from \"commander\";\nimport { updateNotifier } from \"src/update-notifier\";\nimport { devtoolsRunner } from \"src/commands/devtools\";\nimport { projectScripts } from \"../projectScripts\";\nimport { runScript } from \"../runScript\";\nimport { getPlatformOptionDescription, getRunnerDescription } from \"../utils\";\nimport { isDevtoolsInstalled } from \"src/utils/package\";\nimport { ENV } from \"src/utils/env\";\n\nconst dev = (program: Command) => {\n  return program\n    .command(\"dev\")\n    .description(getRunnerDescription(\"dev\"))\n    .allowUnknownOption(true)\n    .addOption(\n      new Option(\n        \"-p, --platform <platform>\",\n        getPlatformOptionDescription(),\n      ).choices(\n        Object.values(ProjectTypes).filter(\n          (type) => type !== ProjectTypes.UNKNOWN,\n        ),\n      ),\n    )\n    .addOption(\n      new Option(\n        \"-d, --devtools <devtools>\",\n        \"Start Refine Devtools server\",\n      ).default(\"true\", \"true if devtools is installed\"),\n    )\n    .argument(\"[args...]\")\n    .action(action);\n};\n\nconst action = async (\n  args: string[],\n  { platform, ...params }: { devtools: string; platform: ProjectTypes },\n) => {\n  const projectType = getProjectType(platform);\n\n  const binPath = projectScripts[projectType].getBin(\"dev\");\n  const command = projectScripts[projectType].getDev(args);\n\n  await updateNotifier();\n\n  const devtoolsPortEnvKey = getDevtoolsEnvKeyByProjectType(projectType);\n\n  const devtoolsDefault = await isDevtoolsInstalled();\n\n  const devtools = params.devtools === \"false\" ? false : devtoolsDefault;\n\n  if (devtools) {\n    devtoolsRunner({ exitOnError: false });\n  }\n\n  const envWithDevtoolsPort =\n    devtools && ENV.REFINE_DEVTOOLS_PORT\n      ? { [devtoolsPortEnvKey]: ENV.REFINE_DEVTOOLS_PORT }\n      : undefined;\n\n  runScript(binPath, command, envWithDevtoolsPort);\n};\n\nexport default dev;\n","import { server } from \"@refinedev/devtools-server\";\nimport { addDevtoolsComponent } from \"@transformers/add-devtools-component\";\nimport {\n  getInstalledRefinePackagesFromNodeModules,\n  getPackageJson,\n  getPreferedPM,\n  installPackagesSync,\n  isDevtoolsInstalled,\n} from \"@utils/package\";\nimport { hasDefaultScript } from \"@utils/refine\";\nimport spinner from \"@utils/spinner\";\nimport boxen from \"boxen\";\nimport cardinal from \"cardinal\";\nimport chalk from \"chalk\";\nimport { Argument, type Command } from \"commander\";\nimport dedent from \"dedent\";\nimport semver from \"semver\";\n\ntype DevtoolsCommand = \"start\" | \"init\";\n\nconst commands: DevtoolsCommand[] = [\"start\", \"init\"];\nconst defaultCommand: DevtoolsCommand = \"start\";\n\nconst minRefineCoreVersionForDevtools = \"4.42.0\";\n\nconst load = (program: Command) => {\n  return program\n    .command(\"devtools\")\n    .description(\n      \"Start or install Refine Devtools server; it starts on port 5001.\",\n    )\n    .addArgument(\n      new Argument(\"[command]\", \"devtools related commands\")\n        .choices(commands)\n        .default(defaultCommand),\n    )\n    .addHelpText(\n      \"after\",\n      `\nCommands:\n    start     Start Refine Devtools server\n    init      Install Refine Devtools client and adds it to your project\n`,\n    )\n    .action(action);\n};\n\nexport const action = async (command: DevtoolsCommand) => {\n  switch (command) {\n    case \"start\":\n      devtoolsRunner();\n      return;\n    case \"init\":\n      devtoolsInstaller();\n      return;\n  }\n};\n\nconst devtoolsInstaller = async () => {\n  const corePackage = await getRefineCorePackage();\n\n  const isInstalled = await spinner(\n    isDevtoolsInstalled,\n    \"Checking if devtools is installed...\",\n  );\n  if (isInstalled) {\n    console.log(\"ðŸŽ‰ Refine Devtools is already installed\");\n    return;\n  }\n\n  if (\n    corePackage &&\n    (await validateCorePackageIsNotDeprecated({ pkg: corePackage }))\n  ) {\n    return;\n  }\n\n  console.log(\"ðŸŒ± Installing Refine Devtools...\");\n  const packagesToInstall = [\"@refinedev/devtools@latest\"];\n  // we should update core package if it is lower than minRefineCoreVersionForDevtools\n  if (\n    !corePackage ||\n    semver.lt(corePackage.version, minRefineCoreVersionForDevtools)\n  ) {\n    packagesToInstall.push(\"@refinedev/core@latest\");\n    console.log(\"ðŸŒ± Refine core package is being updated for devtools...\");\n  }\n  await installPackagesSync(packagesToInstall);\n\n  // empty line\n  console.log(\"\");\n  console.log(\"\");\n\n  console.log(\"ðŸŒ± Adding devtools component to your project....\");\n  await addDevtoolsComponent();\n  console.log(\n    \"âœ… Refine Devtools package and components added to your project\",\n  );\n  // if core package is updated, we should show the updated version\n  if (packagesToInstall.includes(\"@refinedev/core@latest\")) {\n    const updatedCorePackage = await getRefineCorePackage();\n    console.log(\n      `âœ… Refine core package updated from ${\n        corePackage?.version ?? \"unknown\"\n      } to ${updatedCorePackage?.version ?? \"unknown\"}`,\n    );\n    console.log(\n      `   Changelog: ${chalk.underline.blueBright(\n        `https://c.refine.dev/core#${\n          corePackage?.version.replaceAll(\".\", \"\") ?? \"\"\n        }`,\n      )}`,\n    );\n  }\n\n  // empty line\n  console.log(\"\");\n\n  const { dev } = hasDefaultScript();\n  if (dev) {\n    console.log(\n      `ðŸ™Œ You're good to go. \"npm run dev\" will automatically starts the devtools server.`,\n    );\n    console.log(\n      `ðŸ‘‰ You can also start the devtools server manually by running \"refine devtools start\"`,\n    );\n    return;\n  }\n\n  if (!dev) {\n    const scriptDev = getPackageJson().scripts?.dev;\n\n    console.log(\n      `ðŸš¨ Your have modified the \"dev\" script in your package.json. Because of that, \"npm run dev\" will not start the devtools server automatically.`,\n    );\n    console.log(`ðŸ‘‰ You can append \"refine devtools\" to \"dev\" script`);\n    console.log(\n      `ðŸ‘‰ You can start the devtools server manually by running \"refine devtools\"`,\n    );\n\n    // empty line\n    console.log(\"\");\n    console.log(\n      boxen(\n        cardinal.highlight(\n          dedent(`\n                {\n                    \"scripts\": {\n                        \"dev\": \"${scriptDev} & refine devtools\",\n                        \"refine\": \"refine\"\n                    }\n                }  \n        `),\n        ),\n        {\n          padding: 1,\n          title: \"package.json\",\n          dimBorder: true,\n          borderColor: \"blueBright\",\n          borderStyle: \"round\",\n        },\n      ),\n    );\n  }\n};\n\nexport const devtoolsRunner = async ({\n  exitOnError = true,\n}: { exitOnError?: boolean } = {}) => {\n  const corePackage = await getRefineCorePackage();\n\n  if (corePackage) {\n    if (await validateCorePackageIsNotDeprecated({ pkg: corePackage })) {\n      return;\n    }\n\n    if (semver.lt(corePackage.version, minRefineCoreVersionForDevtools)) {\n      console.log(\n        `ðŸš¨ You're using an old version of Refine(${corePackage.version}). Refine version should be @4.42.0 or higher to use devtools.`,\n      );\n      const pm = await getPreferedPM();\n      console.log(\n        `ðŸ‘‰ You can update @refinedev/core package by running \"${pm.name} run refine update\"`,\n      );\n      return;\n    }\n  }\n\n  server({\n    onError: () => {\n      if (exitOnError) {\n        process.exit(1);\n      }\n    },\n  }).catch((e) => {});\n};\n\nconst getRefineCorePackage = async () => {\n  const installedRefinePackages =\n    await getInstalledRefinePackagesFromNodeModules();\n  const corePackage = installedRefinePackages?.find(\n    (pkg) =>\n      pkg.name === \"@refinedev/core\" || pkg.name === \"@pankod/refine-core\",\n  );\n\n  if (!corePackage) {\n    return undefined;\n  }\n\n  return corePackage;\n};\n\nexport const validateCorePackageIsNotDeprecated = async ({\n  pkg,\n}: {\n  pkg: { name: string; version: string };\n}) => {\n  if (pkg.name === \"@pankod/refine-core\" || semver.lt(pkg.version, \"4.0.0\")) {\n    console.log(\n      `ðŸš¨ You're using an old version of Refine(${pkg.version}). Refine version should be @4.42.0 or higher to use devtools.`,\n    );\n    console.log(\"You can follow migration guide to update Refine.\");\n    console.log(\n      chalk.blue(\"https://refine.dev/docs/migration-guide/3x-to-4x/\"),\n    );\n    return true;\n  }\n\n  return false;\n};\n\nexport default load;\n","import type {\n  API,\n  FileInfo,\n  JSCodeshift,\n  JSXElement,\n  ASTPath,\n  Collection,\n} from \"jscodeshift\";\nimport execa from \"execa\";\nimport { prettierFormat } from \"../utils/swizzle/prettierFormat\";\n\nexport const parser = \"tsx\";\n\n// runs .bin/jscodeshift with the default export transformer on the current directory\nexport const addDevtoolsComponent = async () => {\n  const jscodeshiftExecutable = require.resolve(\".bin/jscodeshift\");\n  const { stderr } = execa.sync(jscodeshiftExecutable, [\n    \"./\",\n    \"--extensions=ts,tsx,js,jsx\",\n    \"--parser=tsx\",\n    `--transform=${__dirname}/../src/transformers/add-devtools-component.ts`,\n    \"--ignore-pattern=.cache\",\n    \"--ignore-pattern=node_modules\",\n    \"--ignore-pattern=build\",\n    \"--ignore-pattern=.next\",\n    \"--ignore-pattern=dist\",\n  ]);\n\n  if (stderr) {\n    console.log(stderr);\n  }\n};\n\nexport default async function transformer(file: FileInfo, api: API) {\n  const j = api.jscodeshift;\n  const source = j(file.source);\n\n  const refineElement = source.find(j.JSXElement, {\n    openingElement: {\n      name: {\n        name: \"Refine\",\n      },\n    },\n  });\n\n  const hasRefineElement = refineElement.length !== 0;\n\n  if (!hasRefineElement) {\n    return;\n  }\n\n  if (hasDevtoolsImport(j, source) && hasDevtoolsProvider(j, source)) {\n    return;\n  }\n\n  addDevtoolsImport(j, source);\n  refineElement.forEach((path) => {\n    wrapWithDevtoolsProvider(j, path);\n  });\n\n  return await prettierFormat(source.toSource());\n}\n\nexport const hasDevtoolsImport = (j: JSCodeshift, source: Collection) => {\n  return source.find(j.ImportDeclaration, {\n    source: {\n      value: \"@refinedev/devtools\",\n    },\n  }).length;\n};\n\nexport const hasDevtoolsProvider = (j: JSCodeshift, source: Collection) => {\n  return source.find(j.JSXElement, {\n    openingElement: {\n      name: {\n        name: \"DevtoolsProvider\",\n      },\n    },\n  }).length;\n};\n\nexport const addDevtoolsImport = (j: JSCodeshift, source: Collection) => {\n  const devtoolsImport = j.importDeclaration(\n    [\n      j.importSpecifier(j.identifier(\"DevtoolsProvider\")),\n      j.importSpecifier(j.identifier(\"DevtoolsPanel\")),\n    ],\n    j.literal(\"@refinedev/devtools\"),\n  );\n\n  source.get().node.program.body.unshift(devtoolsImport);\n};\n\nconst wrapWithDevtoolsProvider = (\n  j: JSCodeshift,\n  refineEelement: ASTPath<JSXElement>,\n) => {\n  const panel = j.jsxElement(\n    j.jsxOpeningElement(j.jsxIdentifier(\"DevtoolsPanel\")),\n  );\n  panel.openingElement.selfClosing = true;\n\n  const provider = j.jsxElement(\n    j.jsxOpeningElement(j.jsxIdentifier(\"DevtoolsProvider\")),\n    j.jsxClosingElement(j.jsxIdentifier(\"DevtoolsProvider\")),\n    // Pass in the refineEelement component as children\n    [refineEelement.value, panel],\n  );\n\n  j(refineEelement).replaceWith(provider);\n  return { panel, provider };\n};\n","import { format, resolveConfig } from \"prettier\";\n\nexport const prettierFormat = async (code: string) => {\n  try {\n    const prettierConfig = await resolveConfig(process.cwd());\n\n    return format(code, {\n      ...(prettierConfig ?? {}),\n      parser: \"typescript\",\n    });\n  } catch (err) {\n    return code;\n  }\n};\n","import { getPackageJson } from \"@utils/package\";\n\ntype ReturnType = {\n  dev: boolean;\n};\n\n/**\n * Checks if the project has a refine script in package.json\n */\nexport const hasDefaultScript = (): ReturnType => {\n  const packageJson = getPackageJson();\n\n  const scripts = packageJson.scripts || {};\n\n  const isDefault =\n    ((scripts?.dev || \"\") as string).match(/refine dev(\\s|$|;){1}/) !== null;\n\n  return {\n    dev: isDefault,\n  };\n};\n","import { Command, Option } from \"commander\";\nimport { getProjectType } from \"@utils/project\";\nimport { projectScripts } from \"../projectScripts\";\nimport { runScript } from \"../runScript\";\nimport { updateNotifier } from \"src/update-notifier\";\nimport { getPlatformOptionDescription, getRunnerDescription } from \"../utils\";\nimport { ProjectTypes } from \"@definitions/projectTypes\";\n\nconst build = (program: Command) => {\n    return program\n        .command(\"build\")\n        .description(getRunnerDescription(\"build\"))\n        .allowUnknownOption(true)\n        .addOption(\n            new Option(\n                \"-p, --platform <platform>\",\n                getPlatformOptionDescription(),\n            ).choices(\n                Object.values(ProjectTypes).filter(\n                    (type) => type !== ProjectTypes.UNKNOWN,\n                ),\n            ),\n        )\n        .argument(\"[args...]\")\n        .action(action);\n};\n\nconst action = async (\n    args: string[],\n    { platform }: { platform: ProjectTypes },\n) => {\n    const projectType =  getProjectType(platform);\n\n    const binPath = projectScripts[projectType].getBin(\"build\");\n    const command = projectScripts[projectType].getBuild(args);\n\n\n    await updateNotifier();\n\n    try {\n        await runScript(binPath, command);\n    } catch (error) {\n        process.exit(1);\n    }\n};\n\nexport default build;\n","import { getPreferedPM, getScripts } from \"@utils/package\";\nimport chalk from \"chalk\";\nimport type { Command } from \"commander\";\nimport { runScript } from \"../runScript\";\n\nconst run = (program: Command) => {\n  return program\n    .command(\"run\")\n    .description(\n      \"Runs a defined package script. If no `command` is provided, it will list the available scripts\",\n    )\n    .allowUnknownOption(true)\n    .argument(\"[command] [args...]\")\n    .action(action);\n};\n\nconst action = async (args: string[]) => {\n  const [script, ...restArgs] = args;\n\n  const scriptsInPackage = getScripts();\n\n  // Show available scripts when no script is provided\n  if (!script) {\n    console.log(`Available via ${chalk.blue(\"`refine run`\")}:\\n`);\n    for (const [key, value] of Object.entries(scriptsInPackage)) {\n      console.log(`  ${key}`);\n      console.log(`    ${chalk.dim(value)}`);\n      console.log();\n    }\n\n    return;\n  }\n\n  // Check if script exists in package.json\n  const isDefinedScript = Object.keys(scriptsInPackage).includes(script);\n  // If script is not defined, run from node_modules\n  if (!isDefinedScript) {\n    const binPath = `${process.cwd()}/node_modules/.bin/${script}`;\n    runScript(binPath, restArgs);\n    return;\n  }\n\n  const pm = await getPreferedPM();\n  runScript(pm.name, [\"run\", script, ...restArgs]);\n};\n\nexport default run;\n","import React from \"react\";\nimport path from \"path\";\nimport chalk from \"chalk\";\nimport inquirer from \"inquirer\";\nimport type { Command, OptionValues } from \"commander\";\nimport inquirerAutoCompletePrompt from \"inquirer-autocomplete-prompt\";\nimport { ensureFile, pathExists, readFile, writeFile } from \"fs-extra\";\n\nimport { getRefineConfig } from \"@utils/swizzle\";\nimport { prettierFormat } from \"@utils/swizzle/prettierFormat\";\nimport {\n  getInstalledRefinePackagesFromNodeModules,\n  isPackageHaveRefineConfig,\n} from \"@utils/package\";\n\nimport { printSwizzleMessage } from \"@components/swizzle-message\";\n\nimport type { SwizzleFile } from \"@definitions\";\nimport { parseSwizzleBlocks } from \"@utils/swizzle/parseSwizzleBlocks\";\nimport { reorderImports } from \"@utils/swizzle/import\";\nimport { SWIZZLE_CODES } from \"@utils/swizzle/codes\";\nimport boxen from \"boxen\";\nimport { getPathPrefix } from \"@utils/swizzle/getPathPrefix\";\nimport { installRequiredPackages } from \"./install-required-packages\";\n\nconst swizzle = (program: Command) => {\n  return program\n    .command(\"swizzle\")\n    .description(\n      `Export a component or a function from ${chalk.bold(\n        \"Refine\",\n      )} packages to customize it in your project`,\n    )\n    .action(action);\n};\n\nconst getAutocompleteSource =\n  (\n    rawList: Array<{\n      label: string;\n      group?: string;\n      value?: Record<string, unknown>;\n    }>,\n  ) =>\n  (_answers: {}, input = \"\") => {\n    const filtered = rawList.filter(\n      (el) =>\n        el.label.toLowerCase().includes(input.toLowerCase()) ||\n        el.group?.toLowerCase().includes(input.toLowerCase()),\n    );\n\n    return filtered.flatMap((component, index, arr) => {\n      const hasTitle =\n        component?.group && arr[index - 1]?.group !== component.group;\n      const withTitle =\n        hasTitle && component.group\n          ? [new inquirer.Separator(chalk.bold(component.group))]\n          : [];\n\n      return [\n        ...withTitle,\n        {\n          name: ` ${component.label}`,\n          value: component?.value ? component.value : component,\n        },\n      ];\n    });\n  };\n\nconst action = async (_options: OptionValues) => {\n  inquirer.registerPrompt(\"autocomplete\", inquirerAutoCompletePrompt);\n\n  const installedPackages = await getInstalledRefinePackagesFromNodeModules();\n\n  const packagesWithConfig: Array<{ name: string; path: string }> = [];\n\n  await Promise.all(\n    installedPackages.map(async (pkg) => {\n      const hasConfig = await isPackageHaveRefineConfig(pkg.path);\n      const isNotDuplicate =\n        packagesWithConfig.findIndex((el) => el.name === pkg.name) === -1;\n      if (hasConfig && isNotDuplicate) {\n        packagesWithConfig.push(pkg);\n      }\n    }),\n  );\n\n  if (packagesWithConfig.length === 0) {\n    console.log(\"No Refine packages found with swizzle configuration.\");\n    return;\n  }\n\n  console.log(\n    `${boxen(\n      `Found ${chalk.blueBright(\n        packagesWithConfig.length,\n      )} installed ${chalk.blueBright.bold(\n        \"Refine\",\n      )} packages with swizzle configuration.`,\n      {\n        padding: 1,\n        textAlignment: \"center\",\n        dimBorder: true,\n        borderColor: \"blueBright\",\n        borderStyle: \"round\",\n      },\n    )}\\n`,\n  );\n\n  const packageConfigs = await Promise.all(\n    packagesWithConfig.map(async (pkg) => {\n      const config = (await getRefineConfig(pkg.path, true)) ??\n        (await getRefineConfig(pkg.path, false)) ?? {\n          swizzle: { items: [] },\n        };\n      return {\n        ...pkg,\n        config,\n      };\n    }),\n  );\n\n  const { selectedPackage } = await inquirer.prompt<{\n    selectedPackage: (typeof packageConfigs)[number];\n  }>([\n    {\n      type: \"autocomplete\",\n      pageSize: 10,\n      name: \"selectedPackage\",\n      message: \"Which package do you want to swizzle?\",\n      emptyText: \"No packages found.\",\n      source: getAutocompleteSource(\n        packageConfigs\n          .sort((a, b) =>\n            (a.config?.group ?? \"\").localeCompare(b.config?.group ?? \"\"),\n          )\n          .map((pkg) => ({\n            label: pkg.config?.name ?? pkg.name,\n            value: pkg,\n            group: pkg.config?.group,\n          })),\n      ),\n    },\n  ]);\n\n  const {\n    swizzle: { items, transform },\n  } = selectedPackage.config;\n\n  let selectedComponent: SwizzleFile | undefined = undefined;\n\n  if (items.length === 0) {\n    console.log(\n      `No swizzle items found for ${chalk.bold(\n        selectedPackage.config?.name ?? selectedPackage.name,\n      )}`,\n    );\n    return;\n  }\n  if (items.length === 1) {\n    selectedComponent = items[0];\n  } else if (items.length > 1) {\n    const response = await inquirer.prompt<{\n      selectedComponent: SwizzleFile;\n    }>([\n      {\n        type: \"list\",\n        pageSize: 10,\n        name: \"selectedComponent\",\n        message: \"Which component do you want to swizzle?\",\n        emptyText: \"No components found.\",\n        choices: getAutocompleteSource(\n          items.sort((a, b) => a.group.localeCompare(b.group)),\n        )({}, \"\"),\n      },\n    ]);\n    selectedComponent = response.selectedComponent;\n  }\n\n  if (!selectedComponent) {\n    console.log(\n      `No swizzle items selected for ${chalk.bold(\n        selectedPackage.config?.name ?? selectedPackage.name,\n      )}`,\n    );\n    return;\n  }\n\n  // this will be prepended to `destPath` values\n  const projectPathPrefix = getPathPrefix();\n\n  const createdFiles = await Promise.all(\n    selectedComponent.files.map(async (file) => {\n      try {\n        const srcPath = file.src\n          ? path.join(selectedPackage.path, file.src)\n          : undefined;\n        const destPath = file.dest\n          ? path.join(process.cwd(), projectPathPrefix, file.dest)\n          : undefined;\n\n        if (!srcPath) {\n          console.log(\"No src path found for file\", file);\n          return [\"\", SWIZZLE_CODES.SOURCE_PATH_NOT_FOUND] as [\n            targetPath: string,\n            statusCode: string,\n          ];\n        }\n\n        if (!destPath) {\n          console.log(\"No destination path found for file\", file);\n          return [\"\", SWIZZLE_CODES.TARGET_PATH_NOT_FOUND] as [\n            targetPath: string,\n            statusCode: string,\n          ];\n        }\n\n        const hasSrc = await pathExists(srcPath);\n\n        if (!hasSrc) {\n          return [destPath, SWIZZLE_CODES.SOURCE_PATH_NOT_A_FILE] as [\n            targetPath: string,\n            statusCode: string,\n          ];\n        }\n\n        const srcContent = await readFile(srcPath, \"utf-8\");\n        const isDestExist = await pathExists(destPath);\n\n        if (isDestExist) {\n          return [destPath, SWIZZLE_CODES.TARGET_ALREADY_EXISTS] as [\n            targetPath: string,\n            statusCode: string,\n          ];\n        }\n\n        await ensureFile(destPath);\n\n        const parsedContent = parseSwizzleBlocks(srcContent);\n\n        const fileTransformedContent =\n          file.transform?.(parsedContent) ?? parsedContent;\n\n        const transformedContent =\n          transform?.(fileTransformedContent, srcPath, destPath) ??\n          fileTransformedContent;\n\n        const reorderedContent = reorderImports(transformedContent);\n\n        const formatted = await prettierFormat(reorderedContent);\n\n        await writeFile(destPath, formatted);\n\n        return [destPath, SWIZZLE_CODES.SUCCESS] as [\n          targetPath: string,\n          statusCode: string,\n        ];\n      } catch (error) {\n        return [\"\", SWIZZLE_CODES.UNKNOWN_ERROR] as [\n          targetPath: string,\n          statusCode: string,\n        ];\n      }\n    }),\n  );\n\n  if (createdFiles.length > 0) {\n    printSwizzleMessage({\n      files: createdFiles,\n      label: selectedComponent.label,\n      message: selectedComponent.message,\n    });\n\n    if (selectedComponent?.requiredPackages?.length) {\n      await installRequiredPackages(selectedComponent.requiredPackages);\n    }\n  }\n};\n\nexport default swizzle;\n","import path from \"path\";\nimport type { RefineConfig } from \"../../definitions\";\nimport { provideCliHelpers } from \"./provideCliHelpers\";\n\nexport const getRefineConfig = async (\n  packagePath: string,\n  isAbsolute?: boolean,\n) => {\n  try {\n    provideCliHelpers(packagePath, isAbsolute);\n\n    const config = require(\n      path.join(\n        isAbsolute ? packagePath : path.join(process.cwd(), packagePath),\n        \"refine.config.js\",\n      ),\n    ) as RefineConfig;\n\n    return config;\n  } catch (error) {\n    return undefined;\n  }\n};\n","import path from \"path\";\nimport * as RefineCLI from \"../../index\";\nimport { getFileContent } from \"./getFileContent\";\n\nconst Module = require(\"module\");\nconst originalRequire = Module.prototype.require;\n\nexport const provideCliHelpers = (\n  packagePath: string,\n  isAbsolute?: boolean,\n) => {\n  Module.prototype.require = function (...args: Parameters<NodeRequire>) {\n    if ((args[0] as unknown as string) === \"@refinedev/cli\") {\n      return {\n        ...RefineCLI,\n        getFileContent: (filePath: string) => {\n          return getFileContent.call(\n            {\n              absolutePackageDir: isAbsolute\n                ? packagePath\n                : path.join(process.cwd(), packagePath),\n            },\n            filePath,\n          );\n        },\n      };\n    }\n\n    //do your thing here\n    return originalRequire.apply(this, args);\n  };\n};\n","export * from \"./definitions/index.js\";\nexport { getImports, getNameChangeInImport } from \"./utils/swizzle/import.js\";\nexport { appendAfterImports } from \"./utils/swizzle/appendAfterImports.js\";\nexport { getFileContent } from \"./utils/swizzle/getFileContent.js\";\nexport type { ImportMatch, NameChangeMatch } from \"./utils/swizzle/import.js\";\n","const packageRegex =\n  /import(?:\\s+(type))?\\s*(?:([^\\s\\{\\},]+)\\s*(?:,\\s*)?)?(\\{[^}]+\\})?\\s*(?:\\*\\s*as\\s+([^\\s\\{\\}]+)\\s*)?from\\s*['\"]([^'\"]+)['\"];?/g;\n\nconst nameChangeRegex = /((?:\\w|\\s|_)*)( as )((?:\\w|\\s|_)*)( |,)?/g;\n\nexport type ImportMatch = {\n  statement: string;\n  importPath: string;\n  defaultImport?: string;\n  namedImports?: string;\n  namespaceImport?: string;\n  isType?: boolean;\n};\n\nexport type NameChangeMatch = {\n  statement: string;\n  fromName: string;\n  toName: string;\n  afterCharacter?: string;\n};\n\nexport const getImports = (content: string): Array<ImportMatch> => {\n  const matches = content.matchAll(packageRegex);\n\n  const imports: Array<ImportMatch> = [];\n\n  for (const match of matches) {\n    const [\n      statement,\n      typePrefix,\n      defaultImport,\n      namedImports,\n      namespaceImport,\n      importPath,\n    ] = match;\n\n    imports.push({\n      isType: typePrefix === \"type\",\n      statement,\n      importPath,\n      ...(defaultImport && { defaultImport }),\n      ...(namedImports && { namedImports }),\n      ...(namespaceImport && { namespaceImport }),\n    });\n  }\n\n  return imports?.filter(Boolean);\n};\n\nexport const getNameChangeInImport = (\n  namedImportString: string,\n): Array<NameChangeMatch> => {\n  const matches = namedImportString.matchAll(nameChangeRegex);\n\n  const nameChanges: Array<NameChangeMatch> = [];\n\n  for (const match of matches) {\n    const [statement, fromName, _as, toName, afterCharacter] = match;\n\n    nameChanges.push({\n      statement,\n      fromName: fromName.trim(),\n      toName: toName.trim(),\n      afterCharacter,\n    });\n  }\n\n  return nameChanges;\n};\n\n/** @internal */\nexport const getContentBeforeImport = (\n  content: string,\n  importMatch: ImportMatch,\n): string => {\n  // get the content before the import statement and between the last import statement and the current one\n  const contentBeforeImport = content.substring(\n    0,\n    content.indexOf(importMatch.statement),\n  );\n  // get the last import statement\n  const lastImportStatement = getImports(contentBeforeImport).pop();\n\n  // if there is no last import statement, return the content before the current import statement\n  if (!lastImportStatement) {\n    return contentBeforeImport;\n  }\n\n  // get the content between the last import statement and the current one\n  const contentBetweenImports = contentBeforeImport.substring(\n    contentBeforeImport.indexOf(lastImportStatement?.statement) +\n      lastImportStatement?.statement?.length,\n  );\n\n  // return the content before the current import statement and between the last import statement and the current one\n  return contentBetweenImports;\n};\n\n/** @internal */\nexport const isImportHasBeforeContent = (\n  content: string,\n  importMatch: ImportMatch,\n): boolean => {\n  const contentBeforeImport = importMatch\n    ? getContentBeforeImport(content, importMatch)\n    : \"\";\n\n  return !!contentBeforeImport.trim();\n};\n\nconst IMPORT_ORDER = [\"react\", \"@refinedev/core\", \"@refinedev/\"];\n\nexport const reorderImports = (content: string): string => {\n  let newContent = content;\n  // imports can have comments before them, we need to preserve those comments and import statements.\n  // so we need to filter out the imports with comments before.\n  const allImports = getImports(content);\n  // remove `import type` imports\n  const allModuleImports = allImports.filter(\n    (importMatch) => !importMatch.isType,\n  );\n  const typeImports = allImports.filter((importMatch) => importMatch.isType);\n\n  const importsWithBeforeContent: ImportMatch[] = [];\n  const importsWithoutBeforeContent: ImportMatch[] = [];\n\n  // // remove all type imports\n  typeImports.forEach((importMatch) => {\n    newContent = newContent.replace(`${importMatch.statement}\\n`, \"\");\n  });\n\n  allModuleImports.forEach((importMatch) => {\n    if (isImportHasBeforeContent(newContent, importMatch)) {\n      importsWithBeforeContent.push(importMatch);\n    } else {\n      importsWithoutBeforeContent.push(importMatch);\n    }\n  });\n\n  // insertion point is the first import statement, others will be replaced to empty string and added to the first import line\n  const insertionPoint = newContent.indexOf(\n    importsWithoutBeforeContent?.[0]?.statement,\n  );\n\n  // remove all the imports without comments before\n  importsWithoutBeforeContent.forEach((importMatch) => {\n    newContent = newContent.replace(importMatch.statement, \"\");\n  });\n\n  // we need to merge the imports from the same package unless one of them is a namespace import]\n  const importsByPackage = importsWithoutBeforeContent.reduce(\n    (acc, importMatch) => {\n      const { importPath } = importMatch;\n\n      if (acc[importPath]) {\n        acc[importPath].push(importMatch);\n      } else {\n        acc[importPath] = [importMatch];\n      }\n\n      return acc;\n    },\n    {} as Record<string, ImportMatch[]>,\n  );\n\n  // merge the imports from the same package\n  const mergedImports = Object.entries(importsByPackage).map(\n    ([importPath, importMatches]) => {\n      // example: A\n      const defaultImport = importMatches.find(\n        (importMatch) => importMatch.defaultImport,\n      );\n\n      // example: * as A\n      const namespaceImport = importMatches.find(\n        (importMatch) => importMatch.namespaceImport,\n      );\n\n      // example: { A, B }\n      // example: { A as C, B }\n      // content inside the curly braces should be merged\n      const namedImports = importMatches\n        .filter((importMatch) => importMatch.namedImports)\n        .map((importMatch) => {\n          // remove curly braces and trim then split by comma (can be multiline)\n          const namedImports = (importMatch.namedImports ?? \"\")\n            .replace(/{|}/g, \"\")\n            .trim()\n            .split(\",\")\n            .map((namedImport) => namedImport.trim());\n\n          return namedImports.filter(Boolean).join(\", \");\n        })\n        .join(\", \");\n\n      let importLine = \"\";\n\n      // default import and namespace import can not be used together\n      // but we can use default import and named imports together\n      // so we need to merge them\n      if (namespaceImport) {\n        importLine += `${namespaceImport.statement}\\n`;\n      }\n      if (defaultImport || namedImports) {\n        if (defaultImport && namedImports) {\n          importLine += `import ${defaultImport.defaultImport}, { ${namedImports} } from \"${importMatches[0].importPath}\";\\n`;\n        } else if (defaultImport) {\n          importLine += `import ${defaultImport.defaultImport} from \"${importMatches[0].importPath}\";\\n`;\n        } else {\n          importLine += `import { ${namedImports} } from \"${importMatches[0].importPath}\";\\n`;\n        }\n      }\n\n      return [importPath, importLine] as [\n        importPath: string,\n        importLine: string,\n      ];\n    },\n  );\n\n  // sort the imports without comments before\n  // sort should be done by IMPORT_ORDER and alphabetically\n  // priority is exact match in IMPORT_ORDER, then includes match in IMPORT_ORDER, then alphabetically\n  const sortedImports = [...mergedImports].sort(\n    ([aImportPath], [bImportPath]) => {\n      const aImportOrderIndex = IMPORT_ORDER.findIndex((order) =>\n        aImportPath.includes(order),\n      );\n      const bImportOrderIndex = IMPORT_ORDER.findIndex((order) =>\n        bImportPath.includes(order),\n      );\n\n      if (aImportOrderIndex === bImportOrderIndex) {\n        return aImportPath.localeCompare(bImportPath);\n      }\n\n      if (aImportOrderIndex === -1) {\n        return 1;\n      }\n\n      if (bImportOrderIndex === -1) {\n        return -1;\n      }\n\n      return aImportOrderIndex - bImportOrderIndex;\n    },\n  );\n\n  // add the sorted imports to the insertion point keep the before and after content\n  // add the type imports after the sorted imports\n  const joinedModuleImports = sortedImports\n    .map(([, importLine]) => importLine)\n    .join(\"\");\n  const joinedTypeImports = [\n    ...typeImports.map((importMatch) => importMatch.statement),\n    \"\",\n  ].join(\"\\n\");\n\n  newContent =\n    newContent.substring(0, insertionPoint) +\n    joinedModuleImports +\n    joinedTypeImports +\n    newContent.substring(insertionPoint);\n\n  return newContent;\n};\n","import { getImports } from \"./import\";\n\nexport const appendAfterImports = (content: string, append: string): string => {\n  const imports = getImports(content);\n  const lastImport = imports[imports.length - 1];\n\n  const lastImportIndex = lastImport\n    ? content.indexOf(lastImport.statement)\n    : content.length - 1;\n\n  return `${content.slice(\n    0,\n    lastImportIndex + lastImport?.statement.length,\n  )}\\n${append}\\n${content.slice(\n    lastImportIndex + lastImport?.statement.length,\n  )}`;\n};\n","import { readFileSync } from \"fs-extra\";\nimport { join } from \"path\";\n\nexport function getFileContent(\n  this: undefined | { absolutePackageDir?: string },\n  path: string,\n): string | undefined {\n  if (!this?.absolutePackageDir) {\n    return undefined;\n  }\n  try {\n    return readFileSync(join(this.absolutePackageDir, path)).toString();\n  } catch (err) {\n    return undefined;\n  }\n}\n","import React from \"react\";\nimport dedent from \"dedent\";\nimport { SWIZZLE_CODES } from \"@utils/swizzle/codes\";\nimport chalk from \"chalk\";\nimport { markedTerminalRenderer } from \"@utils/marked-terminal-renderer\";\n\ntype Params = {\n  label: string;\n  files: [targetPath: string, statusCode: string][];\n  message?: string;\n};\n\nexport const printSwizzleMessage = ({\n  label,\n  files,\n  message = \"**`Warning:`** You should use the component where you want to use it.\",\n}: Params) => {\n  const errors = files.filter(([, statusCode]) =>\n    Object.values(SWIZZLE_CODES)\n      .filter((code) => code !== SWIZZLE_CODES.SUCCESS)\n      .includes(statusCode),\n  );\n\n  let status = \"success\";\n\n  switch (errors.length) {\n    // no errors\n    case 0:\n      status = \"success\";\n      break;\n    // all errors\n    case files.length:\n      status = \"error\";\n      break;\n    // some errors\n    default:\n      status = \"warning\";\n      break;\n  }\n\n  const clearFilePath = (filePath: string) => {\n    const relative = filePath?.replace(process.cwd(), \"\");\n\n    if (relative?.startsWith(\"/\")) {\n      return relative.slice(1);\n    }\n    if (relative?.startsWith(\"./\")) {\n      return relative.slice(2);\n    }\n    return relative;\n  };\n\n  const printStatusMessage = () => {\n    switch (status) {\n      case \"success\":\n        console.log(\n          chalk.blueBright(`Successfully swizzled ${chalk.bold(label)}`),\n        );\n        return;\n      case \"warning\":\n        console.log(\n          chalk.yellowBright(\n            `Swizzle completed with errors for ${chalk.bold(label)}`,\n          ),\n        );\n        return;\n      case \"error\":\n        console.log(chalk.redBright(`Swizzle failed for ${chalk.bold(label)}`));\n        return;\n      default:\n        return;\n    }\n  };\n\n  const printFiles = () => {\n    const chalks = [];\n\n    chalks.push(chalk.dim(`File${files.length > 1 ? \"s\" : \"\"} created:`));\n    chalks.push(\n      files\n        .map(([targetPath, statusCode]) => {\n          if (statusCode === SWIZZLE_CODES.SUCCESS) {\n            return chalk.cyanBright.dim(` - ${clearFilePath(targetPath)}`);\n          }\n          if (statusCode === SWIZZLE_CODES.TARGET_ALREADY_EXISTS) {\n            return chalk.cyanBright.dim(\n              ` - ${chalk.yellowBright.bold(\n                \"[FILE_ALREADY_EXISTS] \",\n              )}${clearFilePath(targetPath)}`,\n            );\n          }\n          if (statusCode === SWIZZLE_CODES.SOURCE_PATH_NOT_A_FILE) {\n            return chalk.cyanBright.dim(\n              ` - ${chalk.yellowBright.bold(\n                \"[SOURCE NOT FOUND] \",\n              )}${clearFilePath(targetPath)}`,\n            );\n          }\n\n          return chalk.cyanBright.dim(\n            ` - ${chalk.yellowBright.bold(`[${statusCode}]`)}${clearFilePath(\n              targetPath,\n            )}`,\n          );\n        })\n        .join(\"\\n\"),\n    );\n\n    console.log(chalks.join(\"\\n\"));\n  };\n\n  const printSwizzleMessage = () => {\n    if (message && status !== \"error\") {\n      console.log(markedTerminalRenderer(dedent(`\\n${message}`)));\n    }\n  };\n\n  console.log(\"\");\n  printStatusMessage();\n  printFiles();\n  console.log(\"\");\n  printSwizzleMessage();\n};\n","export const SWIZZLE_CODES = {\n  SUCCESS: \"SUCCESS\",\n  UNKNOWN_ERROR: \"UNKNOWN_ERROR\",\n  SOURCE_PATH_NOT_FOUND: \"SOURCE_PATH_NOT_FOUND\",\n  TARGET_PATH_NOT_FOUND: \"TARGET_PATH_NOT_FOUND\",\n  SOURCE_PATH_NOT_A_FILE: \"SOURCE_PATH_NOT_A_FILE\",\n  TARGET_ALREADY_EXISTS: \"TARGET_ALREADY_EXISTS\",\n};\n","import chalk from \"chalk\";\nimport cardinal from \"cardinal\";\nimport boxen from \"boxen\";\n\nconst getCodeData = (content: string): { title?: string; code: string } => {\n  const titleRegexp = /^(?:\\/\\/\\s?title:\\s?)(.*?)\\n/g;\n\n  const [commentLine, titleMatch] = titleRegexp.exec(content) ?? [];\n\n  if (titleMatch) {\n    const title = titleMatch.trim();\n    const code = content.replace(commentLine || \"\", \"\");\n\n    return { title, code };\n  }\n\n  return { code: content };\n};\n\nexport const renderCodeMarkdown = (content: string) => {\n  const { title, code: rawCode } = getCodeData(content);\n\n  let highlighted = \"\";\n\n  // run cardinal on codeContent\n  try {\n    const code = cardinal.highlight(rawCode, {\n      jsx: true,\n    });\n    highlighted = code;\n  } catch (err) {\n    highlighted = rawCode;\n  }\n\n  // wrap to boxen\n  const boxed = boxen(highlighted, {\n    padding: 1,\n    margin: 0,\n    borderStyle: \"round\",\n    borderColor: \"gray\",\n    titleAlignment: \"left\",\n    title: title ? chalk.bold(title) : undefined,\n  });\n\n  return boxed;\n};\n","import { renderCodeMarkdown } from \"@utils/swizzle/renderCodeMarkdown\";\nimport { marked } from \"marked\";\nimport TerminalRenderer from \"marked-terminal\";\n\nexport const markedTerminalRenderer = (markdown: string) => {\n  return marked(markdown, {\n    renderer: new TerminalRenderer({ code: renderCodeMarkdown }) as any,\n  });\n};\n","export const parseSwizzleBlocks = (content: string) => {\n  const regex =\n    /(\\/\\/|\\/\\*)(\\s?)swizzle-remove-start([\\s\\S]*?)(\\/\\/|\\/\\*)(\\s?)swizzle-remove-end(\\s*)(\\*\\/)?/g;\n\n  return content.replace(regex, \"\");\n};\n","import type { ProjectTypes } from \"@definitions/projectTypes\";\nimport { getProjectType } from \"@utils/project\";\nimport { getFilesPathByProject } from \"@utils/resource\";\n\nexport const getPathPrefix = () => {\n  let projectType: ProjectTypes | undefined = undefined;\n\n  try {\n    projectType = getProjectType();\n  } catch (error) {\n    projectType = undefined;\n  }\n\n  const pathPrefix = getFilesPathByProject(projectType);\n\n  return pathPrefix;\n};\n","import inquirer from \"inquirer\";\nimport chalk from \"chalk\";\nimport { getPreferedPM, pmCommands } from \"@utils/package\";\n\nexport const promptForPackageInstallation = async (\n  requiredPackages: string[],\n) => {\n  const message =\n    \"This component requires following packages to be installed:\\n\"\n      .concat(requiredPackages.map((pkg) => ` - ${pkg}`).join(\"\\n\"))\n      .concat(\"\\nDo you want to install them?\");\n\n  const { installRequiredPackages } = await inquirer.prompt<{\n    installRequiredPackages: boolean;\n  }>([\n    {\n      type: \"confirm\",\n      name: \"installRequiredPackages\",\n      default: true,\n      message,\n    },\n  ]);\n\n  return installRequiredPackages;\n};\n\nexport const displayManualInstallationCommand = async (\n  requiredPackages: string[],\n) => {\n  const pm = await getPreferedPM();\n  const pmCommand = pmCommands[pm.name].add.join(\" \");\n  const packages = requiredPackages.join(\" \");\n  const command = `${pm.name} ${pmCommand} ${packages}`;\n\n  console.log(\"\\nYou can install them manually by running this command:\");\n  console.log(chalk.bold.blueBright(command));\n};\n","import { installPackages } from \"@utils/package\";\nimport {\n  displayManualInstallationCommand,\n  promptForPackageInstallation,\n} from \"./utils\";\n\nexport const installRequiredPackages = async (requiredPackages: string[]) => {\n  const installRequiredPackages =\n    await promptForPackageInstallation(requiredPackages);\n\n  if (!installRequiredPackages) {\n    await displayManualInstallationCommand(requiredPackages);\n  } else {\n    await installPackages(requiredPackages);\n  }\n};\n","import inquirer from \"inquirer\";\nimport center from \"center-align\";\nimport { type Command, Option } from \"commander\";\nimport PackageJson from \"@npmcli/package-json\";\nimport spinner from \"@utils/spinner\";\nimport {\n  getLatestMinorVersionOfPackage,\n  getWantedWithPreferredWildcard,\n  isRefineUptoDate,\n} from \"@commands/check-updates\";\nimport { getPreferedPM, installPackages, pmCommands } from \"@utils/package\";\nimport { promptInteractiveRefineUpdate } from \"@commands/update/interactive\";\nimport type {\n  PackageDependency,\n  RefinePackageInstalledVersionData,\n} from \"@definitions/package\";\nimport { getVersionTable } from \"@components/version-table\";\nimport chalk from \"chalk\";\n\ntype SelectedPackage = PackageDependency;\n\nenum Tag {\n  WANTED = \"wanted\",\n  LATEST = \"latest\",\n  NEXT = \"next\",\n}\n\nenum InstallationType {\n  WANTED = \"wanted\",\n  MINOR = \"minor\",\n  INTERACTIVE = \"interactive\",\n}\n\ninterface OptionValues {\n  tag: Tag;\n  dryRun: boolean;\n  all: boolean;\n}\n\nconst load = (program: Command) => {\n  return program\n    .command(\"update\")\n    .description(\n      \"Interactively select and update all `Refine` packages to selected version. To skip the interactive mode, use the `--all` option.\",\n    )\n    .addOption(\n      new Option(\"-t, --tag [tag]\", \"Select version to update to.\")\n        .choices([\"next\", \"latest\"])\n        .default(\n          \"wanted\",\n          \"Version ranges in the `package.json` will be installed\",\n        ),\n    )\n    .option(\n      \"-a, --all\",\n      \"Update all `Refine` packages to the selected `tag`. If `tag` is not provided, version ranges in the `package.json` will be installed. This option skips the interactive mode.\",\n      false,\n    )\n    .option(\n      \"-d, --dry-run\",\n      \"Get outdated packages installation command without automatic updating. If `tag` is not provided, version ranges in the `package.json` will be used.\",\n      false,\n    )\n    .action(action);\n};\n\nconst action = async (options: OptionValues) => {\n  const { tag, dryRun, all } = options;\n\n  const packages = await spinner(isRefineUptoDate, \"Checking for updates...\");\n  if (!packages?.length) {\n    console.log(\"All `Refine` packages are up to date ðŸŽ‰\");\n    return;\n  }\n\n  let selectedPackages: SelectedPackage | null | undefined = null;\n\n  if (all) {\n    const selectedPackages = await preparePackagesToInstall(tag, packages);\n    if (!selectedPackages) return;\n\n    if (dryRun) {\n      printInstallCommand(selectedPackages);\n      return;\n    }\n\n    runInstallation(selectedPackages);\n    return;\n  }\n\n  // print the table of available updates\n  const { table, width } = getVersionTable(packages) ?? \"\";\n  console.log(center(\"Available Updates\", width));\n  console.log(table);\n  console.log(\n    `- ${chalk.yellow(\n      chalk.bold(\"Current\"),\n    )}: The version of the package that is currently installed`,\n  );\n  console.log(\n    `- ${chalk.yellow(\n      chalk.bold(\"Wanted\"),\n    )}: The maximum version of the package that satisfies the semver range specified in \\`package.json\\``,\n  );\n  console.log(\n    `- ${chalk.yellow(\n      chalk.bold(\"Latest\"),\n    )}: The latest version of the package available on npm`,\n  );\n  console.log();\n\n  const { installationType } = await inquirer.prompt<{\n    installationType: InstallationType;\n  }>([\n    {\n      type: \"list\",\n      name: \"installationType\",\n      message:\n        \"Do you want to update all Refine packages for minor and patch versions?\",\n      choices: [\n        {\n          name: `Update all packages to latest \"minor\" version without any breaking changes.`,\n          value: \"minor\",\n        },\n        {\n          name: \"Update all packages to the latest version that satisfies the semver(`wanted`) range specified in `package.json`\",\n          value: \"wanted\",\n        },\n        {\n          name: `Use interactive mode. Choose this option for \"major\" version updates.`,\n          value: \"interactive\",\n        },\n      ],\n    },\n  ]);\n\n  if (installationType === InstallationType.INTERACTIVE) {\n    selectedPackages = await promptInteractiveRefineUpdate(packages);\n  }\n  if (installationType === InstallationType.WANTED) {\n    selectedPackages = await preparePackagesToInstall(Tag.WANTED, packages);\n  }\n  if (installationType === InstallationType.MINOR) {\n    selectedPackages = await preparePackagesToInstall(\n      InstallationType.MINOR,\n      packages,\n    );\n  }\n\n  if (!selectedPackages) return;\n\n  if (dryRun) {\n    printInstallCommand(selectedPackages);\n  } else {\n    runInstallation(selectedPackages);\n  }\n};\n\nconst preparePackagesToInstall = async (\n  tag: Tag | InstallationType,\n  packages: RefinePackageInstalledVersionData[],\n): Promise<PackageDependency | null> => {\n  if (tag === Tag.WANTED) {\n    const isAllPackagesAtWantedVersion = packages.every(\n      (pkg) => pkg.current === pkg.wanted,\n    );\n    if (isAllPackagesAtWantedVersion) {\n      console.log();\n      console.log(\"âœ… All `Refine` packages are already at the wanted version\");\n      return null;\n    }\n  }\n\n  // empty line for better readability\n  console.log();\n\n  const packagesWithVersion: PackageDependency = {};\n  for (const pkg of packages) {\n    let version = pkg.latest;\n\n    if (tag === InstallationType.MINOR) {\n      const latestMinorVersion = await spinner(\n        () => getLatestMinorVersionOfPackage(pkg.name, pkg.wanted),\n        `Checking for the latest minor version of ${pkg.name}`,\n      );\n      version = `^${latestMinorVersion}`;\n    }\n    if (tag === Tag.WANTED) {\n      version = getWantedWithPreferredWildcard(pkg.name, pkg.wanted);\n    }\n    if (tag === Tag.LATEST) {\n      version = `^${pkg.latest}`;\n    }\n    if (tag === Tag.NEXT) {\n      version = Tag.NEXT;\n    }\n\n    packagesWithVersion[pkg.name] = version;\n  }\n\n  return packagesWithVersion;\n};\n\nconst printInstallCommand = async (packages: SelectedPackage) => {\n  const pm = await getPreferedPM();\n  const commandInstall = pmCommands[pm.name].add;\n  let packagesListAsString = \"\";\n  for (const [name, version] of Object.entries(packages)) {\n    packagesListAsString += `${name}@${version} `;\n  }\n  console.log();\n  console.log(`${pm.name} ${commandInstall.join(\" \")} ${packagesListAsString}`);\n};\n\nconst runInstallation = async (packagesToInstall: SelectedPackage) => {\n  console.log(\"Updating `Refine` packages...\");\n\n  // to install packages, first we need to manipulate the package.json file, then install the packages\n  const packageJson = await PackageJson.load(process.cwd());\n\n  packageJson.update({\n    dependencies: {\n      ...((packageJson.content.dependencies ?? {}) as { [x: string]: string }),\n      ...(packagesToInstall ?? {}),\n    },\n  });\n  await packageJson.save();\n\n  installPackages([], \"all\");\n};\n\nexport default load;\n","import inquirer from \"inquirer\";\nimport semverDiff from \"semver-diff\";\nimport chalk from \"chalk\";\nimport { findDuplicates } from \"@utils/array\";\nimport { parsePackageNameAndVersion } from \"@utils/package\";\nimport type {\n  PackageDependency,\n  RefinePackageInstalledVersionData,\n} from \"../../../definitions/package\";\n\ntype UIGroup = {\n  patch: {\n    name: string;\n    from: string;\n    to: string;\n  }[];\n  minor: {\n    name: string;\n    from: string;\n    to: string;\n  }[];\n  major: {\n    name: string;\n    from: string;\n    to: string;\n  }[];\n};\n\nexport const promptInteractiveRefineUpdate = async (\n  packages: RefinePackageInstalledVersionData[],\n) => {\n  const uiGroup = createUIGroup(packages);\n  if (!uiGroup) {\n    console.log(\"All `Refine` packages are up to date. ðŸŽ‰\");\n    return;\n  }\n\n  const inquirerUI = createInquirerUI(uiGroup);\n\n  const answers = await inquirer.prompt<{\n    packages: string[];\n  }>([\n    {\n      type: \"checkbox\",\n      name: \"packages\",\n      message: \"Choose packages to update\",\n      pageSize: inquirerUI.pageSize,\n      choices: inquirerUI.choices,\n      validate: validatePrompt,\n    },\n  ]);\n\n  if (answers.packages.length > 0) {\n    // convert to object for easy access\n    const packagesObject: PackageDependency = {};\n    answers.packages.forEach((pckg) => {\n      const { name, version } = parsePackageNameAndVersion(pckg);\n      packagesObject[name] = version ?? \"latest\";\n    });\n\n    return packagesObject;\n  }\n\n  return null;\n};\n\nexport const validatePrompt = (input: string[]) => {\n  const inputParsed = input.map((pckg) => {\n    return parsePackageNameAndVersion(pckg);\n  });\n\n  const names = inputParsed.map((pckg) => pckg.name);\n  const duplicates = findDuplicates(names);\n\n  if (duplicates.length > 0) {\n    return `You can't update the same package more than once. Please choice one.\\n Duplicates: ${duplicates.join(\n      \", \",\n    )}`;\n  }\n\n  return true;\n};\n\nexport const createUIGroup = (\n  packages: RefinePackageInstalledVersionData[],\n): UIGroup | null => {\n  if (packages.length === 0) {\n    return null;\n  }\n\n  const packagesCategorized: UIGroup = {\n    patch: [],\n    minor: [],\n    major: [],\n  };\n\n  packages.forEach((pckg) => {\n    const current = pckg.current;\n\n    const diffWanted = semverDiff(current, pckg.wanted) as keyof UIGroup;\n    const diffLatest = semverDiff(current, pckg.latest) as keyof UIGroup;\n\n    if (diffWanted === diffLatest) {\n      if (diffLatest) {\n        packagesCategorized[diffLatest].push({\n          name: pckg.name,\n          from: current,\n          to: pckg.latest,\n        });\n        return;\n      }\n    }\n\n    if (diffWanted) {\n      packagesCategorized[diffWanted].push({\n        name: pckg.name,\n        from: current,\n        to: pckg.wanted,\n      });\n    }\n\n    if (diffLatest) {\n      packagesCategorized[diffLatest].push({\n        name: pckg.name,\n        from: current,\n        to: pckg.latest,\n      });\n    }\n  });\n\n  return packagesCategorized;\n};\n\nconst createInquirerUI = (uiGroup: UIGroup) => {\n  let maxNameLength = 0;\n  let maxFromLength = 0;\n\n  [uiGroup.patch, uiGroup.minor, uiGroup.major].forEach((group) => {\n    group.forEach((pckg) => {\n      if (pckg.name.length > maxNameLength) {\n        maxNameLength = pckg.name.length;\n      }\n\n      if (pckg.from.length > maxFromLength) {\n        maxFromLength = pckg.from.length;\n      }\n    });\n  });\n\n  maxNameLength += 2;\n\n  const choices: (\n    | inquirer.Separator\n    | {\n        name: string;\n        value: string;\n      }\n  )[] = [];\n\n  const packageColumnText = \"Package\".padEnd(maxNameLength);\n  const currentColumnText = \"From\".padEnd(maxFromLength);\n  const toColumnText = \"To\";\n  const header = `\\n   ${packageColumnText} ${currentColumnText}${toColumnText.padStart(\n    maxFromLength,\n  )}`;\n  choices.push(new inquirer.Separator(header));\n\n  if (uiGroup.patch.length > 0) {\n    choices.push(\n      new inquirer.Separator(chalk.reset.bold.blue(\"\\nPatch Updates\")),\n    );\n    uiGroup.patch.forEach((pckg) => {\n      choices.push({\n        name: `${pckg.name.padEnd(maxNameLength)} ${pckg.from.padStart(\n          maxFromLength,\n        )} -> ^${pckg.to}`,\n        value: `${pckg.name}@^${pckg.to}`,\n      });\n    });\n  }\n\n  if (uiGroup.minor.length > 0) {\n    choices.push(\n      new inquirer.Separator(chalk.reset.bold.blue(\"\\nMinor Updates\")),\n    );\n    uiGroup.minor.forEach((pckg) => {\n      choices.push({\n        name: `${pckg.name.padEnd(maxNameLength)} ${pckg.from.padStart(\n          maxFromLength,\n        )} -> ^${pckg.to}`,\n        value: `${pckg.name}@^${pckg.to}`,\n      });\n    });\n  }\n\n  if (uiGroup.major.length > 0) {\n    choices.push(\n      new inquirer.Separator(chalk.reset.bold.blue(\"\\nMajor Updates\")),\n    );\n    uiGroup.major.forEach((pckg) => {\n      choices.push({\n        name: `${pckg.name.padEnd(maxNameLength)} ${pckg.from.padStart(\n          maxFromLength,\n        )} -> ^${pckg.to}`,\n        value: `${pckg.name}@^${pckg.to}`,\n      });\n    });\n  }\n\n  const pageSize = choices.length + 6;\n\n  return { choices, pageSize };\n};\n","export const findDuplicates = (arr: (string | number)[]) => {\n  const duplicates = arr.filter((item, index) => arr.indexOf(item) !== index);\n  const unique = new Set(duplicates);\n  return Array.from(unique);\n};\n","import { getInstalledRefinePackages } from \"@utils/package\";\nimport type { Command } from \"commander\";\nimport envinfo from \"envinfo\";\nimport ora from \"ora\";\n\nconst whoami = (program: Command) => {\n  return program\n    .command(\"whoami\")\n    .description(\"View the details of the development environment\")\n    .action(action);\n};\n\nconst action = async () => {\n  const spinner = ora(\"Loading environment details...\").start();\n  const info = await envinfo.run(\n    {\n      System: [\"OS\", \"CPU\"],\n      Binaries: [\"Node\", \"Yarn\", \"npm\"],\n      Browsers: [\"Chrome\", \"Firefox\", \"Safari\"],\n    },\n    { showNotFound: true, markdown: true },\n  );\n\n  const packages = (await getInstalledRefinePackages()) || [];\n  const packagesMarkdown = packages\n    .map((pkg) => {\n      return ` - ${pkg.name}: ${pkg.version}`;\n    })\n    .join(\"\\n\");\n\n  spinner.stop();\n  console.log(info);\n  console.log(\"## Refine Packages:\");\n  console.log(packagesMarkdown);\n};\n\nexport default whoami;\n","import chalk from \"chalk\";\nimport inquirer, { type ListChoiceOptions } from \"inquirer\";\n\nimport type { IntegrationId } from \"./sub-commands/integration/packages\";\nimport { buildIntegrationChoices } from \"./sub-commands/integration/prompt\";\nimport { buildProviderChoices } from \"./sub-commands/provider/prompt\";\nimport type { ProviderId } from \"./sub-commands/provider/providers\";\n\nconst wrapChoices = (\n  group: string,\n  choices: ListChoiceOptions[],\n): ListChoiceOptions<AddCommandComponentAnswer>[] => {\n  return choices.map((choice) => {\n    return {\n      ...choice,\n      name: ` . ${choice.name}`,\n      value: {\n        group,\n        component: choice.value,\n      },\n    };\n  });\n};\n\ntype AddCommandComponentAnswer =\n  | { group: \"provider\"; component: ProviderId }\n  | { group: \"integration\"; component: IntegrationId }\n  | { group: \"resource\"; component: \"resource\" };\n\ninterface AddCommandAnswer {\n  component: AddCommandComponentAnswer;\n}\n\nexport const addCommandPrompt = async () => {\n  return await inquirer.prompt<AddCommandAnswer>([\n    {\n      type: \"list\",\n      name: \"component\",\n      message: \"What do you want to add?\",\n      choices: [\n        new inquirer.Separator(chalk.bold(\"Provider\")),\n        ...wrapChoices(\"provider\", buildProviderChoices()),\n        new inquirer.Separator(chalk.bold(\"Integration\")),\n        ...wrapChoices(\"integration\", buildIntegrationChoices()),\n        new inquirer.Separator(chalk.bold(\"Resource\")),\n        {\n          name: chalk.blueBright(\" .  Add new resource\"),\n          value: {\n            group: \"resource\",\n            component: \"resource\",\n          },\n        },\n      ],\n      pageSize: 25,\n    },\n  ]);\n};\n","import inquirer from \"inquirer\";\n\nimport { getProjectType } from \"@utils/project\";\nimport { availableIntegrations, type IntegrationId } from \"./packages\";\n\nexport const buildIntegrationChoices = () => {\n  const projectType = getProjectType();\n\n  const integrationChoices = availableIntegrations.map((integration) =>\n    integration.getChoice(projectType),\n  );\n\n  if (integrationChoices.every((choice) => choice.disabled)) {\n    return [\n      {\n        value: \"none\",\n        name: \"No integration available for this project type.\",\n      },\n      ...integrationChoices,\n    ];\n  }\n  return integrationChoices;\n};\n\nexport const addIntegrationPrompt = async () => {\n  return await inquirer.prompt<{ id: IntegrationId }>([\n    {\n      type: \"list\",\n      name: \"id\",\n      message: \"Which integration do you want to add?\",\n      choices: buildIntegrationChoices(),\n      default: \"none\",\n    },\n  ]);\n};\n","import { hasIncomatiblePackages, installMissingPackages } from \"@utils/package\";\nimport execa from \"execa\";\n\ninterface RunTransformerParams {\n  incompatiblePackages: string[];\n  requiredPackages: string[];\n  integrationName: string;\n  transformerFileName: string;\n}\n\nexport const runTransformer = async (params: RunTransformerParams) => {\n  const {\n    incompatiblePackages,\n    integrationName,\n    requiredPackages,\n    transformerFileName,\n  } = params;\n  if (hasIncomatiblePackages(incompatiblePackages)) return;\n\n  await installMissingPackages(requiredPackages);\n\n  console.log(`ðŸš€ Setting up ${integrationName}...`);\n\n  const jscodeshiftExecutable = require.resolve(\".bin/jscodeshift\");\n  const { stderr } = execa.sync(jscodeshiftExecutable, [\n    \"./\",\n    \"--extensions=ts,tsx,js,jsx\",\n    \"--parser=tsx\",\n    `--transform=${__dirname}/../src/transformers/integrations/${transformerFileName}.ts`,\n    \"--ignore-pattern=.cache\",\n    \"--ignore-pattern=node_modules\",\n    \"--ignore-pattern=build\",\n    \"--ignore-pattern=.next\",\n    \"--ignore-pattern=dist\",\n  ]);\n\n  if (stderr) {\n    console.log(stderr);\n  }\n\n  console.log(`ðŸŽ‰ ${integrationName} setup completed!`);\n};\n","import chalk from \"chalk\";\nimport type { IntegrationId } from \"../packages\";\n\ninterface IntegrationChoice {\n  id: IntegrationId;\n  title: string;\n  description: string;\n  disabled?: string;\n}\n\nexport const prettifyChoice = (choice: IntegrationChoice) => {\n  const { id, title, description, disabled } = choice;\n\n  if (disabled) {\n    return {\n      value: id,\n      name: `${chalk.gray(title)}`,\n      disabled: chalk.redBright(disabled),\n    };\n  }\n\n  return {\n    value: id,\n    name: `${chalk.blueBright(title)} - ${description}`,\n  };\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\n\nimport type { Integration } from \".\";\nimport { runTransformer } from \"../run-transformer\";\nimport { prettifyChoice } from \"../utils/prettify-choice\";\n\nconst id = \"ant-design\";\nconst name = \"Ant Design\";\nconst incompatiblePackages = [\"@remix-run/react\", \"next\"];\nconst requiredPackages = [\"antd\", \"@refinedev/antd\"];\nconst transformerFileName = \"ant-design\";\n\nexport const AntDesignIntegration: Integration = {\n  id,\n  getChoice: (projectType: ProjectTypes) => {\n    const title = \"Ant Design\";\n    const description = \"Setup Ant Design with Refine\";\n    let disabled;\n\n    if (\n      [\n        ProjectTypes.NEXTJS,\n        ProjectTypes.REMIX,\n        ProjectTypes.REMIX_VITE,\n        ProjectTypes.REMIX_SPA,\n      ].includes(projectType)\n    ) {\n      disabled =\n        \"Automatic setup only available Vite for now. See the documentation for manual installation: https://refine.dev/docs/ui-integrations/ant-design/introduction/#installation\";\n    }\n\n    return prettifyChoice({\n      id,\n      title,\n      description,\n      disabled,\n    });\n  },\n  runTransformer: async () => {\n    return await runTransformer({\n      incompatiblePackages,\n      integrationName: name,\n      requiredPackages,\n      transformerFileName,\n    });\n  },\n};\n","import { ProjectTypes } from \"@definitions/projectTypes\";\n\nimport type { Integration } from \".\";\nimport { runTransformer } from \"../run-transformer\";\nimport { prettifyChoice } from \"../utils/prettify-choice\";\n\nconst id = \"react-router\";\nconst name = \"React Router\";\nconst incompatiblePackages = [\"@remix-run/react\", \"next\"];\nconst requiredPackages = [\"react-router\", \"@refinedev/react-router\"];\nconst transformerFileName = \"react-router\";\n\nexport const ReactRouterIntegration: Integration = {\n  id,\n  getChoice: (projectType: ProjectTypes) => {\n    const title = \"React Router\";\n    const description = \"Setup routing with React Router\";\n    let disabled;\n\n    if (projectType === ProjectTypes.NEXTJS) {\n      disabled = `Can't be used with Next.js. https://nextjs.org/docs/app/building-your-application/routing`;\n    }\n\n    if (\n      projectType === ProjectTypes.REMIX ||\n      projectType === ProjectTypes.REMIX_VITE ||\n      projectType === ProjectTypes.REMIX_SPA\n    ) {\n      disabled = `Can't be used with Remix. https://remix.run/docs/en/main/discussion/routes`;\n    }\n\n    return prettifyChoice({\n      id,\n      title,\n      description,\n      disabled,\n    });\n  },\n  runTransformer: async () => {\n    return await runTransformer({\n      incompatiblePackages,\n      integrationName: name,\n      requiredPackages,\n      transformerFileName,\n    });\n  },\n};\n","import type { ProjectTypes } from \"../../../../../definitions/projectTypes\";\nimport { AntDesignIntegration } from \"./ant-design\";\nimport { ReactRouterIntegration } from \"./react-router\";\n\nexport type IntegrationId = \"ant-design\" | \"react-router\";\n\nexport interface Integration {\n  id: IntegrationId;\n  getChoice: (projectType: ProjectTypes) => {\n    name: string;\n    value: IntegrationId;\n    disabled?: string;\n  };\n  runTransformer: () => Promise<void>;\n}\n\nexport const availableIntegrations: Integration[] = [\n  AntDesignIntegration,\n  ReactRouterIntegration,\n];\n","import chalk from \"chalk\";\nimport inquirer from \"inquirer\";\n\nimport { getDefaultPath } from \"./create-providers\";\nimport { availableProviders, type ProviderId } from \"./providers\";\n\nexport const buildProviderChoices = () => {\n  return availableProviders.map((provider) => {\n    const { id, title, description } = provider;\n\n    return {\n      value: id,\n      name: `${chalk.blueBright(title)} - ${description}`,\n    };\n  });\n};\n\nexport const addProviderPrompt = async () => {\n  return await inquirer.prompt<{\n    providers: ProviderId[];\n    providersPath: string;\n  }>([\n    {\n      type: \"checkbox\",\n      name: \"providers\",\n      message: \"Which providers do you want to add?\",\n      choices: buildProviderChoices(),\n    },\n    {\n      type: \"input\",\n      name: \"providersPath\",\n      message: \"Where do you want to generate the providers?\",\n      default: getDefaultPath(),\n    },\n  ]);\n};\n","import { getProjectType } from \"@utils/project\";\nimport { getFilesPathByProject, getProviderPath } from \"@utils/resource\";\nimport {\n  copySync,\n  existsSync,\n  mkdirSync,\n  pathExistsSync,\n  readdirSync,\n} from \"fs-extra\";\nimport { join, relative } from \"path\";\nimport {\n  availableProviders,\n  type Provider,\n  type ProviderId,\n} from \"./providers\";\n\nconst baseTemplatePath = `${__dirname}/../templates/provider`;\nconst baseAssetsPath = `${__dirname}/../templates/assets`;\n\nexport const createProviders = (\n  providerIds: ProviderId[],\n  pathFromArgs?: string,\n) => {\n  providerIds.forEach((providerId) => {\n    const { fileName, templateFileName } = getProviderOptions(providerId);\n    const projectFilesBasePath = getFilesPathByProject(getProjectType());\n    const folderPath = pathFromArgs ?? getDefaultPath();\n    const filePath = join(folderPath, fileName);\n    const fullPath = join(process.cwd(), folderPath, fileName);\n    const projectFilesPath = join(process.cwd(), projectFilesBasePath);\n\n    if (pathExistsSync(fullPath)) {\n      console.error(`âŒ Provider (${filePath}) already exist!`);\n      return;\n    }\n\n    // create destination dir\n    mkdirSync(folderPath, { recursive: true });\n\n    // copy template file to destination\n    copySync(`${baseTemplatePath}/${templateFileName}`, fullPath);\n\n    console.log(`ðŸŽ‰ Provider (${filePath}) created successfully!`);\n\n    const copiedAssets: string[] = [];\n    const failedAssets: string[] = [];\n\n    if (pathExistsSync(`${baseAssetsPath}/${providerId}`)) {\n      try {\n        readdirSync(`${baseAssetsPath}/${providerId}`, {\n          recursive: true,\n          withFileTypes: true,\n        }).forEach((file) => {\n          if (!file.isDirectory()) {\n            const fromPath = join(file.path, file.name);\n            const destinationPath = join(\n              projectFilesPath,\n              relative(join(baseAssetsPath, providerId), file.path),\n              file.name,\n            );\n            const relativeDestinationPath = join(\n              projectFilesBasePath,\n              relative(projectFilesPath, destinationPath),\n            );\n\n            if (existsSync(destinationPath)) {\n              failedAssets.push(relativeDestinationPath);\n            } else {\n              try {\n                copySync(fromPath, destinationPath);\n                copiedAssets.push(relativeDestinationPath);\n              } catch (error) {\n                failedAssets.push(relativeDestinationPath);\n              }\n            }\n          }\n        });\n      } catch (error) {}\n    }\n\n    if (copiedAssets.length) {\n      console.log(`ðŸŽ‰ Created additional assets: ${copiedAssets.join(\", \")}`);\n    }\n    if (failedAssets.length) {\n      console.error(`âŒ Failed to create assets: ${failedAssets.join(\", \")}`);\n    }\n  });\n};\n\nexport const getProviderOptions = (providerId: ProviderId): Provider => {\n  const provider = availableProviders.find((p) => p.id === providerId);\n\n  if (!provider) {\n    throw new Error(`Invalid provider: ${providerId}`);\n  }\n\n  return provider;\n};\n\nexport const getDefaultPath = () => {\n  const projectType = getProjectType();\n  const { path } = getProviderPath(projectType);\n  return path;\n};\n","export type ProviderId =\n  | \"auth\"\n  | \"live\"\n  | \"data\"\n  | \"access-control\"\n  | \"notification\"\n  | \"i18n\"\n  | \"audit-log\";\n\nexport interface Provider {\n  id: ProviderId;\n  title: string;\n  description: string;\n  fileName: string;\n  templateFileName: string;\n}\n\nexport const availableProviders: Provider[] = [\n  {\n    id: \"auth\",\n    title: \"Auth provider\",\n    description: \"Manage user authentication and authorization\",\n    fileName: \"auth-provider.tsx\",\n    templateFileName: \"demo-auth-provider.tsx.template\",\n  },\n  {\n    id: \"live\",\n    title: \"Live provider\",\n    description: \"Enable real-time updates and synchronization\",\n    fileName: \"live-provider.tsx\",\n    templateFileName: \"demo-live-provider.tsx.template\",\n  },\n  {\n    id: \"data\",\n    title: \"Data provider\",\n    description: \"Communicate with your API\",\n    fileName: \"data-provider.tsx\",\n    templateFileName: \"demo-data-provider.tsx.template\",\n  },\n  {\n    id: \"access-control\",\n    title: \"Access Control\",\n    description: \"Manage user permissions & roles\",\n    fileName: \"access-control-provider.tsx\",\n    templateFileName: \"demo-access-control-provider.tsx.template\",\n  },\n  {\n    id: \"notification\",\n    title: \"Notification provider\",\n    description: \"Display in-app alerts and messages\",\n    fileName: \"notification-provider.tsx\",\n    templateFileName: \"demo-notification-provider.tsx.template\",\n  },\n  {\n    id: \"i18n\",\n    title: \"I18n provider\",\n    description: \"Support multiple languages and locales\",\n    fileName: \"i18n-provider.tsx\",\n    templateFileName: \"demo-i18n-provider.tsx.template\",\n  },\n  {\n    id: \"audit-log\",\n    title: \"Audit Log provider\",\n    description: \"Display audit logs for your resources\",\n    fileName: \"audit-log-provider.tsx\",\n    templateFileName: \"demo-audit-log-provider.tsx.template\",\n  },\n];\n","import { Argument, Command } from \"commander\";\nimport { availableIntegrations } from \"./packages\";\nimport { addIntegrationPrompt } from \"./prompt\";\n\nconst addIntegrationAction = async (name?: string) => {\n  let integrationID = name;\n\n  if (!integrationID) {\n    const answer = await addIntegrationPrompt();\n\n    integrationID = answer.id;\n  }\n\n  const integration = availableIntegrations.find(\n    (integration) => integration.id === integrationID,\n  );\n\n  if (integration) {\n    await integration.runTransformer();\n  }\n};\n\nexport const IntegrationCommand = new Command(\"integration\")\n  .addArgument(\n    new Argument(\"[name]\", \"Name of the integration\").choices(\n      availableIntegrations.map((integration) => integration.id),\n    ),\n  )\n  .action(addIntegrationAction);\n","import { Argument, Command } from \"commander\";\n\nimport { createProviders } from \"./create-providers\";\nimport { addProviderPrompt } from \"./prompt\";\nimport { availableProviders, type ProviderId } from \"./providers\";\n\nexport const createProviderAction = async (\n  providers: ProviderId[],\n  options: { path?: string },\n) => {\n  if (!providers.length) {\n    const { providers, providersPath } = await addProviderPrompt();\n\n    return createProviders(providers, providersPath);\n  }\n\n  createProviders(providers, options.path);\n};\n\nexport const ProviderCommand = new Command(\"provider\")\n  .addArgument(\n    new Argument(\"[providers...]\", \"Create provider(s)\")\n      .choices(availableProviders.map((provider) => provider.id))\n      .default([]),\n  )\n  .option(\"-p, --path [path]\", \"Path to generate providers\")\n  .action(createProviderAction);\n","import { Argument, Command } from \"commander\";\nimport { createResources } from \"./create-resources\";\n\nconst createResourceAction = async (\n  resources: string[],\n  options: { actions: string },\n  command: Command,\n) => {\n  createResources(\n    {\n      actions: options?.actions,\n      path: command.optsWithGlobals().path,\n    },\n    resources,\n  );\n};\n\nexport const ResourceCommand = new Command(\"resource\")\n  .addArgument(new Argument(\"[resources...]\", \"Create new resource(s)\"))\n  .option(\"-p, --path [path]\", \"Path to generated resource files\")\n  .option(\n    \"-a, --actions [actions]\",\n    \"Only generate the specified resource actions. (ex: list,create,edit,show)\",\n    \"list,create,edit,show\",\n  )\n  .action(createResourceAction);\n","import type { Command } from \"commander\";\n\nimport { addCommandPrompt } from \"./prompt\";\nimport { IntegrationCommand } from \"./sub-commands/integration/command\";\nimport { availableIntegrations } from \"./sub-commands/integration/packages\";\nimport { ProviderCommand } from \"./sub-commands/provider/command\";\nimport { createProviders } from \"./sub-commands/provider/create-providers\";\nimport { ResourceCommand } from \"./sub-commands/resource/command\";\nimport { createResources } from \"./sub-commands/resource/create-resources\";\n\nconst load = (program: Command) => {\n  return program\n    .command(\"add\")\n    .description(\"Add new resources, providers, or integrations\")\n    .allowExcessArguments(false)\n    .action(addCommandAction)\n    .addCommand(ResourceCommand)\n    .addCommand(ProviderCommand)\n    .addCommand(IntegrationCommand);\n};\n\nconst addCommandAction = async () => {\n  const { component } = await addCommandPrompt();\n\n  if (component.group === \"provider\") {\n    createProviders([component.component]);\n  }\n\n  if (component.group === \"integration\") {\n    const integration = availableIntegrations.find(\n      (integration) => integration.id === component.component,\n    );\n\n    await integration?.runTransformer();\n  }\n\n  if (component.group === \"resource\") {\n    await createResources({}, []);\n  }\n};\n\nexport default load;\n","import envinfo from \"envinfo\";\nimport os from \"os\";\n\nexport const getOSType = () => {\n  const osPlatform = os.type();\n\n  const types: Record<string, \"macOS\" | \"Linux\" | \"Windows\"> = {\n    Darwin: \"macOS\",\n    Linux: \"Linux\",\n    Windows_NT: \"Windows\",\n  };\n\n  return types[osPlatform];\n};\n\nexport const getOS = async () => {\n  // returns as a ['OS', 'macOS Mojave 10.14.5']\n  const [_, OSInfo] =\n    (await envinfo.helpers.getOSInfo()) as unknown as string[];\n\n  return {\n    name: getOSType(),\n    version: OSInfo,\n  };\n};\n","import type { NODE_ENV } from \"../definitions/node\";\nimport type { ProjectTypes } from \"../definitions/projectTypes\";\nimport { ENV } from \"@utils/env\";\nimport { getOS } from \"@utils/os\";\nimport { getInstalledRefinePackages, getRefineProjectId } from \"@utils/package\";\nimport { getProjectType } from \"@utils/project\";\nimport fetch from \"node-fetch\";\n\ninterface TelemetryData {\n  nodeEnv?: NODE_ENV;\n  nodeVersion: string;\n  os: string;\n  osVersion: string;\n  command: string;\n  packages: {\n    name: string;\n    version: string;\n  }[];\n  projectFramework: ProjectTypes;\n}\n\nexport const getTelemetryData = async (): Promise<TelemetryData> => {\n  const os = await getOS();\n\n  const data = {\n    nodeEnv: ENV.NODE_ENV,\n    nodeVersion: process.version,\n    os: os.name,\n    osVersion: os.version,\n    command: process.argv[2],\n    packages: (await getInstalledRefinePackages()) || [],\n    projectFramework: getProjectType(),\n    projectId: getRefineProjectId(),\n  };\n\n  return data;\n};\n\nexport const telemetryHook = async () => {\n  if (ENV.REFINE_NO_TELEMETRY === \"true\") return;\n\n  try {\n    const data = await getTelemetryData();\n\n    await fetch(\"https://telemetry.refine.dev/cli\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n  } catch (error) {}\n};\n","import React from \"react\";\nimport matter from \"gray-matter\";\nimport boxen from \"boxen\";\n\nimport type { Announcement } from \"../../definitions/announcement\";\nimport { markedTerminalRenderer } from \"@utils/marked-terminal-renderer\";\n\nconst ANNOUNCEMENT_URL =\n  \"https://raw.githubusercontent.com/refinedev/refine/main/packages/cli/ANNOUNCEMENTS.md\";\n\nconst ANNOUNCEMENT_DELIMITER = \"---announcement\";\n\nconst splitAnnouncements = (feed: string) => {\n  const sections = feed.split(ANNOUNCEMENT_DELIMITER);\n\n  return sections\n    .slice(1)\n    .map((section) => `${ANNOUNCEMENT_DELIMITER}${section}`);\n};\n\nconst parseAnnouncement = (raw: string): Announcement => {\n  const fixed = raw.replace(ANNOUNCEMENT_DELIMITER, \"---\");\n  const parsed = matter(fixed);\n  const content = (\n    parsed.content.length === 0\n      ? fixed.replace(/---/g, \"\")\n      : parsed.content.replace(/---/g, \"\")\n  ).trim();\n\n  return {\n    ...parsed.data,\n    content,\n  } as Announcement;\n};\n\nexport const getAnnouncements = async () => {\n  try {\n    const response = await fetch(ANNOUNCEMENT_URL)\n      .then((res) => res.text())\n      .catch(() => \"\");\n\n    const announcements = splitAnnouncements(response).map((section) =>\n      parseAnnouncement(section),\n    );\n\n    return announcements;\n  } catch (_) {\n    return [];\n  }\n};\n\nexport const printAnnouncements = async () => {\n  const announcements = await getAnnouncements();\n\n  const visibleAnnouncements = announcements.filter(\n    (a) => Boolean(a.hidden) === false,\n  );\n\n  if (visibleAnnouncements.length === 0) {\n    return;\n  }\n\n  const stringAnnouncements = visibleAnnouncements\n    .map((a) => {\n      const dash = visibleAnnouncements.length > 1 ? \"â€” \" : \"\";\n      const content = markedTerminalRenderer(a.content);\n      return `${dash}${content}`;\n    })\n    .join(\"\")\n    .trim();\n\n  console.log(\n    boxen(stringAnnouncements, {\n      padding: 1,\n      margin: 0,\n      borderStyle: \"round\",\n      borderColor: \"blueBright\",\n      titleAlignment: \"left\",\n    }),\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;AACA,SAAS,WAAAA,gBAAe;AAExB,OAAO,YAAY;;;ACFnB,OAAOC,YAAW;AAClB,OAAO,YAAY;;;ACFnB,OAAO,SAAS;AAEhB,IAAM,UAAU,OAAU,IAAsB,YAAoB;AAClE,QAAMC,WAAU,IAAI;AAAA,IAClB,OAAO;AAAA,IACP,MAAM;AAAA,EACR,CAAC,EAAE,MAAM;AACT,QAAM,SAAS,MAAM,GAAG;AACxB,EAAAA,SAAQ,KAAK;AACb,SAAO;AACT;AAEA,IAAO,kBAAQ;;;ACXf,OAAO,WAAW;AAClB,SAAS,YAAY,YAAY,cAAc,gBAAgB;AAC/D,OAAO,YAAY;AACnB,OAAO,UAAU;AACjB,OAAO,iBAAiB;AAGjB,IAAM,iBAAiB,MAAmB;AAC/C,MAAI,CAAC,WAAW,cAAc,GAAG;AAC/B,YAAQ,MAAM,kCAA6B;AAC3C,UAAM,IAAI,MAAM,0BAA0B;AAAA,EAC5C;AAEA,SAAO,KAAK,MAAM,aAAa,gBAAgB,MAAM,CAAC;AACxD;AAEO,IAAM,kBAAkB,MAAM;AACnC,QAAM,cAAc,eAAe;AACnC,SAAO,OAAO,KAAK,YAAY,gBAAgB,CAAC,CAAC;AACnD;AAEO,IAAM,6BAA6B,MAAM;AAC9C,QAAM,cAAc,eAAe;AACnC,UAAO,2CAAa,iBAAgB,CAAC;AACvC;AAEO,IAAM,qBAAqB,MAAM;AACtC,QAAM,cAAc,eAAe;AACnC,SAAO,OAAO,KAAK,YAAY,mBAAmB,CAAC,CAAC;AACtD;AAEO,IAAM,qBAAqB,MAAM;AACtC,SAAO,CAAC,GAAG,gBAAgB,GAAG,GAAG,gBAAgB,CAAC;AACpD;AAEO,IAAM,aAAa,MAAM;AAC9B,QAAM,cAAc,eAAe;AACnC,UAAO,2CAAa,YAAW,CAAC;AAClC;AAEO,IAAM,6BAA6B,YAAY;AAzCtD;AA0CE,MAAI;AACF,UAAM,YAAY,MAAM,MAAM,OAAO,CAAC,MAAM,aAAa,QAAQ,GAAG;AAAA,MAClE,QAAQ;AAAA,IACV,CAAC;AAED,UAAM,iBAAe,UAAK,MAAM,UAAU,MAAM,MAA3B,mBAA8B,iBAAgB,CAAC;AACpE,UAAM,qBAAqB,OAAO,KAAK,YAAY,EAAE;AAAA,MACnD,CAAC,eACC,WAAW,WAAW,YAAY,KAClC,WAAW,WAAW,iBAAiB;AAAA,IAC3C;AAEA,UAAM,YAGA,CAAC;AAEP,eAAW,cAAc,oBAAoB;AAC3C,YAAM,UAAU,aAAa,UAAU,EAAE;AACzC,gBAAU,KAAK;AAAA,QACb,MAAM;AAAA,QACN;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT,SAAS,OAAP;AACA,WAAO,QAAQ,QAAQ,IAAI;AAAA,EAC7B;AACF;AAEO,IAAM,4CAA4C,YAAY;AACnE,QAAM,kBAAkB,CAAC,QAAQ,YAAY,QAAQ,YAAY,aAAa,WAAW,QAAQ,YAAY,qBAAqB,mBAAmB,mBAAmB,eAAe,WAAW,UAAU,cAAc,QAAQ,WAAW,UAAU,OAAO,gBAAgB,gBAAgB,iBAAiB,mBAAmB,gBAAgB,eAAe,aAAa,gBAAgB,QAAQ,UAAU,eAAe,UAAU,aAAa,UAAU;AAEhc,MAAI;AACF,UAAM,2BAA2B,MAAM,OAAO,6BAA6B;AAAA,MACzE,iBAAiB;AAAA,IACnB,CAAC;AAED,UAAM,yBAAyB,gBAAgB,QAAQ,CAAC,QAAQ;AAC9D,UAAI;AACF,cAAM,UAAU,UAAQ;AAAA,UACtB,KAAK,KAAK,cAAc,KAAK,cAAc;AAAA,QAC7C;AAEA,eAAO,CAAC,KAAK,QAAQ,OAAO,CAAC;AAAA,MAC/B,SAAS,KAAP;AACA,eAAO,CAAC;AAAA,MACV;AAAA,IACF,CAAC;AAED,UAAM,iBAID,CAAC;AAEN,UAAM,QAAQ;AAAA,MACZ,CAAC,GAAG,wBAAwB,GAAG,wBAAwB,EAAE;AAAA,QACvD,OAAO,eAAe;AACpB,gBAAM,iBAAiB,MAAM,WAAW,GAAG,yBAAyB;AACpE,cAAI,gBAAgB;AAClB,kBAAM,cAAc,MAAM,SAAS,GAAG,yBAAyB;AAE/D,2BAAe,KAAK;AAAA,cAClB,MAAM,YAAY;AAAA,cAClB,SAAS,YAAY;AAAA,cACrB,MAAM;AAAA,YACR,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT,SAAS,KAAP;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEO,IAAM,4BAA4B,OAAO,gBAAwB;AACtE,SAAO,MAAM,WAAW,GAAG,8BAA8B;AAC3D;AAEO,IAAM,aAAa;AAAA,EACxB,KAAK;AAAA,IACH,KAAK,CAAC,WAAW,QAAQ;AAAA,IACzB,QAAQ,CAAC,WAAW,YAAY;AAAA,IAChC,cAAc,CAAC,YAAY,QAAQ;AAAA,IACnC,SAAS,CAAC,SAAS;AAAA,EACrB;AAAA,EACA,MAAM;AAAA,IACJ,KAAK,CAAC,KAAK;AAAA,IACX,QAAQ,CAAC,OAAO,IAAI;AAAA,IACpB,cAAc,CAAC,YAAY,QAAQ;AAAA,IACnC,SAAS,CAAC,SAAS;AAAA,EACrB;AAAA,EACA,MAAM;AAAA,IACJ,KAAK,CAAC,KAAK;AAAA,IACX,QAAQ,CAAC,OAAO,IAAI;AAAA,IACpB,cAAc,CAAC,YAAY,YAAY,MAAM;AAAA,IAC7C,SAAS,CAAC,SAAS;AAAA,EACrB;AAAA,EACA,KAAK;AAAA,IACH,KAAK,CAAC,KAAK;AAAA,IACX,QAAQ,CAAC,OAAO,OAAO;AAAA,IACvB,cAAc,CAAC,YAAY,YAAY,MAAM;AAAA,IAC7C,SAAS,CAAC,SAAS;AAAA,EACrB;AACF;AAEO,IAAM,gBAAgB,YAAY;AACvC,QAAM,KAAK,MAAM;AAAA,IACf,MAAM,YAAY,QAAQ,IAAI,CAAC;AAAA,IAC/B;AAAA,EACF;AAEA,MAAI,CAAC,IAAI;AACP,UAAM,IAAI,MAAM,4BAA4B;AAAA,EAC9C;AAEA,SAAO;AACT;AAEO,IAAM,kBAAkB,OAC7B,UACA,OAAsB,OACtB,iBAAiB,+CACd;AACH,QAAM,KAAK,MAAM,cAAc;AAE/B,MAAI;AACF,UAAM,iBACJ,SAAS,QAAQ,WAAW,GAAG,IAAI,EAAE,UAAU,WAAW,GAAG,IAAI,EAAE;AAErE,UAAM,YAAY,MAAM,GAAG,MAAM,CAAC,GAAG,gBAAgB,GAAG,QAAQ,GAAG;AAAA,MACjE,OAAO;AAAA,IACT,CAAC;AAED,cAAU,GAAG,WAAW,CAAC,YAAY;AACnC,cAAQ,IAAI,OAAO;AAAA,IACrB,CAAC;AAED,cAAU,GAAG,SAAS,CAAC,UAAU;AAC/B,cAAQ,IAAI,KAAK;AAAA,IACnB,CAAC;AAED,cAAU,GAAG,QAAQ,CAAC,aAAa;AACjC,UAAI,aAAa,GAAG;AAClB,gBAAQ,IAAI,cAAc;AAC1B;AAAA,MACF;AAEA,cAAQ,IAAI,gCAAgC,UAAU;AAAA,IACxD,CAAC;AAAA,EACH,SAAS,OAAP;AACA,UAAM,IAAI,MAAM,KAAK;AAAA,EACvB;AACF;AAEO,IAAM,sBAAsB,OAAO,aAAuB;AAC/D,QAAM,KAAK,MAAM,cAAc;AAE/B,MAAI;AACF,UAAM,iBAAiB,WAAW,GAAG,IAAI,EAAE;AAE3C,UAAM,YAAY,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,gBAAgB,GAAG,QAAQ,GAAG;AAAA,MACtE,OAAO;AAAA,IACT,CAAC;AAED,QAAI,UAAU,UAAU,UAAU,aAAa,GAAG;AAChD,YAAM,IAAI,MAAM,UAAU,MAAM;AAAA,IAClC;AAEA,WAAO;AAAA,EACT,SAAS,OAAP;AACA,UAAM,IAAI,MAAM,KAAK;AAAA,EACvB;AACF;AAOO,IAAM,6BAA6B,CACxC,QAC0B;AAC1B,QAAM,oBAAoB,IAAI,YAAY,GAAG;AAE7C,MAAI,qBAAqB,GAAG;AAC1B,WAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,EACF;AAEA,SAAO;AAAA,IACL,MAAM,IAAI,MAAM,GAAG,iBAAiB;AAAA,IACpC,SAAS,IAAI,MAAM,oBAAoB,CAAC;AAAA,EAC1C;AACF;AAEO,IAAM,qBAAqB,MAAM;AArPxC;AAsPE,QAAM,cAAc,eAAe;AAEnC,UAAO,gDAAa,WAAb,mBAAqB;AAC9B;AAEO,IAAM,sBAAsB,YAAY;AAC7C,QAAM,oBAAoB,MAAM,0CAA0C;AAE1E,SAAO,kBAAkB,KAAK,CAAC,QAAQ,IAAI,SAAS,qBAAqB;AAC3E;AAEO,IAAM,0BAA0B,CAAC,aAAuB;AAC7D,QAAM,eAAe,gBAAgB;AAErC,SAAO,SAAS,OAAO,CAAC,QAAQ,CAAC,aAAa,SAAS,GAAG,CAAC;AAC7D;AAEO,IAAM,yBAAyB,OAAO,aAAuB;AAClE,UAAQ,IAAI,oCAA6B;AAEzC,QAAM,kBAAkB,wBAAwB,QAAQ;AAExD,MAAI,gBAAgB,SAAS,GAAG;AAC9B,YAAQ,IAAI,wBAAiB,gBAAgB,KAAK,IAAI,GAAG;AAEzD,UAAM,oBAAoB,eAAe;AAEzC,YAAQ,IAAI,oCAA6B;AAAA,EAC3C,OAAO;AACL,YAAQ,IAAI,uDAAgD;AAAA,EAC9D;AACF;AAEO,IAAM,yBAAyB,CAAC,aAAgC;AACrE,QAAM,kBAAkB,mBAAmB;AAE3C,QAAMC,wBAAuB,SAAS;AAAA,IAAO,CAAC,QAC5C,gBAAgB,SAAS,GAAG;AAAA,EAC9B;AAEA,MAAIA,sBAAqB,SAAS,GAAG;AACnC,YAAQ;AAAA,MACN,0CAAmCA,sBAAqB;AAAA,QACtD;AAAA,MACF;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEO,IAAM,0BAA0B,OACrC,gBACsB;AACtB,QAAM,KAAK;AAEX,QAAM,EAAE,QAAQ,SAAS,IAAI,MAAM;AAAA,IACjC;AAAA,IACA,CAAC,QAAQ,aAAa,YAAY,QAAQ;AAAA,IAC1C;AAAA,MACE,QAAQ;AAAA,MACR,SAAS,KAAK;AAAA,IAChB;AAAA,EACF;AAEA,MAAI,UAAU;AACZ,YAAQ,IAAI,8CAAyC;AACrD,YAAQ,KAAK,CAAC;AAAA,EAChB;AAEA,MAAI,SAMI,CAAC;AAET,MAAI;AACF,aAAS,KAAK,MAAM,MAAM;AAC1B,QAAI,CAAC,UAAU,WAAW,QAAQ;AAChC,cAAQ,IAAI,yDAAoD;AAChE,cAAQ,KAAK,CAAC;AAAA,IAChB;AAAA,EACF,SAAS,OAAP;AACA,YAAQ,IAAI,yDAAoD;AAChE,YAAQ,KAAK,CAAC;AAAA,EAChB;AAEA,SAAO;AACT;AAEO,IAAM,cAAc,OAAO,gBAAwB;AACxD,QAAM,oBAAoB,MAAM,2BAA2B;AAC3D,MAAI,CAAC,mBAAmB;AACtB,WAAO;AAAA,EACT;AAEA,SAAO,kBAAkB,KAAK,CAAC,QAAQ,IAAI,SAAS,WAAW;AACjE;;;ACzVA,OAAO,WAAW;AAClB,OAAO,WAAW;;;ACFX,IAAM,qBAAqB,CAAC,QAAwB;AACzD,SAAO,IAAI,OAAO,CAAC,EAAE,YAAY,IAAI,IAAI,MAAM,CAAC;AAClD;AAEO,IAAM,mBAAmB,CAAC,QAAwB;AACvD,SAAO,IAAI;AAAA;AAAA,IAET;AAAA,IACA;AAAA,EACF;AACF;;;ADLA,IAAM,UAAU;AAAA,EACd,MAAM;AAAA,EACN,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,WAAW;AACb;AAEA,IAAM,iBAA2D;AAAA,EAC/D,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AACV;AAEO,IAAM,kBAAkB,CAC7B,WAAgD,CAAC,MAC9C;AAvBL;AAwBE,QAAM,YAAY,OAAO,MAAK,qCAAW,OAAM,CAAC,CAAC;AACjD,MAAI,CAAC,YAAY,CAAC,UAAU;AAAQ,WAAO,EAAE,OAAO,IAAI,OAAO,EAAE;AAEjE,QAAM,gBAAgB,QAAQ,OAAO,WAAW;AAEhD,QAAM,kBACJ,KAAK,IAAI,GAAG,SAAS,IAAI,CAAC,QAAQ,IAAI,KAAK,MAAM,CAAC,IAAI;AACxD,QAAM,qBAAqB,IAAI;AAC/B,QAAM,eAAe;AACrB,QAAM,uBAAuB,KAAK;AAAA,IAChC;AAAA,IACA,gBAAgB,kBAAkB,qBAAqB,IAAI;AAAA,EAC7D;AAEA,QAAM,eAAe;AAAA,IACnB,MAAM;AAAA,IACN,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,WAAW;AAAA,EACb;AAEA,QAAM,QAAQ,IAAI,MAAM;AAAA,IACtB,MAAM;AAAA,IACN,UAAU;AAAA,IACV,oBAAoB;AAAA,IACpB,WAAW,eAAe,IAAI,CAAC,WAAW,aAAa,MAAM,CAAC;AAAA,IAC9D,OAAO;AAAA,MACL,MAAM,CAAC,MAAM;AAAA,IACf;AAAA,EACF,CAAC;AAED,QAAM,qBAAqB,CAAC,MAAc,WAAmB;AAE3D,QAAI,KAAK,SAAS,QAAQ;AACxB,YAAM,YAAY,SAAS;AAC3B,YAAMC,SAAQ,KAAK,MAAM,GAAG,KAAK,MAAM,YAAY,CAAC,CAAC;AACrD,YAAM,MAAM,KAAK,MAAM,CAAC,KAAK,KAAK,YAAY,CAAC,CAAC;AAChD,aAAO,GAAGA,YAAW;AAAA,IACvB;AACA,WAAO;AAAA,EACT;AAEA,WAAS,QAAQ,CAAC,QAAQ;AACxB,UAAM;AAAA,MACJ,eAAe,IAAI,CAAC,WAAW;AAC7B,cAAM,cAAc,IAAI,MAAM;AAC9B,YAAI,CAAC;AAAa,iBAAO;AAEzB,YAAI,WAAW,YAAY,WAAW,UAAU;AAC9C,gBAAM,mBAAmB,cAAc,IAAI,OAAO;AAClD,gBAAM,gBAAgB,cAAc,WAAW;AAC/C,gBAAM,SAAS;AAAA,YACb;AAAA,YACA;AAAA,UACF;AACA,gBAAM,YAAY,MAAM,OAAO,KAAK,EAAE,cAAc,KAAK;AACzD,gBAAM,YAAY,MAAM,OAAO,KAAK,EAAE,cAAc,KAAK;AACzD,gBAAM,YAAY,MAAM,OAAO,KAAK,EAAE,cAAc,KAAK;AACzD,iBAAO,GAAG,aAAa,aAAa;AAAA,QACtC;AAEA,YAAI,WAAW,aAAa;AAC1B,iBAAO,MAAM,WAAW,UAAU,WAAW;AAAA,QAC/C;AAEA,eAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAED,QAAM,cAAc,MAAM,SAAS;AACnC,QAAM,aAAa;AAAA,MACjB,iBAAY,MAAM,IAAI,MAAtB,mBAA0B,OAAM;AAAA,EAClC,EAAE;AAEF,SAAO,EAAE,OAAO,aAAa,OAAO,WAAW;AACjD;AAEA,IAAM,gBAAgB,CAAC,SAAiB;AACtC,QAAM,WAAW,KAAK,MAAM,GAAG;AAC/B,SAAO;AAAA,IACL,OAAO,SAAS,CAAC;AAAA,IACjB,OAAO,SAAS,CAAC;AAAA,IACjB,OAAO,SAAS,CAAC;AAAA,EACnB;AACF;AAEA,IAAM,8BAA8B,CAClC,kBACA,gBACG;AACH,QAAM,mBACJ,iBAAiB,MAAM,KAAK,MAAM,YAAY,MAAM,KAAK;AAE3D,MAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,IACT;AAEF,QAAM,mBACJ,iBAAiB,MAAM,KAAK,MAAM,YAAY,MAAM,KAAK;AAE3D,MAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,IACT;AAEF,QAAM,mBACJ,iBAAiB,MAAM,KAAK,MAAM,YAAY,MAAM,KAAK;AAC3D,MAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,IACT;AAEF,SAAO;AAAA,IACL,OAAO;AAAA,IACP,OAAO;AAAA,IACP,OAAO;AAAA,EACT;AACF;;;AHxIO,IAAM,0BAA0B,OACrC,WACG;AACH,QAAM,OAAO,iCAAQ;AACrB,QAAM,YAAY,OAAO,MAAK,6BAAO,OAAM,CAAC,CAAC;AAC7C,MAAI,CAAC,QAAQ,CAAC,UAAU;AAAQ;AAEhC,QAAM,EAAE,OAAO,MAAM,IAAI,gBAAgB,IAAI;AAC7C,UAAQ,IAAI;AACZ,UAAQ,IAAI,OAAO,oBAAoB,KAAK,CAAC;AAC7C,UAAQ,IAAI;AACZ,UAAQ;AAAA,IACN,KAAKC,OAAM;AAAA,MACTA,OAAM,KAAK,SAAS;AAAA,IACtB;AAAA,EACF;AACA,UAAQ;AAAA,IACN,KAAKA,OAAM;AAAA,MACTA,OAAM,KAAK,QAAQ;AAAA,IACrB;AAAA,EACF;AACA,UAAQ;AAAA,IACN,KAAKA,OAAM;AAAA,MACTA,OAAM,KAAK,QAAQ;AAAA,IACrB;AAAA,EACF;AACA,UAAQ,IAAI,KAAK;AACjB,UAAQ;AAAA,IACN;AAAA,MACE,aAAaA,OAAM,KAAK,UAAU;AAAA,MAClC;AAAA,IACF;AAAA,EACF;AACA,UAAQ;AAAA,IACN;AAAA,MACE,+BAA+BA,OAAM;AAAA,QACnC,MAAM,kBAAkB;AAAA,MAC1B;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACA,UAAQ,IAAI;AACd;AAEO,IAAM,oBAAoB,YAAY;AAC3C,QAAM,kBAAkB;AAExB,QAAM,eAAe,gBAAgB;AACrC,QAAM,aAAa,OAAO,KAAK,WAAW,CAAC;AAE3C,QAAM,SAAS,aAAa,SAAS,gBAAgB;AACrD,QAAM,YAAY,WAAW,SAAS,QAAQ;AAE9C,MAAI,CAAC,UAAU,CAAC,WAAW;AACzB,WAAO;AAAA,EACT;AAEA,QAAM,KAAK,MAAM,cAAc;AAE/B,MAAI,WAAW;AACb,WAAO,GAAG,GAAG;AAAA,EACf;AAEA,MAAI,QAAQ;AACV,WAAO;AAAA,EACT;AAEA,SAAO;AACT;;;AK1EA,OAAO,gBAAgB;AACvB,SAAS,qBAAqB;;;ACP9B,OAAOC,YAAW;AAKX,IAAM,yBAAyB,YAAY;AAChD,QAAM,KAAK;AAEX,QAAM,EAAE,QAAQ,SAAS,IAAI,MAAMA,OAAM,IAAI,WAAW,EAAE,EAAE,cAAc;AAAA,IACxE,QAAQ;AAAA,IACR,SAAS,KAAK;AAAA,EAChB,CAAC;AAED,MAAI,UAAU;AACZ,UAAM,IAAI,MAAM,uCAAuC;AAAA,EACzD;AAEA,MAAI,CAAC;AAAQ,WAAO;AAEpB,SAAO,KAAK,MAAM,MAAM;AAC1B;;;ADVA,IAAM,OAAO,CAAC,YAAqB;AACjC,SAAO,QACJ,QAAQ,eAAe,EACvB,YAAY,sDAAsD,EAClE,OAAO,MAAM;AAClB;AAEA,IAAM,SAAS,YAAY;AACzB,QAAM,WAAW,MAAM,gBAAQ,kBAAkB,yBAAyB;AAC1E,MAAI,CAAC,SAAS,QAAQ;AACpB,YAAQ,IAAI,kDAA2C;AACvD;AAAA,EACF;AAEA,QAAM,wBAAwB,EAAE,MAAM,SAAS,CAAC;AAClD;AAQO,IAAM,mBAAmB,YAAY;AAC1C,QAAM,iBAAiB,MAAM,0BAA0B;AAEvD,SAAO;AACT;AAOO,IAAM,4BAA4B,YAAY;AACnD,QAAM,WAAW,MAAM,uBAAuB;AAC9C,MAAI,CAAC;AAAU,WAAO,CAAC;AAEvB,QAAM,OAA4C,CAAC;AAEnD,SAAO,KAAK,QAAQ,EAAE,QAAQ,CAAC,gBAAgB;AAC7C,UAAM,aAAa,SAAS,WAAW;AAEvC,QAAI,YAAY,SAAS,YAAY,GAAG;AACtC,WAAK,KAAK;AAAA,QACR,GAAG;AAAA,QACH,MAAM;AAAA,QACN,WAAW,YAAY,QAAQ,gBAAgB,uBAAuB;AAAA,MACxE,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAKD,QAAM,eAAe,KAAK,OAAO,CAAC,SAAS;AACzC,UAAM,OAAO,WAAW,KAAK,SAAS,KAAK,MAAM;AACjD,WAAO,CAAC,CAAC;AAAA,EACX,CAAC;AAED,SAAO;AACT;AAUO,IAAM,iCAAiC,CAC5C,aACA,kBACW;AACX,QAAM,eAAe,2BAA2B;AAChD,QAAM,uBAAuB,aAAa,WAAW;AAErD,MAAI,CAAC,sBAAsB;AACzB,WAAO,IAAI;AAAA,EACb;AAEA,MAAI,yBAAyB,UAAU;AACrC,WAAO;AAAA,EACT;AAEA,MAAI,yBAAyB,KAAK;AAChC,WAAO;AAAA,EACT;AAKA,MACE,CAAC,KAAK,KAAK,MAAM,MAAM,IAAI,EAAE;AAAA,IAAK,CAAC,SACjC,qBAAqB,SAAS,IAAI;AAAA,EACpC,GACA;AACA,WAAO;AAAA,EACT;AAKA,MAAI,6DAAsB,SAAS,MAAM;AACvC,WAAO,GAAG;AAAA,EACZ;AAGA,MAAI,6DAAsB,WAAW,MAAM;AACzC,WAAO,IAAI;AAAA,EACb;AAGA,MAAI,6DAAsB,WAAW,MAAM;AACzC,WAAO,IAAI;AAAA,EACb;AAEA,SAAO;AACT;AAQO,IAAM,iCAAiC,OAC5C,aACA,YACG;AACH,QAAM,aAAa,MAAM,wBAAwB,WAAW;AAK5D,QAAM,gBAAgB,cAAc,YAAY,IAAI,SAAS;AAC7D,SAAO,iBAAiB;AAC1B;AAEA,IAAO,wBAAQ;;;AExJR,IAAK,eAAL,kBAAKC,kBAAL;AACL,EAAAA,cAAA,kBAAe;AACf,EAAAA,cAAA,WAAQ;AACR,EAAAA,cAAA,gBAAa;AACb,EAAAA,cAAA,eAAY;AACZ,EAAAA,cAAA,YAAS;AACT,EAAAA,cAAA,UAAO;AACP,EAAAA,cAAA,WAAQ;AACR,EAAAA,cAAA,YAAS;AACT,EAAAA,cAAA,aAAU;AATA,SAAAA;AAAA,GAAA;;;ACAL,IAAK,eAAL,kBAAKC,kBAAL;AACL,EAAAA,cAAA,UAAO;AACP,EAAAA,cAAA,SAAM;AACN,EAAAA,cAAA,aAAU;AACV,EAAAA,cAAA,YAAS;AAJC,SAAAA;AAAA,GAAA;;;ACAL,IAAK,sBAAL,kBAAKC,yBAAL;AACL,EAAAA,qBAAA,SAAM;AACN,EAAAA,qBAAA,UAAO;AACP,EAAAA,qBAAA,UAAO;AAHG,SAAAA;AAAA,GAAA;;;ACGL,IAAM,iBAAiB,CAAC,aAA0C;AACvE,MAAI,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAI,eAAyB,CAAC;AAC9B,MAAI,kBAA4B,CAAC;AAEjC,MAAI;AACF,mBAAe,gBAAgB;AAC/B,sBAAkB,mBAAmB;AAAA,EACvC,SAAS,OAAP;AAAA,EAAe;AAIjB,MACE,aAAa,SAAS,cAAc,KACpC,gBAAgB,SAAS,cAAc,GACvC;AACA;AAAA,EACF;AAGA,MACE,aAAa,SAAS,eAAe,KACrC,gBAAgB,SAAS,eAAe,GACxC;AACA;AAAA,EACF;AAGA,MAAI,aAAa,SAAS,MAAM,KAAK,gBAAgB,SAAS,MAAM,GAAG;AACrE;AAAA,EACF;AAGA,MACE,aAAa,SAAS,kBAAkB,KACxC,gBAAgB,SAAS,kBAAkB,GAC3C;AAEA,QAAI,aAAa,SAAS,MAAM,KAAK,gBAAgB,SAAS,MAAM,GAAG;AACrE;AAAA,IACF;AAEA;AAAA,EACF;AAGA,MAAI,aAAa,SAAS,MAAM,KAAK,gBAAgB,SAAS,MAAM,GAAG;AACrE;AAAA,EACF;AAEA,MAAI,aAAa,SAAS,QAAQ,KAAK,gBAAgB,SAAS,QAAQ,GAAG;AACzE;AAAA,EACF;AAEA;AACF;AAEO,IAAM,iBAAiB,MAAgC;AAE5D,QAAM,eAAe,gBAAgB;AAGrC,MAAI,aAAa,SAAS,iBAAiB,GAAG;AAC5C;AAAA,EACF;AAGA,MAAI,aAAa,SAAS,gBAAgB,GAAG;AAC3C;AAAA,EACF;AAGA,MAAI,aAAa,SAAS,sBAAsB,GAAG;AACjD;AAAA,EACF;AAGA,MAAI,aAAa,SAAS,oBAAoB,GAAG;AAC/C;AAAA,EACF;AAEA;AACF;AAEO,IAAM,iCAAiC,CAC5C,gBACW;AACX,UAAQ,aAAa;AAAA,IACnB;AACE,aAAO;AAAA,IACT;AACE,aAAO;AAAA,IACT;AACE,aAAO;AAAA,IACT;AACE,aAAO;AAAA,EACX;AACF;;;ACtGA,OAAO,eAAe;AAEf,IAAM,kBAAkB,CAC7B,gBACoC;AACpC,UAAQ,aAAa;AAAA,IACnB;AACE,aAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IACA;AAAA,IACA;AACE,aAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,EACJ;AAGA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,EACT;AACF;AAEO,IAAM,kBAAkB,CAC7B,gBACoC;AACpC,UAAQ,aAAa;AAAA,IACnB;AACE,aAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IACA;AAAA,IACA;AACE,aAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,EACJ;AAGA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,EACT;AACF;AAEO,IAAM,wBAAwB,CAAC,gBAA+B;AACnE,UAAQ,aAAa;AAAA,IACnB;AAAA,IACA;AAAA,IACA;AACE,aAAO;AAAA,IACT;AACE,aAAO;AAAA,EACX;AACF;AAEO,IAAM,6BAA6B,CAAC,aAA6B;AACtE,SAAO,UAAU,UAAU;AAAA,IACzB,8BAA8B;AAAA,IAC9B,YAAY;AAAA,EACd,CAAC;AACH;;;ACrEA,OAAO,gBAAgB;AACvB;AAAA,EACE,gBAAAC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAGA,IAAM,UAAU,CAAC,UAAkB,WAAwB;AAChE,QAAM,UAAUC,cAAa,QAAQ;AAErC,aAAW,eAAe,QAAQ,CAAC,MAAM,MAAM,YAAY;AACzD,QAAI,KAAK,SAAS,IAAI,GAAG;AACvB,aAAO,QAAQ,GAAG,UAAU;AAAA,IAC9B;AACA,WAAO,QAAQ,QAAQ,UAAU;AAAA,EACnC,CAAC;AAED,aAAW,eAAe,6BAA6B,CAAC,WAAW;AACjE,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,YAAQ,QAAQ;AAAA,MACd,KAAK;AACH,eAAO;AAAA,MAET;AACE,eAAO,OAAO,OAAO,CAAC,EAAE,YAAY,IAAI,OAAO,MAAM,CAAC;AAAA,IAC1D;AAAA,EACF,CAAC;AAED,aAAW,eAAe,cAAc,CAAC,WAAW;AAClD,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,WAAO,OAAO,OAAO,CAAC,EAAE,YAAY,IAAI,OAAO,MAAM,CAAC;AAAA,EACxD,CAAC;AAED,aAAW,eAAe,8BAA8B,CAAC,WAAW;AAClE,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,WAAO,2BAA2B,MAAM;AAAA,EAC1C,CAAC;AAED,QAAM,WAAW,WAAW,QAAQ,QAAQ,SAAS,CAAC;AACtD,SAAO,SAAS,MAAM;AACxB;AAKO,IAAM,aAAa,CAAC,SAAiB,WAAgB;AAC1D,QAAM,QAAQ,YAAY,SAAS,EAAE,WAAW,KAAK,CAAC;AAEtD,QAAM,QAAQ,CAAC,SAA0B;AAEvC,QAAI,OAAO,SAAS,YAAY,CAAC,KAAK,SAAS,MAAM;AAAG;AAExD,UAAM,mBAAmB,GAAG,WAAW;AAEvC,UAAM,mBAAmB,GAAG,WAAW,KAAK,QAAQ,QAAQ,EAAE;AAC9D,mBAAe,gBAAgB;AAG/B,kBAAc,kBAAkB,QAAQ,kBAAkB,MAAM,CAAC;AAGjE,eAAW,gBAAgB;AAAA,EAC7B,CAAC;AACH;;;ACpEA,OAAOC,YAAW;AAClB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,cAAAC;AAAA,OACK;AACP,OAAO,cAAc;AACrB,SAAS,YAAY;AACrB,SAAS,cAAc;AACvB,OAAO,UAAU;;;ACjBV,IAAM,oBAAoB,MAAM;AACrC,SAAO;AACT;;;ADkBO,IAAM,iBAAiB,CAAC,QAAQ,UAAU,QAAQ,MAAM;AAExD,IAAM,kBAAkB,OAC7B,QACA,cACG;AA1BL;AA2BE,QAAM,mBACJ,iCAAQ,SAAQ,gBAAgB,eAAe,CAAC,EAAE;AACpD,MAAI,UAAU,OAAO,WAAW,eAAe,KAAK,GAAG;AAEvD,MAAI,CAAC,UAAU,QAAQ;AACrB,UAAM,EAAE,MAAAC,OAAM,gBAAgB,IAAI,MAAM,SAAS,OAG9C;AAAA,MACD;AAAA,QACE,MAAM;AAAA,QACN,MAAM;AAAA,QACN,SAAS;AAAA,QACT,UAAU,CAAC,UAAU;AACnB,cAAI,CAAC,OAAO;AACV,mBAAO;AAAA,UACT;AAEA,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,MACA;AAAA,QACE,MAAM;AAAA,QACN,MAAM;AAAA,QACN,SAAS;AAAA,QACT,SAAS;AAAA,QACT,UAAS,sCAAQ,YAAR,mBAAiB,MAAM;AAAA,MAClC;AAAA,IACF,CAAC;AAED,gBAAY,CAACA,KAAI;AACjB,cAAU,gBAAgB,KAAK,GAAG;AAAA,EACpC;AAEA,MAAI,8BAA8B;AAClC,YAAU,QAAQ,CAAC,iBAAiB;AAClC,UAAM,gBAAgB,UAAU,QAAQ,MAAM,GAAG,IAAI;AACrD,UAAM,qBAAqB,OAAO,YAAY,EAAE,YAAY;AAG5D,UAAM,eAAe;AAAA,MACnB,QAAQ,IAAI;AAAA,MACZ;AAAA,MACA;AAAA,IACF;AAEA,QAAI,eAAe,YAAY,GAAG;AAChC,cAAQ;AAAA,QACN,oBAAe;AAAA,UACb;AAAA,UACA;AAAA,QACF;AAAA,MACF;AACA;AAAA,IACF;AACA,kCAA8B;AAG9B,UAAM,WAAW,mBAAmB,YAAY;AAGhD,UAAM,cAAc,eAAe;AAGnC,UAAM,cAAc,eAAe;AACnC,UAAM,WAAW;AAEjB,UAAM,YAAY,GAAG,kBAAkB;AAGvC,UAAM,UAAU,gBAAgB;AAGhC,aAAS,WAAW,OAAO;AAE3B,UAAM,gBAAgB;AAAA,MACpB;AAAA,MACA;AAAA,MACA,SAAS,iBAAiB;AAAA,MAC1B;AAAA,MACA;AAAA,IACF;AAGA,eAAW,SAAS,aAAa;AAGjC,QAAI,eAAe;AACjB,qBAAe,QAAQ,CAACC,aAAW;AACjC,YAAI,CAAC,cAAc,SAASA,QAAM,GAAG;AACnC,UAAAC,YAAW,GAAG,WAAWD,cAAY;AAAA,QACvC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,cAAU,iBAAiB,EAAE,WAAW,KAAK,CAAC;AAG9C,UAAM,0BAA0B,GAAG,mBAAmB;AAEtD,QAAI,kBAAkB,CAAC;AAGvB,QAAI,eAAe,uBAAuB,GAAG;AAC3C,wBAAkB,EAAE,WAAW,KAAK;AAAA,IACtC;AACA,aAAS,SAAS,yBAAyB,eAAe;AAG1D,SAAK,YAAY;AAGjB,QAAI,UAAU;AACZ;AAAA,QACE;AAAA,QACA;AAAA,QACA,iBAAiB;AAAA,MACnB;AAAA,IACF;AAEA,UAAM,wBAAwB,UAAQ,QAAQ,kBAAkB;AAChE,UAAM,EAAE,OAAO,IAAIE,OAAM,KAAK,uBAAuB;AAAA,MACnD;AAAA,MACA;AAAA,MACA;AAAA,MACA,eAAe,kBAAkB;AAAA,MACjC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA,eAAe,cAAc;AAAA,MAC7B,iBAAiB,gBAAgB,eAAe,CAAC,EAAE;AAAA,MACnD,0BAA0B;AAAA,MAC1B,gBAAgB;AAAA,MAChB,oBAAoB;AAAA,IACtB,CAAC;AAED,QAAI,QAAQ;AACV,cAAQ,IAAI,MAAM;AAAA,IACpB;AAEA,YAAQ;AAAA,MACN,uBAAgB;AAAA,IAClB;AAAA,EACF,CAAC;AAED,MAAI,6BAA6B;AAC/B,sBAAkB;AAAA,EACpB;AAEA;AACF;AAEA,IAAM,kBAAkB,MAAc;AACpC,OAAK,MAAM;AACX,SAAO,KAAK,UAAU,UAAU;AAClC;AAKA,IAAM,sBAAsB,CAC1B,UACA,oBACA,YACS;AACT,QAAM,0BAA0B;AAAA,IAC9B,QAAQ,IAAI;AAAA,IACZ;AAAA,IACA;AAAA,EACF;AAGA,QAAM,6BAAwD;AAAA,IAC5D,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,MAAM;AAAA,EACR;AAEA,UAAQ,QAAQ,CAACF,aAAW;AAE1B,UAAM,4BAA4B,2BAA2BA,QAAM;AACnE,UAAM,oBAAoB;AAAA,MACxB;AAAA,MACA;AAAA,IACF;AACA,cAAU,mBAAmB,EAAE,WAAW,KAAK,CAAC;AAGhD,UAAM,iBAAiB,GAAG,kBAAkB,sCAAsC;AAClF,UAAM,eAAe,KAAK,mBAAmB,cAAc;AAC3D,aAAS,gBAAgB,YAAY;AAAA,EACvC,CAAC;AAGD,QAAM,gBAAgB,EAAE,UAAU,mBAAmB;AACrD,aAAW,yBAAyB,aAAa;AACnD;AAEO,IAAM,oBAAoB,YAAY;AAC3C,UAAQ,IAAI;AACZ,QAAM,wBAAwB,MAAM;AAAA,IAClC,MAAM,YAAY,uBAAuB;AAAA,IACzC;AAAA,EACF;AACA,MAAI,CAAC,uBAAuB;AAC1B,YAAQ,IAAI,yDAAkD;AAC9D,UAAM;AAAA,MACJ,CAAC,8BAA8B;AAAA,MAC/B;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACF;;;AE/OA,IAAMG,QAAO,CAAC,YAAqB;AACjC,QAAM,cAAc,eAAe;AACnC,QAAM,EAAE,MAAAC,MAAK,IAAI,gBAAgB,WAAW;AAE5C,SAAO,QACJ,QAAQ,iBAAiB,EACzB,qBAAqB,IAAI,EACzB;AAAA,IACC;AAAA,EACF,EACC;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACF,EACC,OAAO,qBAAqB,uCAAuCA,KAAI,EACvE,OAAOC,OAAM;AAClB;AAEA,IAAMA,UAAS,OACb,QACA,YACG;AACH,kBAAgB,QAAQ,QAAQ,IAAI;AACtC;AAEA,IAAO,0BAAQF;;;AC7Bf,SAAuB,cAAc;;;ACFrC,OAAO,UAAU;;;ACAV,IAAM,iBAAiB,CAAC,QAAgB;AAC7C,MAAI,OAAO,SAAS,aAAa;AAC/B,WAAO,KAAK,GAAG;AAAA,EACjB;AAEA,SAAO,OAAO,KAAK,GAAG,EAAE,SAAS,QAAQ;AAC3C;;;ACLA,YAAY,YAAY;AAExB,IAAM,YAAoC,CAAC;AAEpC,cAAO,EAAE,YAAY,UAAU,CAAC;AAEvC,IAAM,eAA4D;AAAA,EAChE,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,MAAM;AAAA,EACN,0BAA0B;AAAA,EAC1B,2BAA2B;AAAA,EAC3B,8BAA8B;AAChC;AAEO,IAAM,aAAa,MAAgB;AACxC,QAAM,UAAU,QAAQ,IAAI;AAE5B,MAAI,CAAC,SAAS;AACZ,WAAO;AAAA,EACT;AAEA,MAAI,MAAgB;AAEpB,aAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,YAAY,GAAG;AACvD,QAAI,MAAM,KAAK,OAAO,GAAG;AACvB,YAAM;AACN;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,IAAM,cAAc,CAAC,QAAoC;AACvD,SAAO,QAAQ,IAAI,GAAG,KAAK,UAAU,GAAG;AAC1C;AAEO,IAAM,MAAM;AAAA,EACjB,UAAU,WAAW;AAAA,EACrB,qBAAqB,YAAY,qBAAqB,KAAK;AAAA,EAC3D,6BACE,YAAY,6BAA6B,KAAK;AAAA,EAChD,2BACE,YAAY,2BAA2B,KAAK,MAAO,KAAK,KAAK;AAAA,EAC/D,sBAAsB,YAAY,sBAAsB;AAC1D;;;AC5CA,OAAOG,YAAW;AAGX,IAAM,yBAAyB,MAAM;AAC1C,QAAM,cAAc,MAAM,IAAI,aAAa;AAE3C,MAAI,CAAC;AAAa,WAAO;AAEzB,QAAM,MAAM,KAAK,IAAI;AAErB,QAAM,OAAO,MAAM;AACnB,QAAM,WAAW,OAAO,IAAI,yBAAyB;AAErD,SAAO,QAAQ;AACjB;AAOO,IAAM,cAAc,YAAY;AACrC,QAAM,MAAM,MAAM,IAAI,KAAK;AAC3B,QAAM,SAAS,MAAM,wBAAwB;AAE7C,MAAI,WAAW;AAAM,WAAO;AAE5B,SAAO,QAAQ;AACjB;AAMO,IAAM,0BAA0B,YAAY;AACjD,QAAM,WAAW,MAAM,2BAA2B;AAClD,MAAI,CAAC,UAAU;AACb,YAAQ;AAAA,MACNC,OAAM;AAAA,QACJ;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,QAAM,0BAA0B,SAAS,IAAI,CAAC,MAAM,GAAG,EAAE,QAAQ,EAAE,SAAS;AAC5E,QAAM,OAAO,eAAe,wBAAwB,SAAS,CAAC;AAE9D,SAAO;AACT;AAEO,IAAM,2BAA2B,MAAM;AAC5C,SAAO,IAAI,4BAA4B,kBAAkB,MAAM;AACjE;;;AH9CA,IAAM,aAAa;AAQZ,IAAM,QAAQ,IAAI,KAAY;AAAA,EACnC,aAAa;AAAA,EACb,UAAU;AAAA,IACR,KAAK;AAAA,IACL,aAAa;AAAA,IACb,UAAU,CAAC;AAAA,EACb;AACF,CAAC;AAGM,IAAM,iBAAiB,YAAY;AACxC,MAAI,yBAAyB;AAAG;AAEhC,QAAM,eAAe,MAAM,0BAA0B;AACrD,MAAI,iBAAiB;AAAM;AAC3B,MAAI,cAAc;AAChB,wBAAoB;AACpB;AAAA,EACF;AAEA,cAAY;AACZ,sBAAoB;AACtB;AAKA,IAAM,cAAc,YAAY;AAC9B,QAAM,WAAW,MAAM,IAAI,UAAU;AACrC,MAAI,EAAC,qCAAU;AAAQ;AAEvB,QAAM,wBAAwB,EAAE,MAAM,SAAS,CAAC;AAChD,UAAQ,IAAI,IAAI;AAClB;AAOO,IAAM,4BAA4B,YAAY;AACnD,QAAM,aAAa,MAAM,YAAY;AACrC,QAAM,YAAY,uBAAuB;AAEzC,MAAI,eAAe;AAAM,WAAO;AAEhC,MAAI,aAAa,CAAC;AAAY,WAAO;AAErC,SAAO;AACT;AAMO,IAAM,sBAAsB,YAAY;AAC7C,MAAI;AACF,UAAM,WAAW,MAAM,iBAAiB;AAExC,UAAM,IAAI,YAAY,QAAQ;AAC9B,UAAM,IAAI,eAAe,KAAK,IAAI,CAAC;AACnC,UAAM,IAAI,OAAO,MAAM,wBAAwB,CAAC;AAEhD,WAAO;AAAA,EACT,SAAS,OAAP;AAEA,UAAM,IAAI,YAAY,CAAC,CAAC;AACxB,UAAM,IAAI,eAAe,KAAK,IAAI,CAAC;AACnC,UAAM,IAAI,OAAO,EAAE;AACnB,WAAO;AAAA,EACT;AACF;;;AIxFA,SAAS,WAAWC,OAAc;AAChC,MAAI,QAAQ,aAAa,SAAS;AAChC,QAAI;AACF,aAAO,UAAQ,QAAQ,QAAQA,WAAU;AAAA,IAC3C,QAAE;AAAA,IAAO;AAAA,EACX;AACA,SAAO,UAAQ,QAAQ,QAAQA,OAAM;AACvC;AAKO,IAAM,iBAAiB;AAAA,EAC5B,mCAA0B,GAAG;AAAA,IAC3B,QAAQ,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC7C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,QAAQ,MAAM,WAAW,eAAe;AAAA,EAC1C;AAAA,EACA,kBAAkB,GAAG;AAAA,IACnB,QAAQ,CAAC,SAAmB,CAAC,OAAO,GAAG,IAAI;AAAA,IAC3C,UAAU,CAAC,SAAmB,CAAC,WAAW,GAAG,IAAI;AAAA,IACjD,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,QAAQ,MAAM,WAAW,MAAM;AAAA,EACjC;AAAA,EACA,sBAAoB,GAAG;AAAA,IACrB,QAAQ,CAAC,SAAmB,CAAC,OAAO,GAAG,IAAI;AAAA,IAC3C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,QAAQ,MAAM,WAAW,MAAM;AAAA,EACjC;AAAA,EACA,oBAAmB,GAAG;AAAA,IACpB,QAAQ,CAAC,SAAmB,CAAC,OAAO,GAAG,IAAI;AAAA,IAC3C,UAAU,CAAC,SAAmB;AAI5B,YAAM,UAAU,6BAAM;AACtB,UAAI,SAAS;AACX,eAAO;AAAA,MACT;AAGA,cAAQ,IAAI;AACZ,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,KAAK,+CAA+C;AAC5D,cAAQ,KAAK,0CAA0C;AACvD,cAAQ,IAAI;AAEZ,aAAO,CAAC,kBAAkB;AAAA,IAC5B;AAAA,IACA,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,QAAQ,CAAC,SAAqC;AAC5C,aAAO,WAAW,SAAS,UAAU,gBAAgB,OAAO;AAAA,IAC9D;AAAA,EACF;AAAA,EACA,8BAAwB,GAAG;AAAA,IACzB,QAAQ,CAAC,SAAmB,CAAC,YAAY,GAAG,IAAI;AAAA,IAChD,UAAU,CAAC,SAAmB;AAI5B,YAAM,UAAU,6BAAM;AACtB,UAAI,SAAS;AACX,eAAO;AAAA,MACT;AAGA,cAAQ,IAAI;AACZ,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,KAAK,sDAAsD;AACnE,cAAQ,KAAK,iDAAiD;AAC9D,cAAQ,IAAI;AAEZ,aAAO,CAAC,yBAAyB;AAAA,IACnC;AAAA,IACA,UAAU,CAAC,SAAmB,CAAC,cAAc,GAAG,IAAI;AAAA,IACpD,QAAQ,CAAC,SAAqC;AAC5C,aAAO,WAAW,SAAS,UAAU,gBAAgB,OAAO;AAAA,IAC9D;AAAA,EACF;AAAA,EACA,4BAAuB,GAAG;AAAA,IACxB,QAAQ,CAAC,SAAmB,CAAC,YAAY,GAAG,IAAI;AAAA,IAChD,UAAU,CAAC,SAAmB,CAAC,WAAW,GAAG,IAAI;AAAA,IACjD,UAAU,CAAC,SAAmB,CAAC,cAAc,GAAG,IAAI;AAAA,IACpD,QAAQ,CAAC,SAAqC;AAC5C,aAAO,WAAW,SAAS,UAAU,SAAS,OAAO;AAAA,IACvD;AAAA,EACF;AAAA,EACA,oBAAmB,GAAG;AAAA,IACpB,QAAQ,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC7C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,QAAQ,MAAM,WAAW,OAAO;AAAA,EAClC;AAAA,EACA,sBAAoB,GAAG;AAAA,IACrB,QAAQ,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC7C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,UAAU,CAAC,SAAmB,CAAC,SAAS,GAAG,IAAI;AAAA,IAC/C,QAAQ,MAAM,WAAW,QAAQ;AAAA,EACnC;AAAA,EACA,wBAAqB,GAAG;AAAA,IACtB,QAAQ,CAAC,SAAmB,CAAC,GAAG,IAAI;AAAA,IACpC,UAAU,CAAC,SAAmB,CAAC,GAAG,IAAI;AAAA,IACtC,UAAU,CAAC,SAAmB,CAAC,GAAG,IAAI;AAAA,IACtC,QAAQ,MAAM;AACZ,aAAO;AAAA,IACT;AAAA,EACF;AACF;;;ACjHA,OAAOC,YAAW;AAEX,IAAM,YAAY,OACvB,SACA,MACA,MAA8B,CAAC,MAC5B;AARL;AASE,MAAI,YAAY,WAAW;AACzB,UAAM,wBAAwB,OAAO,OAAO,YAAY,EACrD,OAAO,CAAC,MAAM,MAAM,SAAS,EAC7B,KAAK,IAAI;AAEZ,YAAQ;AAAA,MACN,2EAA2E;AAAA;AAAA,IAC7E;AAEA;AAAA,EACF;AAEA,QAAM,YAAYA,OAAM,SAAS,MAAM;AAAA,IACrC,OAAO;AAAA,IACP,aAAa;AAAA,IACb,KAAK;AAAA,MACH,aAAa;AAAA,MACb,qBAAqB,IAAI;AAAA,MACzB,GAAG;AAAA,MACH,GAAG,QAAQ;AAAA,IACb;AAAA,EACF,CAAC;AAED,kBAAU,WAAV,mBAAkB,KAAK,QAAQ;AAC/B,kBAAU,WAAV,mBAAkB,KAAK,QAAQ;AAE/B,SAAO,MAAM;AACf;;;AChCO,IAAM,uBAAuB,CAAC,WAAsC;AACzE,MAAI,cAAc,eAAe;AAEjC,MAAI,UAAoB,CAAC;AACzB,UAAQ,QAAQ;AAAA,IACd,KAAK;AACH,gBAAU,eAAe,WAAW,EAAE,OAAO,CAAC,EAAE,CAAC;AACjD;AAAA,IACF,KAAK;AACH,gBAAU,eAAe,WAAW,EAAE,SAAS,CAAC,EAAE,CAAC;AACnD;AAAA,IACF,KAAK;AACH,gBAAU,eAAe,WAAW,EAAE,SAAS,CAAC,EAAE,CAAC;AACnD;AAAA,EACJ;AAEA,MAAI,WAAW,SAAS;AACtB,YAAQ,aAAa;AAAA,MACnB;AAAA,MACA;AACE,sBAAc;AACd;AAAA,MACF;AACE;AACA;AAAA,IACJ;AAAA,EACF;AAEA,SAAO,cAAc,eAAe,QAAQ;AAAA,IAC1C;AAAA,EACF,yCAAyC;AAC3C;AAEO,IAAM,+BAA+B,MAAM;AAChD,SAAO;AAAA,MAAqC,OAAO,OAAO,YAAY,EAAE;AAAA,IACtE;AAAA,EACF;AACF;;;APjCA,IAAM,QAAQ,CAAC,YAAqB;AAClC,SAAO,QACJ,QAAQ,OAAO,EACf,YAAY,qBAAqB,OAAO,CAAC,EACzC,mBAAmB,IAAI,EACvB;AAAA,IACC,IAAI;AAAA,MACF;AAAA,MACA,6BAA6B;AAAA,IAC/B,EAAE;AAAA,MACA,OAAO,OAAO,YAAY,EAAE;AAAA,QAC1B,CAAC,SAAS;AAAA,MACZ;AAAA,IACF;AAAA,EACF,EACC,SAAS,WAAW,EACpB,OAAOC,OAAM;AAClB;AAEA,IAAMA,UAAS,OACb,MACA,EAAE,SAAS,MACR;AACH,QAAM,cAAc,eAAe,QAAQ;AAE3C,QAAM,UAAU,eAAe,WAAW,EAAE,OAAO,OAAO;AAC1D,QAAM,UAAU,eAAe,WAAW,EAAE,SAAS,IAAI;AAEzD,QAAM,eAAe;AAErB,YAAU,SAAS,OAAO;AAC5B;AAEA,IAAO,gBAAQ;;;AQvCf,SAAuB,UAAAC,eAAc;;;ACFrC,SAAS,cAAc;;;ACQvB,OAAOC,YAAW;;;ACRlB,SAAS,QAAQ,qBAAqB;AAE/B,IAAM,iBAAiB,OAAO,SAAiB;AACpD,MAAI;AACF,UAAM,iBAAiB,MAAM,cAAc,QAAQ,IAAI,CAAC;AAExD,WAAO,OAAO,MAAM;AAAA,MAClB,GAAI,kBAAkB,CAAC;AAAA,MACvB,QAAQ;AAAA,IACV,CAAC;AAAA,EACH,SAAS,KAAP;AACA,WAAO;AAAA,EACT;AACF;;;ADCO,IAAM,uBAAuB,YAAY;AAC9C,QAAM,wBAAwB,UAAQ,QAAQ,kBAAkB;AAChE,QAAM,EAAE,OAAO,IAAIC,OAAM,KAAK,uBAAuB;AAAA,IACnD;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAe;AAAA,IACf;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,MAAI,QAAQ;AACV,YAAQ,IAAI,MAAM;AAAA,EACpB;AACF;;;AEtBO,IAAM,mBAAmB,MAAkB;AAChD,QAAM,cAAc,eAAe;AAEnC,QAAM,UAAU,YAAY,WAAW,CAAC;AAExC,QAAM,cACF,mCAAS,QAAO,IAAe,MAAM,uBAAuB,MAAM;AAEtE,SAAO;AAAA,IACL,KAAK;AAAA,EACP;AACF;;;AHTA,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAOC,YAAW;AAClB,SAAS,gBAA8B;AACvC,OAAO,YAAY;AACnB,OAAO,YAAY;AAInB,IAAM,WAA8B,CAAC,SAAS,MAAM;AACpD,IAAM,iBAAkC;AAExC,IAAM,kCAAkC;AAExC,IAAMC,QAAO,CAAC,YAAqB;AACjC,SAAO,QACJ,QAAQ,UAAU,EAClB;AAAA,IACC;AAAA,EACF,EACC;AAAA,IACC,IAAI,SAAS,aAAa,2BAA2B,EAClD,QAAQ,QAAQ,EAChB,QAAQ,cAAc;AAAA,EAC3B,EACC;AAAA,IACC;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKF,EACC,OAAOC,OAAM;AAClB;AAEO,IAAMA,UAAS,OAAO,YAA6B;AACxD,UAAQ,SAAS;AAAA,IACf,KAAK;AACH,qBAAe;AACf;AAAA,IACF,KAAK;AACH,wBAAkB;AAClB;AAAA,EACJ;AACF;AAEA,IAAM,oBAAoB,YAAY;AA1DtC;AA2DE,QAAM,cAAc,MAAM,qBAAqB;AAE/C,QAAMC,eAAc,MAAM;AAAA,IACxB;AAAA,IACA;AAAA,EACF;AACA,MAAIA,cAAa;AACf,YAAQ,IAAI,gDAAyC;AACrD;AAAA,EACF;AAEA,MACE,eACC,MAAM,mCAAmC,EAAE,KAAK,YAAY,CAAC,GAC9D;AACA;AAAA,EACF;AAEA,UAAQ,IAAI,yCAAkC;AAC9C,QAAM,oBAAoB,CAAC,4BAA4B;AAEvD,MACE,CAAC,eACD,OAAO,GAAG,YAAY,SAAS,+BAA+B,GAC9D;AACA,sBAAkB,KAAK,wBAAwB;AAC/C,YAAQ,IAAI,gEAAyD;AAAA,EACvE;AACA,QAAM,oBAAoB,iBAAiB;AAG3C,UAAQ,IAAI,EAAE;AACd,UAAQ,IAAI,EAAE;AAEd,UAAQ,IAAI,yDAAkD;AAC9D,QAAM,qBAAqB;AAC3B,UAAQ;AAAA,IACN;AAAA,EACF;AAEA,MAAI,kBAAkB,SAAS,wBAAwB,GAAG;AACxD,UAAM,qBAAqB,MAAM,qBAAqB;AACtD,YAAQ;AAAA,MACN,4CACE,2CAAa,YAAW,iBACnB,yDAAoB,YAAW;AAAA,IACxC;AACA,YAAQ;AAAA,MACN,iBAAiBH,OAAM,UAAU;AAAA,QAC/B,8BACE,2CAAa,QAAQ,WAAW,KAAK,QAAO;AAAA,MAEhD;AAAA,IACF;AAAA,EACF;AAGA,UAAQ,IAAI,EAAE;AAEd,QAAM,EAAE,KAAAI,KAAI,IAAI,iBAAiB;AACjC,MAAIA,MAAK;AACP,YAAQ;AAAA,MACN;AAAA,IACF;AACA,YAAQ;AAAA,MACN;AAAA,IACF;AACA;AAAA,EACF;AAEA,MAAI,CAACA,MAAK;AACR,UAAM,aAAY,oBAAe,EAAE,YAAjB,mBAA0B;AAE5C,YAAQ;AAAA,MACN;AAAA,IACF;AACA,YAAQ,IAAI,4DAAqD;AACjE,YAAQ;AAAA,MACN;AAAA,IACF;AAGA,YAAQ,IAAI,EAAE;AACd,YAAQ;AAAA,MACN;AAAA,QACE,SAAS;AAAA,UACP,OAAO;AAAA;AAAA;AAAA,kCAGiB;AAAA;AAAA;AAAA;AAAA,SAIzB;AAAA,QACD;AAAA,QACA;AAAA,UACE,SAAS;AAAA,UACT,OAAO;AAAA,UACP,WAAW;AAAA,UACX,aAAa;AAAA,UACb,aAAa;AAAA,QACf;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEO,IAAM,iBAAiB,OAAO;AAAA,EACnC,cAAc;AAChB,IAA+B,CAAC,MAAM;AACpC,QAAM,cAAc,MAAM,qBAAqB;AAE/C,MAAI,aAAa;AACf,QAAI,MAAM,mCAAmC,EAAE,KAAK,YAAY,CAAC,GAAG;AAClE;AAAA,IACF;AAEA,QAAI,OAAO,GAAG,YAAY,SAAS,+BAA+B,GAAG;AACnE,cAAQ;AAAA,QACN,mDAA4C,YAAY;AAAA,MAC1D;AACA,YAAM,KAAK,MAAM,cAAc;AAC/B,cAAQ;AAAA,QACN,gEAAyD,GAAG;AAAA,MAC9D;AACA;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AAAA,IACL,SAAS,MAAM;AACb,UAAI,aAAa;AACf,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAAA,IACF;AAAA,EACF,CAAC,EAAE,MAAM,CAAC,MAAM;AAAA,EAAC,CAAC;AACpB;AAEA,IAAM,uBAAuB,YAAY;AACvC,QAAM,0BACJ,MAAM,0CAA0C;AAClD,QAAM,cAAc,mEAAyB;AAAA,IAC3C,CAAC,QACC,IAAI,SAAS,qBAAqB,IAAI,SAAS;AAAA;AAGnD,MAAI,CAAC,aAAa;AAChB,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEO,IAAM,qCAAqC,OAAO;AAAA,EACvD;AACF,MAEM;AACJ,MAAI,IAAI,SAAS,yBAAyB,OAAO,GAAG,IAAI,SAAS,OAAO,GAAG;AACzE,YAAQ;AAAA,MACN,mDAA4C,IAAI;AAAA,IAClD;AACA,YAAQ,IAAI,kDAAkD;AAC9D,YAAQ;AAAA,MACNJ,OAAM,KAAK,mDAAmD;AAAA,IAChE;AACA,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAO,mBAAQC;;;AD5Nf,IAAM,MAAM,CAAC,YAAqB;AAChC,SAAO,QACJ,QAAQ,KAAK,EACb,YAAY,qBAAqB,KAAK,CAAC,EACvC,mBAAmB,IAAI,EACvB;AAAA,IACC,IAAII;AAAA,MACF;AAAA,MACA,6BAA6B;AAAA,IAC/B,EAAE;AAAA,MACA,OAAO,OAAO,YAAY,EAAE;AAAA,QAC1B,CAAC,SAAS;AAAA,MACZ;AAAA,IACF;AAAA,EACF,EACC;AAAA,IACC,IAAIA;AAAA,MACF;AAAA,MACA;AAAA,IACF,EAAE,QAAQ,QAAQ,+BAA+B;AAAA,EACnD,EACC,SAAS,WAAW,EACpB,OAAOC,OAAM;AAClB;AAEA,IAAMA,UAAS,OACb,MACA,EAAE,UAAU,GAAG,OAAO,MACnB;AACH,QAAM,cAAc,eAAe,QAAQ;AAE3C,QAAM,UAAU,eAAe,WAAW,EAAE,OAAO,KAAK;AACxD,QAAM,UAAU,eAAe,WAAW,EAAE,OAAO,IAAI;AAEvD,QAAM,eAAe;AAErB,QAAM,qBAAqB,+BAA+B,WAAW;AAErE,QAAM,kBAAkB,MAAM,oBAAoB;AAElD,QAAM,WAAW,OAAO,aAAa,UAAU,QAAQ;AAEvD,MAAI,UAAU;AACZ,mBAAe,EAAE,aAAa,MAAM,CAAC;AAAA,EACvC;AAEA,QAAM,sBACJ,YAAY,IAAI,uBACZ,EAAE,CAAC,kBAAkB,GAAG,IAAI,qBAAqB,IACjD;AAEN,YAAU,SAAS,SAAS,mBAAmB;AACjD;AAEA,IAAO,cAAQ;;;AKjEf,SAAkB,UAAAC,eAAc;AAQhC,IAAM,QAAQ,CAAC,YAAqB;AAChC,SAAO,QACF,QAAQ,OAAO,EACf,YAAY,qBAAqB,OAAO,CAAC,EACzC,mBAAmB,IAAI,EACvB;AAAA,IACG,IAAIC;AAAA,MACA;AAAA,MACA,6BAA6B;AAAA,IACjC,EAAE;AAAA,MACE,OAAO,OAAO,YAAY,EAAE;AAAA,QACxB,CAAC,SAAS;AAAA,MACd;AAAA,IACJ;AAAA,EACJ,EACC,SAAS,WAAW,EACpB,OAAOC,OAAM;AACtB;AAEA,IAAMA,UAAS,OACX,MACA,EAAE,SAAS,MACV;AACD,QAAM,cAAe,eAAe,QAAQ;AAE5C,QAAM,UAAU,eAAe,WAAW,EAAE,OAAO,OAAO;AAC1D,QAAM,UAAU,eAAe,WAAW,EAAE,SAAS,IAAI;AAGzD,QAAM,eAAe;AAErB,MAAI;AACA,UAAM,UAAU,SAAS,OAAO;AAAA,EACpC,SAAS,OAAP;AACE,YAAQ,KAAK,CAAC;AAAA,EAClB;AACJ;AAEA,IAAO,gBAAQ;;;AC7Cf,OAAOC,YAAW;AAIlB,IAAM,MAAM,CAAC,YAAqB;AAChC,SAAO,QACJ,QAAQ,KAAK,EACb;AAAA,IACC;AAAA,EACF,EACC,mBAAmB,IAAI,EACvB,SAAS,qBAAqB,EAC9B,OAAOC,OAAM;AAClB;AAEA,IAAMA,UAAS,OAAO,SAAmB;AACvC,QAAM,CAAC,QAAQ,GAAG,QAAQ,IAAI;AAE9B,QAAM,mBAAmB,WAAW;AAGpC,MAAI,CAAC,QAAQ;AACX,YAAQ,IAAI,iBAAiBC,OAAM,KAAK,cAAc;AAAA,CAAM;AAC5D,eAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,gBAAgB,GAAG;AAC3D,cAAQ,IAAI,KAAK,KAAK;AACtB,cAAQ,IAAI,OAAOA,OAAM,IAAI,KAAK,GAAG;AACrC,cAAQ,IAAI;AAAA,IACd;AAEA;AAAA,EACF;AAGA,QAAM,kBAAkB,OAAO,KAAK,gBAAgB,EAAE,SAAS,MAAM;AAErE,MAAI,CAAC,iBAAiB;AACpB,UAAM,UAAU,GAAG,QAAQ,IAAI,uBAAuB;AACtD,cAAU,SAAS,QAAQ;AAC3B;AAAA,EACF;AAEA,QAAM,KAAK,MAAM,cAAc;AAC/B,YAAU,GAAG,MAAM,CAAC,OAAO,QAAQ,GAAG,QAAQ,CAAC;AACjD;AAEA,IAAO,cAAQ;;;AC7Cf,OAAOC,WAAU;AACjB,OAAOC,YAAW;AAClB,OAAOC,eAAc;AAErB,OAAO,gCAAgC;AACvC,SAAS,YAAY,cAAAC,aAAY,UAAU,iBAAiB;;;ACN5D,OAAOC,WAAU;;;ACAjB,OAAOC,WAAU;;;ACAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,IAAM,eACJ;AAEF,IAAM,kBAAkB;AAkBjB,IAAM,aAAa,CAAC,YAAwC;AACjE,QAAM,UAAU,QAAQ,SAAS,YAAY;AAE7C,QAAM,UAA8B,CAAC;AAErC,aAAW,SAAS,SAAS;AAC3B,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI;AAEJ,YAAQ,KAAK;AAAA,MACX,QAAQ,eAAe;AAAA,MACvB;AAAA,MACA;AAAA,MACA,GAAI,iBAAiB,EAAE,cAAc;AAAA,MACrC,GAAI,gBAAgB,EAAE,aAAa;AAAA,MACnC,GAAI,mBAAmB,EAAE,gBAAgB;AAAA,IAC3C,CAAC;AAAA,EACH;AAEA,SAAO,mCAAS,OAAO;AACzB;AAEO,IAAM,wBAAwB,CACnC,sBAC2B;AAC3B,QAAM,UAAU,kBAAkB,SAAS,eAAe;AAE1D,QAAM,cAAsC,CAAC;AAE7C,aAAW,SAAS,SAAS;AAC3B,UAAM,CAAC,WAAW,UAAU,KAAK,QAAQ,cAAc,IAAI;AAE3D,gBAAY,KAAK;AAAA,MACf;AAAA,MACA,UAAU,SAAS,KAAK;AAAA,MACxB,QAAQ,OAAO,KAAK;AAAA,MACpB;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAGO,IAAM,yBAAyB,CACpC,SACA,gBACW;AA1Eb;AA4EE,QAAM,sBAAsB,QAAQ;AAAA,IAClC;AAAA,IACA,QAAQ,QAAQ,YAAY,SAAS;AAAA,EACvC;AAEA,QAAM,sBAAsB,WAAW,mBAAmB,EAAE,IAAI;AAGhE,MAAI,CAAC,qBAAqB;AACxB,WAAO;AAAA,EACT;AAGA,QAAM,wBAAwB,oBAAoB;AAAA,IAChD,oBAAoB,QAAQ,2DAAqB,SAAS,MACxD,gEAAqB,cAArB,mBAAgC;AAAA,EACpC;AAGA,SAAO;AACT;AAGO,IAAM,2BAA2B,CACtC,SACA,gBACY;AACZ,QAAM,sBAAsB,cACxB,uBAAuB,SAAS,WAAW,IAC3C;AAEJ,SAAO,CAAC,CAAC,oBAAoB,KAAK;AACpC;AAEA,IAAM,eAAe,CAAC,SAAS,mBAAmB,aAAa;AAExD,IAAM,iBAAiB,CAAC,YAA4B;AAhH3D;AAiHE,MAAI,aAAa;AAGjB,QAAM,aAAa,WAAW,OAAO;AAErC,QAAM,mBAAmB,WAAW;AAAA,IAClC,CAAC,gBAAgB,CAAC,YAAY;AAAA,EAChC;AACA,QAAM,cAAc,WAAW,OAAO,CAAC,gBAAgB,YAAY,MAAM;AAEzE,QAAM,2BAA0C,CAAC;AACjD,QAAM,8BAA6C,CAAC;AAGpD,cAAY,QAAQ,CAAC,gBAAgB;AACnC,iBAAa,WAAW,QAAQ,GAAG,YAAY;AAAA,GAAe,EAAE;AAAA,EAClE,CAAC;AAED,mBAAiB,QAAQ,CAAC,gBAAgB;AACxC,QAAI,yBAAyB,YAAY,WAAW,GAAG;AACrD,+BAAyB,KAAK,WAAW;AAAA,IAC3C,OAAO;AACL,kCAA4B,KAAK,WAAW;AAAA,IAC9C;AAAA,EACF,CAAC;AAGD,QAAM,iBAAiB,WAAW;AAAA,KAChC,gFAA8B,OAA9B,mBAAkC;AAAA,EACpC;AAGA,8BAA4B,QAAQ,CAAC,gBAAgB;AACnD,iBAAa,WAAW,QAAQ,YAAY,WAAW,EAAE;AAAA,EAC3D,CAAC;AAGD,QAAM,mBAAmB,4BAA4B;AAAA,IACnD,CAAC,KAAK,gBAAgB;AACpB,YAAM,EAAE,WAAW,IAAI;AAEvB,UAAI,IAAI,UAAU,GAAG;AACnB,YAAI,UAAU,EAAE,KAAK,WAAW;AAAA,MAClC,OAAO;AACL,YAAI,UAAU,IAAI,CAAC,WAAW;AAAA,MAChC;AAEA,aAAO;AAAA,IACT;AAAA,IACA,CAAC;AAAA,EACH;AAGA,QAAM,gBAAgB,OAAO,QAAQ,gBAAgB,EAAE;AAAA,IACrD,CAAC,CAAC,YAAY,aAAa,MAAM;AAE/B,YAAM,gBAAgB,cAAc;AAAA,QAClC,CAAC,gBAAgB,YAAY;AAAA,MAC/B;AAGA,YAAM,kBAAkB,cAAc;AAAA,QACpC,CAAC,gBAAgB,YAAY;AAAA,MAC/B;AAKA,YAAM,eAAe,cAClB,OAAO,CAAC,gBAAgB,YAAY,YAAY,EAChD,IAAI,CAAC,gBAAgB;AAEpB,cAAMC,iBAAgB,YAAY,gBAAgB,IAC/C,QAAQ,QAAQ,EAAE,EAClB,KAAK,EACL,MAAM,GAAG,EACT,IAAI,CAAC,gBAAgB,YAAY,KAAK,CAAC;AAE1C,eAAOA,cAAa,OAAO,OAAO,EAAE,KAAK,IAAI;AAAA,MAC/C,CAAC,EACA,KAAK,IAAI;AAEZ,UAAI,aAAa;AAKjB,UAAI,iBAAiB;AACnB,sBAAc,GAAG,gBAAgB;AAAA;AAAA,MACnC;AACA,UAAI,iBAAiB,cAAc;AACjC,YAAI,iBAAiB,cAAc;AACjC,wBAAc,UAAU,cAAc,oBAAoB,wBAAwB,cAAc,CAAC,EAAE;AAAA;AAAA,QACrG,WAAW,eAAe;AACxB,wBAAc,UAAU,cAAc,uBAAuB,cAAc,CAAC,EAAE;AAAA;AAAA,QAChF,OAAO;AACL,wBAAc,YAAY,wBAAwB,cAAc,CAAC,EAAE;AAAA;AAAA,QACrE;AAAA,MACF;AAEA,aAAO,CAAC,YAAY,UAAU;AAAA,IAIhC;AAAA,EACF;AAKA,QAAM,gBAAgB,CAAC,GAAG,aAAa,EAAE;AAAA,IACvC,CAAC,CAAC,WAAW,GAAG,CAAC,WAAW,MAAM;AAChC,YAAM,oBAAoB,aAAa;AAAA,QAAU,CAAC,UAChD,YAAY,SAAS,KAAK;AAAA,MAC5B;AACA,YAAM,oBAAoB,aAAa;AAAA,QAAU,CAAC,UAChD,YAAY,SAAS,KAAK;AAAA,MAC5B;AAEA,UAAI,sBAAsB,mBAAmB;AAC3C,eAAO,YAAY,cAAc,WAAW;AAAA,MAC9C;AAEA,UAAI,sBAAsB,IAAI;AAC5B,eAAO;AAAA,MACT;AAEA,UAAI,sBAAsB,IAAI;AAC5B,eAAO;AAAA,MACT;AAEA,aAAO,oBAAoB;AAAA,IAC7B;AAAA,EACF;AAIA,QAAM,sBAAsB,cACzB,IAAI,CAAC,CAAC,EAAE,UAAU,MAAM,UAAU,EAClC,KAAK,EAAE;AACV,QAAM,oBAAoB;AAAA,IACxB,GAAG,YAAY,IAAI,CAAC,gBAAgB,YAAY,SAAS;AAAA,IACzD;AAAA,EACF,EAAE,KAAK,IAAI;AAEX,eACE,WAAW,UAAU,GAAG,cAAc,IACtC,sBACA,oBACA,WAAW,UAAU,cAAc;AAErC,SAAO;AACT;;;ACvQO,IAAM,qBAAqB,CAAC,SAAiB,WAA2B;AAC7E,QAAM,UAAU,WAAW,OAAO;AAClC,QAAM,aAAa,QAAQ,QAAQ,SAAS,CAAC;AAE7C,QAAM,kBAAkB,aACpB,QAAQ,QAAQ,WAAW,SAAS,IACpC,QAAQ,SAAS;AAErB,SAAO,GAAG,QAAQ;AAAA,IAChB;AAAA,IACA,mBAAkB,yCAAY,UAAU;AAAA,EAC1C;AAAA,EAAM;AAAA,EAAW,QAAQ;AAAA,IACvB,mBAAkB,yCAAY,UAAU;AAAA,EAC1C;AACF;;;AChBA,SAAS,gBAAAC,qBAAoB;AAC7B,SAAS,QAAAC,aAAY;AAEd,SAAS,eAEdC,OACoB;AACpB,MAAI,EAAC,6BAAM,qBAAoB;AAC7B,WAAO;AAAA,EACT;AACA,MAAI;AACF,WAAOF,cAAaC,MAAK,KAAK,oBAAoBC,KAAI,CAAC,EAAE,SAAS;AAAA,EACpE,SAAS,KAAP;AACA,WAAO;AAAA,EACT;AACF;;;AJXA,IAAM,SAAS,UAAQ,QAAQ;AAC/B,IAAM,kBAAkB,OAAO,UAAU;AAElC,IAAM,oBAAoB,CAC/B,aACA,eACG;AACH,SAAO,UAAU,UAAU,YAAa,MAA+B;AACrE,QAAK,KAAK,CAAC,MAA4B,kBAAkB;AACvD,aAAO;AAAA,QACL,GAAG;AAAA,QACH,gBAAgB,CAAC,aAAqB;AACpC,iBAAO,eAAe;AAAA,YACpB;AAAA,cACE,oBAAoB,aAChB,cACAC,MAAK,KAAK,QAAQ,IAAI,GAAG,WAAW;AAAA,YAC1C;AAAA,YACA;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAGA,WAAO,gBAAgB,MAAM,MAAM,IAAI;AAAA,EACzC;AACF;;;AD3BO,IAAM,kBAAkB,OAC7B,aACA,eACG;AACH,MAAI;AACF,sBAAkB,aAAa,UAAU;AAEzC,UAAMC,UAAS,UACbC,MAAK;AAAA,MACH,aAAa,cAAcA,MAAK,KAAK,QAAQ,IAAI,GAAG,WAAW;AAAA,MAC/D;AAAA,IACF,CACF;AAEA,WAAOD;AAAA,EACT,SAAS,OAAP;AACA,WAAO;AAAA,EACT;AACF;;;AMrBA,OAAOE,aAAY;;;ACDZ,IAAM,gBAAgB;AAAA,EAC3B,SAAS;AAAA,EACT,eAAe;AAAA,EACf,uBAAuB;AAAA,EACvB,uBAAuB;AAAA,EACvB,wBAAwB;AAAA,EACxB,uBAAuB;AACzB;;;ADJA,OAAOC,YAAW;;;AEHlB,OAAOC,YAAW;AAClB,OAAOC,eAAc;AACrB,OAAOC,YAAW;AAElB,IAAM,cAAc,CAAC,YAAsD;AACzE,QAAM,cAAc;AAEpB,QAAM,CAAC,aAAa,UAAU,IAAI,YAAY,KAAK,OAAO,KAAK,CAAC;AAEhE,MAAI,YAAY;AACd,UAAM,QAAQ,WAAW,KAAK;AAC9B,UAAM,OAAO,QAAQ,QAAQ,eAAe,IAAI,EAAE;AAElD,WAAO,EAAE,OAAO,KAAK;AAAA,EACvB;AAEA,SAAO,EAAE,MAAM,QAAQ;AACzB;AAEO,IAAM,qBAAqB,CAAC,YAAoB;AACrD,QAAM,EAAE,OAAO,MAAM,QAAQ,IAAI,YAAY,OAAO;AAEpD,MAAI,cAAc;AAGlB,MAAI;AACF,UAAM,OAAOD,UAAS,UAAU,SAAS;AAAA,MACvC,KAAK;AAAA,IACP,CAAC;AACD,kBAAc;AAAA,EAChB,SAAS,KAAP;AACA,kBAAc;AAAA,EAChB;AAGA,QAAM,QAAQC,OAAM,aAAa;AAAA,IAC/B,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,aAAa;AAAA,IACb,gBAAgB;AAAA,IAChB,OAAO,QAAQF,OAAM,KAAK,KAAK,IAAI;AAAA,EACrC,CAAC;AAED,SAAO;AACT;;;AC5CA,SAAS,cAAc;AACvB,OAAO,sBAAsB;AAEtB,IAAM,yBAAyB,CAAC,aAAqB;AAC1D,SAAO,OAAO,UAAU;AAAA,IACtB,UAAU,IAAI,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAAA,EAC7D,CAAC;AACH;;;AHIO,IAAM,sBAAsB,CAAC;AAAA,EAClC;AAAA,EACA;AAAA,EACA,UAAU;AACZ,MAAc;AACZ,QAAM,SAAS,MAAM;AAAA,IAAO,CAAC,CAAC,EAAE,UAAU,MACxC,OAAO,OAAO,aAAa,EACxB,OAAO,CAAC,SAAS,SAAS,cAAc,OAAO,EAC/C,SAAS,UAAU;AAAA,EACxB;AAEA,MAAI,SAAS;AAEb,UAAQ,OAAO,QAAQ;AAAA,IAErB,KAAK;AACH,eAAS;AACT;AAAA,IAEF,KAAK,MAAM;AACT,eAAS;AACT;AAAA,IAEF;AACE,eAAS;AACT;AAAA,EACJ;AAEA,QAAM,gBAAgB,CAAC,aAAqB;AAC1C,UAAMG,YAAW,qCAAU,QAAQ,QAAQ,IAAI,GAAG;AAElD,QAAIA,aAAA,gBAAAA,UAAU,WAAW,MAAM;AAC7B,aAAOA,UAAS,MAAM,CAAC;AAAA,IACzB;AACA,QAAIA,aAAA,gBAAAA,UAAU,WAAW,OAAO;AAC9B,aAAOA,UAAS,MAAM,CAAC;AAAA,IACzB;AACA,WAAOA;AAAA,EACT;AAEA,QAAM,qBAAqB,MAAM;AAC/B,YAAQ,QAAQ;AAAA,MACd,KAAK;AACH,gBAAQ;AAAA,UACNC,OAAM,WAAW,yBAAyBA,OAAM,KAAK,KAAK,GAAG;AAAA,QAC/D;AACA;AAAA,MACF,KAAK;AACH,gBAAQ;AAAA,UACNA,OAAM;AAAA,YACJ,qCAAqCA,OAAM,KAAK,KAAK;AAAA,UACvD;AAAA,QACF;AACA;AAAA,MACF,KAAK;AACH,gBAAQ,IAAIA,OAAM,UAAU,sBAAsBA,OAAM,KAAK,KAAK,GAAG,CAAC;AACtE;AAAA,MACF;AACE;AAAA,IACJ;AAAA,EACF;AAEA,QAAM,aAAa,MAAM;AACvB,UAAM,SAAS,CAAC;AAEhB,WAAO,KAAKA,OAAM,IAAI,OAAO,MAAM,SAAS,IAAI,MAAM,aAAa,CAAC;AACpE,WAAO;AAAA,MACL,MACG,IAAI,CAAC,CAAC,YAAY,UAAU,MAAM;AACjC,YAAI,eAAe,cAAc,SAAS;AACxC,iBAAOA,OAAM,WAAW,IAAI,MAAM,cAAc,UAAU,GAAG;AAAA,QAC/D;AACA,YAAI,eAAe,cAAc,uBAAuB;AACtD,iBAAOA,OAAM,WAAW;AAAA,YACtB,MAAMA,OAAM,aAAa;AAAA,cACvB;AAAA,YACF,IAAI,cAAc,UAAU;AAAA,UAC9B;AAAA,QACF;AACA,YAAI,eAAe,cAAc,wBAAwB;AACvD,iBAAOA,OAAM,WAAW;AAAA,YACtB,MAAMA,OAAM,aAAa;AAAA,cACvB;AAAA,YACF,IAAI,cAAc,UAAU;AAAA,UAC9B;AAAA,QACF;AAEA,eAAOA,OAAM,WAAW;AAAA,UACtB,MAAMA,OAAM,aAAa,KAAK,IAAI,aAAa,IAAI;AAAA,YACjD;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC,EACA,KAAK,IAAI;AAAA,IACd;AAEA,YAAQ,IAAI,OAAO,KAAK,IAAI,CAAC;AAAA,EAC/B;AAEA,QAAMC,uBAAsB,MAAM;AAChC,QAAI,WAAW,WAAW,SAAS;AACjC,cAAQ,IAAI,uBAAuBC,QAAO;AAAA,EAAK,SAAS,CAAC,CAAC;AAAA,IAC5D;AAAA,EACF;AAEA,UAAQ,IAAI,EAAE;AACd,qBAAmB;AACnB,aAAW;AACX,UAAQ,IAAI,EAAE;AACd,EAAAD,qBAAoB;AACtB;;;AI1HO,IAAM,qBAAqB,CAAC,YAAoB;AACrD,QAAM,QACJ;AAEF,SAAO,QAAQ,QAAQ,OAAO,EAAE;AAClC;;;AXgBA,OAAOE,YAAW;;;AYjBX,IAAM,gBAAgB,MAAM;AACjC,MAAI,cAAwC;AAE5C,MAAI;AACF,kBAAc,eAAe;AAAA,EAC/B,SAAS,OAAP;AACA,kBAAc;AAAA,EAChB;AAEA,QAAM,aAAa,sBAAsB,WAAW;AAEpD,SAAO;AACT;;;AChBA,OAAOC,eAAc;AACrB,OAAOC,YAAW;AAGX,IAAM,+BAA+B,OAC1CC,sBACG;AACH,QAAM,UACJ,gEACG,OAAOA,kBAAiB,IAAI,CAAC,QAAQ,MAAM,KAAK,EAAE,KAAK,IAAI,CAAC,EAC5D,OAAO,gCAAgC;AAE5C,QAAM,EAAE,yBAAAC,yBAAwB,IAAI,MAAMC,UAAS,OAEhD;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAOD;AACT;AAEO,IAAM,mCAAmC,OAC9CD,sBACG;AACH,QAAM,KAAK,MAAM,cAAc;AAC/B,QAAM,YAAY,WAAW,GAAG,IAAI,EAAE,IAAI,KAAK,GAAG;AAClD,QAAM,WAAWA,kBAAiB,KAAK,GAAG;AAC1C,QAAM,UAAU,GAAG,GAAG,QAAQ,aAAa;AAE3C,UAAQ,IAAI,0DAA0D;AACtE,UAAQ,IAAIG,OAAM,KAAK,WAAW,OAAO,CAAC;AAC5C;;;AC9BO,IAAM,0BAA0B,OAAOC,sBAA+B;AAC3E,QAAMC,2BACJ,MAAM,6BAA6BD,iBAAgB;AAErD,MAAI,CAACC,0BAAyB;AAC5B,UAAM,iCAAiCD,iBAAgB;AAAA,EACzD,OAAO;AACL,UAAM,gBAAgBA,iBAAgB;AAAA,EACxC;AACF;;;AdUA,IAAM,UAAU,CAAC,YAAqB;AACpC,SAAO,QACJ,QAAQ,SAAS,EACjB;AAAA,IACC,yCAAyCE,OAAM;AAAA,MAC7C;AAAA,IACF;AAAA,EACF,EACC,OAAOC,OAAM;AAClB;AAEA,IAAM,wBACJ,CACE,YAMF,CAAC,UAAc,QAAQ,OAAO;AAC5B,QAAM,WAAW,QAAQ;AAAA,IACvB,CAAC,OAAI;AA9CX;AA+CQ,gBAAG,MAAM,YAAY,EAAE,SAAS,MAAM,YAAY,CAAC,OACnD,QAAG,UAAH,mBAAU,cAAc,SAAS,MAAM,YAAY;AAAA;AAAA,EACvD;AAEA,SAAO,SAAS,QAAQ,CAAC,WAAW,OAAO,QAAQ;AAnDvD;AAoDM,UAAM,YACJ,uCAAW,YAAS,SAAI,QAAQ,CAAC,MAAb,mBAAgB,WAAU,UAAU;AAC1D,UAAM,YACJ,YAAY,UAAU,QAClB,CAAC,IAAIC,UAAS,UAAUF,OAAM,KAAK,UAAU,KAAK,CAAC,CAAC,IACpD,CAAC;AAEP,WAAO;AAAA,MACL,GAAG;AAAA,MACH;AAAA,QACE,MAAM,IAAI,UAAU;AAAA,QACpB,QAAO,uCAAW,SAAQ,UAAU,QAAQ;AAAA,MAC9C;AAAA,IACF;AAAA,EACF,CAAC;AACH;AAEF,IAAMC,UAAS,OAAO,aAA2B;AArEjD;AAsEE,EAAAC,UAAS,eAAe,gBAAgB,0BAA0B;AAElE,QAAM,oBAAoB,MAAM,0CAA0C;AAE1E,QAAM,qBAA4D,CAAC;AAEnE,QAAM,QAAQ;AAAA,IACZ,kBAAkB,IAAI,OAAO,QAAQ;AACnC,YAAM,YAAY,MAAM,0BAA0B,IAAI,IAAI;AAC1D,YAAM,iBACJ,mBAAmB,UAAU,CAAC,OAAO,GAAG,SAAS,IAAI,IAAI,MAAM;AACjE,UAAI,aAAa,gBAAgB;AAC/B,2BAAmB,KAAK,GAAG;AAAA,MAC7B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAI,mBAAmB,WAAW,GAAG;AACnC,YAAQ,IAAI,sDAAsD;AAClE;AAAA,EACF;AAEA,UAAQ;AAAA,IACN,GAAGC;AAAA,MACD,SAASH,OAAM;AAAA,QACb,mBAAmB;AAAA,MACrB,eAAeA,OAAM,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,SAAS;AAAA,QACT,eAAe;AAAA,QACf,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,MACf;AAAA,IACF;AAAA;AAAA,EACF;AAEA,QAAM,iBAAiB,MAAM,QAAQ;AAAA,IACnC,mBAAmB,IAAI,OAAO,QAAQ;AACpC,YAAMI,UAAU,MAAM,gBAAgB,IAAI,MAAM,IAAI,KACjD,MAAM,gBAAgB,IAAI,MAAM,KAAK,KAAM;AAAA,QAC1C,SAAS,EAAE,OAAO,CAAC,EAAE;AAAA,MACvB;AACF,aAAO;AAAA,QACL,GAAG;AAAA,QACH,QAAAA;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAEA,QAAM,EAAE,gBAAgB,IAAI,MAAMF,UAAS,OAExC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,MACT,WAAW;AAAA,MACX,QAAQ;AAAA,QACN,eACG;AAAA,UAAK,CAAC,GAAG,MAAG;AArIvB,gBAAAG,KAAAC;AAsIa,sBAAAD,MAAA,EAAE,WAAF,gBAAAA,IAAU,UAAS,IAAI,gBAAcC,MAAA,EAAE,WAAF,gBAAAA,IAAU,UAAS,EAAE;AAAA;AAAA,QAC7D,EACC,IAAI,CAAC,QAAK;AAxIrB,cAAAD,KAAAC;AAwIyB;AAAA,YACb,SAAOD,MAAA,IAAI,WAAJ,gBAAAA,IAAY,SAAQ,IAAI;AAAA,YAC/B,OAAO;AAAA,YACP,QAAOC,MAAA,IAAI,WAAJ,gBAAAA,IAAY;AAAA,UACrB;AAAA,SAAE;AAAA,MACN;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM;AAAA,IACJ,SAAS,EAAE,OAAO,UAAU;AAAA,EAC9B,IAAI,gBAAgB;AAEpB,MAAI,oBAA6C;AAEjD,MAAI,MAAM,WAAW,GAAG;AACtB,YAAQ;AAAA,MACN,8BAA8BN,OAAM;AAAA,UAClC,qBAAgB,WAAhB,mBAAwB,SAAQ,gBAAgB;AAAA,MAClD;AAAA,IACF;AACA;AAAA,EACF;AACA,MAAI,MAAM,WAAW,GAAG;AACtB,wBAAoB,MAAM,CAAC;AAAA,EAC7B,WAAW,MAAM,SAAS,GAAG;AAC3B,UAAM,WAAW,MAAME,UAAS,OAE7B;AAAA,MACD;AAAA,QACE,MAAM;AAAA,QACN,UAAU;AAAA,QACV,MAAM;AAAA,QACN,SAAS;AAAA,QACT,WAAW;AAAA,QACX,SAAS;AAAA,UACP,MAAM,KAAK,CAAC,GAAG,MAAM,EAAE,MAAM,cAAc,EAAE,KAAK,CAAC;AAAA,QACrD,EAAE,CAAC,GAAG,EAAE;AAAA,MACV;AAAA,IACF,CAAC;AACD,wBAAoB,SAAS;AAAA,EAC/B;AAEA,MAAI,CAAC,mBAAmB;AACtB,YAAQ;AAAA,MACN,iCAAiCF,OAAM;AAAA,UACrC,qBAAgB,WAAhB,mBAAwB,SAAQ,gBAAgB;AAAA,MAClD;AAAA,IACF;AACA;AAAA,EACF;AAGA,QAAM,oBAAoB,cAAc;AAExC,QAAM,eAAe,MAAM,QAAQ;AAAA,IACjC,kBAAkB,MAAM,IAAI,OAAO,SAAS;AAhMhD,UAAAK;AAiMM,UAAI;AACF,cAAM,UAAU,KAAK,MACjBE,MAAK,KAAK,gBAAgB,MAAM,KAAK,GAAG,IACxC;AACJ,cAAM,WAAW,KAAK,OAClBA,MAAK,KAAK,QAAQ,IAAI,GAAG,mBAAmB,KAAK,IAAI,IACrD;AAEJ,YAAI,CAAC,SAAS;AACZ,kBAAQ,IAAI,8BAA8B,IAAI;AAC9C,iBAAO,CAAC,IAAI,cAAc,qBAAqB;AAAA,QAIjD;AAEA,YAAI,CAAC,UAAU;AACb,kBAAQ,IAAI,sCAAsC,IAAI;AACtD,iBAAO,CAAC,IAAI,cAAc,qBAAqB;AAAA,QAIjD;AAEA,cAAM,SAAS,MAAMC,YAAW,OAAO;AAEvC,YAAI,CAAC,QAAQ;AACX,iBAAO,CAAC,UAAU,cAAc,sBAAsB;AAAA,QAIxD;AAEA,cAAM,aAAa,MAAM,SAAS,SAAS,OAAO;AAClD,cAAM,cAAc,MAAMA,YAAW,QAAQ;AAE7C,YAAI,aAAa;AACf,iBAAO,CAAC,UAAU,cAAc,qBAAqB;AAAA,QAIvD;AAEA,cAAM,WAAW,QAAQ;AAEzB,cAAM,gBAAgB,mBAAmB,UAAU;AAEnD,cAAM,2BACJH,MAAA,KAAK,cAAL,gBAAAA,IAAA,WAAiB,mBAAkB;AAErC,cAAM,sBACJ,uCAAY,wBAAwB,SAAS,cAC7C;AAEF,cAAM,mBAAmB,eAAe,kBAAkB;AAE1D,cAAM,YAAY,MAAM,eAAe,gBAAgB;AAEvD,cAAM,UAAU,UAAU,SAAS;AAEnC,eAAO,CAAC,UAAU,cAAc,OAAO;AAAA,MAIzC,SAAS,OAAP;AACA,eAAO,CAAC,IAAI,cAAc,aAAa;AAAA,MAIzC;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAI,aAAa,SAAS,GAAG;AAC3B,wBAAoB;AAAA,MAClB,OAAO;AAAA,MACP,OAAO,kBAAkB;AAAA,MACzB,SAAS,kBAAkB;AAAA,IAC7B,CAAC;AAED,SAAI,4DAAmB,qBAAnB,mBAAqC,QAAQ;AAC/C,YAAM,wBAAwB,kBAAkB,gBAAgB;AAAA,IAClE;AAAA,EACF;AACF;AAEA,IAAO,kBAAQ;;;AevRf,OAAOI,eAAc;AACrB,OAAOC,aAAY;AACnB,SAAuB,UAAAC,eAAc;AACrC,OAAO,iBAAiB;;;ACHxB,OAAOC,eAAc;AACrB,OAAOC,iBAAgB;AACvB,OAAOC,aAAW;;;ACFX,IAAM,iBAAiB,CAAC,QAA6B;AAC1D,QAAM,aAAa,IAAI,OAAO,CAAC,MAAM,UAAU,IAAI,QAAQ,IAAI,MAAM,KAAK;AAC1E,QAAM,SAAS,IAAI,IAAI,UAAU;AACjC,SAAO,MAAM,KAAK,MAAM;AAC1B;;;ADwBO,IAAM,gCAAgC,OAC3C,aACG;AACH,QAAM,UAAU,cAAc,QAAQ;AACtC,MAAI,CAAC,SAAS;AACZ,YAAQ,IAAI,iDAA0C;AACtD;AAAA,EACF;AAEA,QAAM,aAAa,iBAAiB,OAAO;AAE3C,QAAM,UAAU,MAAMC,UAAS,OAE5B;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,UAAU,WAAW;AAAA,MACrB,SAAS,WAAW;AAAA,MACpB,UAAU;AAAA,IACZ;AAAA,EACF,CAAC;AAED,MAAI,QAAQ,SAAS,SAAS,GAAG;AAE/B,UAAM,iBAAoC,CAAC;AAC3C,YAAQ,SAAS,QAAQ,CAAC,SAAS;AACjC,YAAM,EAAE,MAAAC,OAAM,QAAQ,IAAI,2BAA2B,IAAI;AACzD,qBAAeA,KAAI,IAAI,WAAW;AAAA,IACpC,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEO,IAAM,iBAAiB,CAAC,UAAoB;AACjD,QAAM,cAAc,MAAM,IAAI,CAAC,SAAS;AACtC,WAAO,2BAA2B,IAAI;AAAA,EACxC,CAAC;AAED,QAAM,QAAQ,YAAY,IAAI,CAAC,SAAS,KAAK,IAAI;AACjD,QAAM,aAAa,eAAe,KAAK;AAEvC,MAAI,WAAW,SAAS,GAAG;AACzB,WAAO;AAAA,eAAsF,WAAW;AAAA,MACtG;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEO,IAAM,gBAAgB,CAC3B,aACmB;AACnB,MAAI,SAAS,WAAW,GAAG;AACzB,WAAO;AAAA,EACT;AAEA,QAAM,sBAA+B;AAAA,IACnC,OAAO,CAAC;AAAA,IACR,OAAO,CAAC;AAAA,IACR,OAAO,CAAC;AAAA,EACV;AAEA,WAAS,QAAQ,CAAC,SAAS;AACzB,UAAM,UAAU,KAAK;AAErB,UAAM,aAAaC,YAAW,SAAS,KAAK,MAAM;AAClD,UAAM,aAAaA,YAAW,SAAS,KAAK,MAAM;AAElD,QAAI,eAAe,YAAY;AAC7B,UAAI,YAAY;AACd,4BAAoB,UAAU,EAAE,KAAK;AAAA,UACnC,MAAM,KAAK;AAAA,UACX,MAAM;AAAA,UACN,IAAI,KAAK;AAAA,QACX,CAAC;AACD;AAAA,MACF;AAAA,IACF;AAEA,QAAI,YAAY;AACd,0BAAoB,UAAU,EAAE,KAAK;AAAA,QACnC,MAAM,KAAK;AAAA,QACX,MAAM;AAAA,QACN,IAAI,KAAK;AAAA,MACX,CAAC;AAAA,IACH;AAEA,QAAI,YAAY;AACd,0BAAoB,UAAU,EAAE,KAAK;AAAA,QACnC,MAAM,KAAK;AAAA,QACX,MAAM;AAAA,QACN,IAAI,KAAK;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAEA,IAAM,mBAAmB,CAAC,YAAqB;AAC7C,MAAI,gBAAgB;AACpB,MAAI,gBAAgB;AAEpB,GAAC,QAAQ,OAAO,QAAQ,OAAO,QAAQ,KAAK,EAAE,QAAQ,CAAC,UAAU;AAC/D,UAAM,QAAQ,CAAC,SAAS;AACtB,UAAI,KAAK,KAAK,SAAS,eAAe;AACpC,wBAAgB,KAAK,KAAK;AAAA,MAC5B;AAEA,UAAI,KAAK,KAAK,SAAS,eAAe;AACpC,wBAAgB,KAAK,KAAK;AAAA,MAC5B;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AAED,mBAAiB;AAEjB,QAAM,UAMA,CAAC;AAEP,QAAM,oBAAoB,UAAU,OAAO,aAAa;AACxD,QAAM,oBAAoB,OAAO,OAAO,aAAa;AACrD,QAAM,eAAe;AACrB,QAAM,SAAS;AAAA,KAAQ,qBAAqB,oBAAoB,aAAa;AAAA,IAC3E;AAAA,EACF;AACA,UAAQ,KAAK,IAAIF,UAAS,UAAU,MAAM,CAAC;AAE3C,MAAI,QAAQ,MAAM,SAAS,GAAG;AAC5B,YAAQ;AAAA,MACN,IAAIA,UAAS,UAAUG,QAAM,MAAM,KAAK,KAAK,iBAAiB,CAAC;AAAA,IACjE;AACA,YAAQ,MAAM,QAAQ,CAAC,SAAS;AAC9B,cAAQ,KAAK;AAAA,QACX,MAAM,GAAG,KAAK,KAAK,OAAO,aAAa,KAAK,KAAK,KAAK;AAAA,UACpD;AAAA,QACF,SAAS,KAAK;AAAA,QACd,OAAO,GAAG,KAAK,SAAS,KAAK;AAAA,MAC/B,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,MAAI,QAAQ,MAAM,SAAS,GAAG;AAC5B,YAAQ;AAAA,MACN,IAAIH,UAAS,UAAUG,QAAM,MAAM,KAAK,KAAK,iBAAiB,CAAC;AAAA,IACjE;AACA,YAAQ,MAAM,QAAQ,CAAC,SAAS;AAC9B,cAAQ,KAAK;AAAA,QACX,MAAM,GAAG,KAAK,KAAK,OAAO,aAAa,KAAK,KAAK,KAAK;AAAA,UACpD;AAAA,QACF,SAAS,KAAK;AAAA,QACd,OAAO,GAAG,KAAK,SAAS,KAAK;AAAA,MAC/B,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,MAAI,QAAQ,MAAM,SAAS,GAAG;AAC5B,YAAQ;AAAA,MACN,IAAIH,UAAS,UAAUG,QAAM,MAAM,KAAK,KAAK,iBAAiB,CAAC;AAAA,IACjE;AACA,YAAQ,MAAM,QAAQ,CAAC,SAAS;AAC9B,cAAQ,KAAK;AAAA,QACX,MAAM,GAAG,KAAK,KAAK,OAAO,aAAa,KAAK,KAAK,KAAK;AAAA,UACpD;AAAA,QACF,SAAS,KAAK;AAAA,QACd,OAAO,GAAG,KAAK,SAAS,KAAK;AAAA,MAC/B,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,QAAM,WAAW,QAAQ,SAAS;AAElC,SAAO,EAAE,SAAS,SAAS;AAC7B;;;ADnMA,OAAOC,aAAW;AAsBlB,IAAMC,QAAO,CAAC,YAAqB;AACjC,SAAO,QACJ,QAAQ,QAAQ,EAChB;AAAA,IACC;AAAA,EACF,EACC;AAAA,IACC,IAAIC,QAAO,mBAAmB,8BAA8B,EACzD,QAAQ,CAAC,QAAQ,QAAQ,CAAC,EAC1B;AAAA,MACC;AAAA,MACA;AAAA,IACF;AAAA,EACJ,EACC;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACF,EACC;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACF,EACC,OAAOC,OAAM;AAClB;AAEA,IAAMA,UAAS,OAAO,YAA0B;AAC9C,QAAM,EAAE,KAAK,QAAQ,IAAI,IAAI;AAE7B,QAAM,WAAW,MAAM,gBAAQ,kBAAkB,yBAAyB;AAC1E,MAAI,EAAC,qCAAU,SAAQ;AACrB,YAAQ,IAAI,gDAAyC;AACrD;AAAA,EACF;AAEA,MAAI,mBAAuD;AAE3D,MAAI,KAAK;AACP,UAAMC,oBAAmB,MAAM,yBAAyB,KAAK,QAAQ;AACrE,QAAI,CAACA;AAAkB;AAEvB,QAAI,QAAQ;AACV,0BAAoBA,iBAAgB;AACpC;AAAA,IACF;AAEA,oBAAgBA,iBAAgB;AAChC;AAAA,EACF;AAGA,QAAM,EAAE,OAAO,MAAM,IAAI,gBAAgB,QAAQ,KAAK;AACtD,UAAQ,IAAIC,QAAO,qBAAqB,KAAK,CAAC;AAC9C,UAAQ,IAAI,KAAK;AACjB,UAAQ;AAAA,IACN,KAAKC,QAAM;AAAA,MACTA,QAAM,KAAK,SAAS;AAAA,IACtB;AAAA,EACF;AACA,UAAQ;AAAA,IACN,KAAKA,QAAM;AAAA,MACTA,QAAM,KAAK,QAAQ;AAAA,IACrB;AAAA,EACF;AACA,UAAQ;AAAA,IACN,KAAKA,QAAM;AAAA,MACTA,QAAM,KAAK,QAAQ;AAAA,IACrB;AAAA,EACF;AACA,UAAQ,IAAI;AAEZ,QAAM,EAAE,iBAAiB,IAAI,MAAMC,UAAS,OAEzC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SACE;AAAA,MACF,SAAS;AAAA,QACP;AAAA,UACE,MAAM;AAAA,UACN,OAAO;AAAA,QACT;AAAA,QACA;AAAA,UACE,MAAM;AAAA,UACN,OAAO;AAAA,QACT;AAAA,QACA;AAAA,UACE,MAAM;AAAA,UACN,OAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AAED,MAAI,qBAAqB,iCAA8B;AACrD,uBAAmB,MAAM,8BAA8B,QAAQ;AAAA,EACjE;AACA,MAAI,qBAAqB,uBAAyB;AAChD,uBAAmB,MAAM,yBAAyB,uBAAY,QAAQ;AAAA,EACxE;AACA,MAAI,qBAAqB,qBAAwB;AAC/C,uBAAmB,MAAM;AAAA,MACvB;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAEA,MAAI,CAAC;AAAkB;AAEvB,MAAI,QAAQ;AACV,wBAAoB,gBAAgB;AAAA,EACtC,OAAO;AACL,oBAAgB,gBAAgB;AAAA,EAClC;AACF;AAEA,IAAM,2BAA2B,OAC/B,KACA,aACsC;AACtC,MAAI,QAAQ,uBAAY;AACtB,UAAM,+BAA+B,SAAS;AAAA,MAC5C,CAAC,QAAQ,IAAI,YAAY,IAAI;AAAA,IAC/B;AACA,QAAI,8BAA8B;AAChC,cAAQ,IAAI;AACZ,cAAQ,IAAI,gEAA2D;AACvE,aAAO;AAAA,IACT;AAAA,EACF;AAGA,UAAQ,IAAI;AAEZ,QAAM,sBAAyC,CAAC;AAChD,aAAW,OAAO,UAAU;AAC1B,QAAI,UAAU,IAAI;AAElB,QAAI,QAAQ,qBAAwB;AAClC,YAAM,qBAAqB,MAAM;AAAA,QAC/B,MAAM,+BAA+B,IAAI,MAAM,IAAI,MAAM;AAAA,QACzD,4CAA4C,IAAI;AAAA,MAClD;AACA,gBAAU,IAAI;AAAA,IAChB;AACA,QAAI,QAAQ,uBAAY;AACtB,gBAAU,+BAA+B,IAAI,MAAM,IAAI,MAAM;AAAA,IAC/D;AACA,QAAI,QAAQ,uBAAY;AACtB,gBAAU,IAAI,IAAI;AAAA,IACpB;AACA,QAAI,QAAQ,mBAAU;AACpB,gBAAU;AAAA,IACZ;AAEA,wBAAoB,IAAI,IAAI,IAAI;AAAA,EAClC;AAEA,SAAO;AACT;AAEA,IAAM,sBAAsB,OAAO,aAA8B;AAC/D,QAAM,KAAK,MAAM,cAAc;AAC/B,QAAM,iBAAiB,WAAW,GAAG,IAAI,EAAE;AAC3C,MAAI,uBAAuB;AAC3B,aAAW,CAACC,OAAM,OAAO,KAAK,OAAO,QAAQ,QAAQ,GAAG;AACtD,4BAAwB,GAAGA,SAAQ;AAAA,EACrC;AACA,UAAQ,IAAI;AACZ,UAAQ,IAAI,GAAG,GAAG,QAAQ,eAAe,KAAK,GAAG,KAAK,sBAAsB;AAC9E;AAEA,IAAM,kBAAkB,OAAO,sBAAuC;AACpE,UAAQ,IAAI,+BAA+B;AAG3C,QAAM,cAAc,MAAM,YAAY,KAAK,QAAQ,IAAI,CAAC;AAExD,cAAY,OAAO;AAAA,IACjB,cAAc;AAAA,MACZ,GAAK,YAAY,QAAQ,gBAAgB,CAAC;AAAA,MAC1C,GAAI,qBAAqB,CAAC;AAAA,IAC5B;AAAA,EACF,CAAC;AACD,QAAM,YAAY,KAAK;AAEvB,kBAAgB,CAAC,GAAG,KAAK;AAC3B;AAEA,IAAO,iBAAQP;;;AGrOf,OAAO,aAAa;AACpB,OAAOQ,UAAS;AAEhB,IAAM,SAAS,CAAC,YAAqB;AACnC,SAAO,QACJ,QAAQ,QAAQ,EAChB,YAAY,iDAAiD,EAC7D,OAAOC,QAAM;AAClB;AAEA,IAAMA,WAAS,YAAY;AACzB,QAAMC,WAAUF,KAAI,gCAAgC,EAAE,MAAM;AAC5D,QAAM,OAAO,MAAM,QAAQ;AAAA,IACzB;AAAA,MACE,QAAQ,CAAC,MAAM,KAAK;AAAA,MACpB,UAAU,CAAC,QAAQ,QAAQ,KAAK;AAAA,MAChC,UAAU,CAAC,UAAU,WAAW,QAAQ;AAAA,IAC1C;AAAA,IACA,EAAE,cAAc,MAAM,UAAU,KAAK;AAAA,EACvC;AAEA,QAAM,WAAY,MAAM,2BAA2B,KAAM,CAAC;AAC1D,QAAM,mBAAmB,SACtB,IAAI,CAAC,QAAQ;AACZ,WAAO,MAAM,IAAI,SAAS,IAAI;AAAA,EAChC,CAAC,EACA,KAAK,IAAI;AAEZ,EAAAE,SAAQ,KAAK;AACb,UAAQ,IAAI,IAAI;AAChB,UAAQ,IAAI,qBAAqB;AACjC,UAAQ,IAAI,gBAAgB;AAC9B;AAEA,IAAO,iBAAQ;;;ACpCf,OAAOC,aAAW;AAClB,OAAOC,eAA0C;;;ACDjD,OAAOC,eAAc;;;ACCrB,OAAOC,YAAW;AASX,IAAM,iBAAiB,OAAO,WAAiC;AACpE,QAAM;AAAA,IACJ,sBAAAC;AAAA,IACA;AAAA,IACA,kBAAAC;AAAA,IACA,qBAAAC;AAAA,EACF,IAAI;AACJ,MAAI,uBAAuBF,qBAAoB;AAAG;AAElD,QAAM,uBAAuBC,iBAAgB;AAE7C,UAAQ,IAAI,wBAAiB,oBAAoB;AAEjD,QAAM,wBAAwB,UAAQ,QAAQ,kBAAkB;AAChE,QAAM,EAAE,OAAO,IAAIE,OAAM,KAAK,uBAAuB;AAAA,IACnD;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAe,8CAA8CD;AAAA,IAC7D;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,MAAI,QAAQ;AACV,YAAQ,IAAI,MAAM;AAAA,EACpB;AAEA,UAAQ,IAAI,aAAM,kCAAkC;AACtD;;;ACzCA,OAAOE,aAAW;AAUX,IAAM,iBAAiB,CAAC,WAA8B;AAC3D,QAAM,EAAE,IAAAC,KAAI,OAAO,aAAa,SAAS,IAAI;AAE7C,MAAI,UAAU;AACZ,WAAO;AAAA,MACL,OAAOA;AAAA,MACP,MAAM,GAAGD,QAAM,KAAK,KAAK;AAAA,MACzB,UAAUA,QAAM,UAAU,QAAQ;AAAA,IACpC;AAAA,EACF;AAEA,SAAO;AAAA,IACL,OAAOC;AAAA,IACP,MAAM,GAAGD,QAAM,WAAW,KAAK,OAAO;AAAA,EACxC;AACF;;;ACnBA,IAAM,KAAK;AACX,IAAM,OAAO;AACb,IAAM,uBAAuB,CAAC,oBAAoB,MAAM;AACxD,IAAM,mBAAmB,CAAC,QAAQ,iBAAiB;AACnD,IAAM,sBAAsB;AAErB,IAAM,uBAAoC;AAAA,EAC/C;AAAA,EACA,WAAW,CAAC,gBAA8B;AACxC,UAAM,QAAQ;AACd,UAAM,cAAc;AACpB,QAAI;AAEJ,QACE;AAAA;AAAA;AAAA;AAAA;AAAA,IAKA,EAAE,SAAS,WAAW,GACtB;AACA,iBACE;AAAA,IACJ;AAEA,WAAO,eAAe;AAAA,MACpB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,gBAAgB,YAAY;AAC1B,WAAO,MAAM,eAAe;AAAA,MAC1B;AAAA,MACA,iBAAiB;AAAA,MACjB;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;ACxCA,IAAME,MAAK;AACX,IAAMC,QAAO;AACb,IAAMC,wBAAuB,CAAC,oBAAoB,MAAM;AACxD,IAAMC,oBAAmB,CAAC,gBAAgB,yBAAyB;AACnE,IAAMC,uBAAsB;AAErB,IAAM,yBAAsC;AAAA,EACjD,IAAAJ;AAAA,EACA,WAAW,CAAC,gBAA8B;AACxC,UAAM,QAAQ;AACd,UAAM,cAAc;AACpB,QAAI;AAEJ,QAAI,uCAAqC;AACvC,iBAAW;AAAA,IACb;AAEA,QACE,uCACA,iDACA,6CACA;AACA,iBAAW;AAAA,IACb;AAEA,WAAO,eAAe;AAAA,MACpB,IAAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,gBAAgB,YAAY;AAC1B,WAAO,MAAM,eAAe;AAAA,MAC1B,sBAAAE;AAAA,MACA,iBAAiBD;AAAA,MACjB,kBAAAE;AAAA,MACA,qBAAAC;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;AC9BO,IAAM,wBAAuC;AAAA,EAClD;AAAA,EACA;AACF;;;ALdO,IAAM,0BAA0B,MAAM;AAC3C,QAAM,cAAc,eAAe;AAEnC,QAAM,qBAAqB,sBAAsB;AAAA,IAAI,CAAC,gBACpD,YAAY,UAAU,WAAW;AAAA,EACnC;AAEA,MAAI,mBAAmB,MAAM,CAAC,WAAW,OAAO,QAAQ,GAAG;AACzD,WAAO;AAAA,MACL;AAAA,QACE,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAAA,MACA,GAAG;AAAA,IACL;AAAA,EACF;AACA,SAAO;AACT;AAEO,IAAM,uBAAuB,YAAY;AAC9C,SAAO,MAAMC,UAAS,OAA8B;AAAA,IAClD;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS,wBAAwB;AAAA,MACjC,SAAS;AAAA,IACX;AAAA,EACF,CAAC;AACH;;;AMlCA,OAAOC,aAAW;AAClB,OAAOC,eAAc;;;ACCrB;AAAA,EACE,YAAAC;AAAA,EACA,cAAAC;AAAA,EACA,aAAAC;AAAA,EACA,kBAAAC;AAAA,EACA,eAAAC;AAAA,OACK;AACP,SAAS,QAAAC,OAAM,gBAAgB;;;ACQxB,IAAM,qBAAiC;AAAA,EAC5C;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AAAA,EACA;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AAAA,EACA;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AAAA,EACA;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AAAA,EACA;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AAAA,EACA;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AAAA,EACA;AAAA,IACE,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,UAAU;AAAA,IACV,kBAAkB;AAAA,EACpB;AACF;;;ADnDA,IAAM,mBAAmB,GAAG;AAC5B,IAAM,iBAAiB,GAAG;AAEnB,IAAM,kBAAkB,CAC7B,aACA,iBACG;AACH,cAAY,QAAQ,CAAC,eAAe;AAClC,UAAM,EAAE,UAAU,iBAAiB,IAAI,mBAAmB,UAAU;AACpE,UAAM,uBAAuB,sBAAsB,eAAe,CAAC;AACnE,UAAM,aAAa,gBAAgB,eAAe;AAClD,UAAM,WAAWC,MAAK,YAAY,QAAQ;AAC1C,UAAM,WAAWA,MAAK,QAAQ,IAAI,GAAG,YAAY,QAAQ;AACzD,UAAM,mBAAmBA,MAAK,QAAQ,IAAI,GAAG,oBAAoB;AAEjE,QAAIC,gBAAe,QAAQ,GAAG;AAC5B,cAAQ,MAAM,oBAAe,0BAA0B;AACvD;AAAA,IACF;AAGA,IAAAC,WAAU,YAAY,EAAE,WAAW,KAAK,CAAC;AAGzC,IAAAC,UAAS,GAAG,oBAAoB,oBAAoB,QAAQ;AAE5D,YAAQ,IAAI,uBAAgB,iCAAiC;AAE7D,UAAM,eAAyB,CAAC;AAChC,UAAM,eAAyB,CAAC;AAEhC,QAAIF,gBAAe,GAAG,kBAAkB,YAAY,GAAG;AACrD,UAAI;AACF,QAAAG,aAAY,GAAG,kBAAkB,cAAc;AAAA,UAC7C,WAAW;AAAA,UACX,eAAe;AAAA,QACjB,CAAC,EAAE,QAAQ,CAAC,SAAS;AACnB,cAAI,CAAC,KAAK,YAAY,GAAG;AACvB,kBAAM,WAAWJ,MAAK,KAAK,MAAM,KAAK,IAAI;AAC1C,kBAAM,kBAAkBA;AAAA,cACtB;AAAA,cACA,SAASA,MAAK,gBAAgB,UAAU,GAAG,KAAK,IAAI;AAAA,cACpD,KAAK;AAAA,YACP;AACA,kBAAM,0BAA0BA;AAAA,cAC9B;AAAA,cACA,SAAS,kBAAkB,eAAe;AAAA,YAC5C;AAEA,gBAAIK,YAAW,eAAe,GAAG;AAC/B,2BAAa,KAAK,uBAAuB;AAAA,YAC3C,OAAO;AACL,kBAAI;AACF,gBAAAF,UAAS,UAAU,eAAe;AAClC,6BAAa,KAAK,uBAAuB;AAAA,cAC3C,SAAS,OAAP;AACA,6BAAa,KAAK,uBAAuB;AAAA,cAC3C;AAAA,YACF;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH,SAAS,OAAP;AAAA,MAAe;AAAA,IACnB;AAEA,QAAI,aAAa,QAAQ;AACvB,cAAQ,IAAI,wCAAiC,aAAa,KAAK,IAAI,GAAG;AAAA,IACxE;AACA,QAAI,aAAa,QAAQ;AACvB,cAAQ,MAAM,mCAA8B,aAAa,KAAK,IAAI,GAAG;AAAA,IACvE;AAAA,EACF,CAAC;AACH;AAEO,IAAM,qBAAqB,CAAC,eAAqC;AACtE,QAAM,WAAW,mBAAmB,KAAK,CAAC,MAAM,EAAE,OAAO,UAAU;AAEnE,MAAI,CAAC,UAAU;AACb,UAAM,IAAI,MAAM,qBAAqB,YAAY;AAAA,EACnD;AAEA,SAAO;AACT;AAEO,IAAM,iBAAiB,MAAM;AAClC,QAAM,cAAc,eAAe;AACnC,QAAM,EAAE,MAAAG,MAAK,IAAI,gBAAgB,WAAW;AAC5C,SAAOA;AACT;;;ADjGO,IAAM,uBAAuB,MAAM;AACxC,SAAO,mBAAmB,IAAI,CAAC,aAAa;AAC1C,UAAM,EAAE,IAAAC,KAAI,OAAO,YAAY,IAAI;AAEnC,WAAO;AAAA,MACL,OAAOA;AAAA,MACP,MAAM,GAAGC,QAAM,WAAW,KAAK,OAAO;AAAA,IACxC;AAAA,EACF,CAAC;AACH;AAEO,IAAM,oBAAoB,YAAY;AAC3C,SAAO,MAAMC,UAAS,OAGnB;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS,qBAAqB;AAAA,IAChC;AAAA,IACA;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS,eAAe;AAAA,IAC1B;AAAA,EACF,CAAC;AACH;;;AP3BA,IAAM,cAAc,CAClB,OACA,YACmD;AACnD,SAAO,QAAQ,IAAI,CAAC,WAAW;AAC7B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,MAAM,MAAM,OAAO;AAAA,MACnB,OAAO;AAAA,QACL;AAAA,QACA,WAAW,OAAO;AAAA,MACpB;AAAA,IACF;AAAA,EACF,CAAC;AACH;AAWO,IAAM,mBAAmB,YAAY;AAC1C,SAAO,MAAMC,UAAS,OAAyB;AAAA,IAC7C;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS;AAAA,QACP,IAAIA,UAAS,UAAUC,QAAM,KAAK,UAAU,CAAC;AAAA,QAC7C,GAAG,YAAY,YAAY,qBAAqB,CAAC;AAAA,QACjD,IAAID,UAAS,UAAUC,QAAM,KAAK,aAAa,CAAC;AAAA,QAChD,GAAG,YAAY,eAAe,wBAAwB,CAAC;AAAA,QACvD,IAAID,UAAS,UAAUC,QAAM,KAAK,UAAU,CAAC;AAAA,QAC7C;AAAA,UACE,MAAMA,QAAM,WAAW,sBAAsB;AAAA,UAC7C,OAAO;AAAA,YACL,OAAO;AAAA,YACP,WAAW;AAAA,UACb;AAAA,QACF;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAAA,EACF,CAAC;AACH;;;AUxDA,SAAS,YAAAC,WAAU,WAAAC,gBAAe;AAIlC,IAAM,uBAAuB,OAAOC,UAAkB;AACpD,MAAI,gBAAgBA;AAEpB,MAAI,CAAC,eAAe;AAClB,UAAM,SAAS,MAAM,qBAAqB;AAE1C,oBAAgB,OAAO;AAAA,EACzB;AAEA,QAAM,cAAc,sBAAsB;AAAA,IACxC,CAACC,iBAAgBA,aAAY,OAAO;AAAA,EACtC;AAEA,MAAI,aAAa;AACf,UAAM,YAAY,eAAe;AAAA,EACnC;AACF;AAEO,IAAM,qBAAqB,IAAIC,SAAQ,aAAa,EACxD;AAAA,EACC,IAAIC,UAAS,UAAU,yBAAyB,EAAE;AAAA,IAChD,sBAAsB,IAAI,CAAC,gBAAgB,YAAY,EAAE;AAAA,EAC3D;AACF,EACC,OAAO,oBAAoB;;;AC5B9B,SAAS,YAAAC,WAAU,WAAAC,gBAAe;AAM3B,IAAM,uBAAuB,OAClC,WACA,YACG;AACH,MAAI,CAAC,UAAU,QAAQ;AACrB,UAAM,EAAE,WAAAC,YAAW,cAAc,IAAI,MAAM,kBAAkB;AAE7D,WAAO,gBAAgBA,YAAW,aAAa;AAAA,EACjD;AAEA,kBAAgB,WAAW,QAAQ,IAAI;AACzC;AAEO,IAAM,kBAAkB,IAAIC,SAAQ,UAAU,EAClD;AAAA,EACC,IAAIC,UAAS,kBAAkB,oBAAoB,EAChD,QAAQ,mBAAmB,IAAI,CAAC,aAAa,SAAS,EAAE,CAAC,EACzD,QAAQ,CAAC,CAAC;AACf,EACC,OAAO,qBAAqB,4BAA4B,EACxD,OAAO,oBAAoB;;;AC1B9B,SAAS,YAAAC,WAAU,WAAAC,gBAAe;AAGlC,IAAM,uBAAuB,OAC3B,WACA,SACA,YACG;AACH;AAAA,IACE;AAAA,MACE,SAAS,mCAAS;AAAA,MAClB,MAAM,QAAQ,gBAAgB,EAAE;AAAA,IAClC;AAAA,IACA;AAAA,EACF;AACF;AAEO,IAAM,kBAAkB,IAAIC,SAAQ,UAAU,EAClD,YAAY,IAAIC,UAAS,kBAAkB,wBAAwB,CAAC,EACpE,OAAO,qBAAqB,kCAAkC,EAC9D;AAAA,EACC;AAAA,EACA;AAAA,EACA;AACF,EACC,OAAO,oBAAoB;;;ACf9B,IAAMC,QAAO,CAAC,YAAqB;AACjC,SAAO,QACJ,QAAQ,KAAK,EACb,YAAY,+CAA+C,EAC3D,qBAAqB,KAAK,EAC1B,OAAO,gBAAgB,EACvB,WAAW,eAAe,EAC1B,WAAW,eAAe,EAC1B,WAAW,kBAAkB;AAClC;AAEA,IAAM,mBAAmB,YAAY;AACnC,QAAM,EAAE,UAAU,IAAI,MAAM,iBAAiB;AAE7C,MAAI,UAAU,UAAU,YAAY;AAClC,oBAAgB,CAAC,UAAU,SAAS,CAAC;AAAA,EACvC;AAEA,MAAI,UAAU,UAAU,eAAe;AACrC,UAAM,cAAc,sBAAsB;AAAA,MACxC,CAACC,iBAAgBA,aAAY,OAAO,UAAU;AAAA,IAChD;AAEA,WAAM,2CAAa;AAAA,EACrB;AAEA,MAAI,UAAU,UAAU,YAAY;AAClC,UAAM,gBAAgB,CAAC,GAAG,CAAC,CAAC;AAAA,EAC9B;AACF;AAEA,IAAO,cAAQD;;;ACzCf,OAAOE,cAAa;AACpB,OAAO,QAAQ;AAER,IAAM,YAAY,MAAM;AAC7B,QAAM,aAAa,GAAG,KAAK;AAE3B,QAAM,QAAuD;AAAA,IAC3D,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,YAAY;AAAA,EACd;AAEA,SAAO,MAAM,UAAU;AACzB;AAEO,IAAM,QAAQ,YAAY;AAE/B,QAAM,CAAC,GAAG,MAAM,IACb,MAAMA,SAAQ,QAAQ,UAAU;AAEnC,SAAO;AAAA,IACL,MAAM,UAAU;AAAA,IAChB,SAAS;AAAA,EACX;AACF;;;AClBA,OAAOC,YAAW;AAeX,IAAM,mBAAmB,YAAoC;AAClE,QAAMC,MAAK,MAAM,MAAM;AAEvB,QAAM,OAAO;AAAA,IACX,SAAS,IAAI;AAAA,IACb,aAAa,QAAQ;AAAA,IACrB,IAAIA,IAAG;AAAA,IACP,WAAWA,IAAG;AAAA,IACd,SAAS,QAAQ,KAAK,CAAC;AAAA,IACvB,UAAW,MAAM,2BAA2B,KAAM,CAAC;AAAA,IACnD,kBAAkB,eAAe;AAAA,IACjC,WAAW,mBAAmB;AAAA,EAChC;AAEA,SAAO;AACT;AAEO,IAAM,gBAAgB,YAAY;AACvC,MAAI,IAAI,wBAAwB;AAAQ;AAExC,MAAI;AACF,UAAM,OAAO,MAAM,iBAAiB;AAEpC,UAAMD,OAAM,oCAAoC;AAAA,MAC9C,QAAQ;AAAA,MACR,MAAM,KAAK,UAAU,IAAI;AAAA,MACzB,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,IAChD,CAAC;AAAA,EACH,SAAS,OAAP;AAAA,EAAe;AACnB;;;ACjDA,OAAO,YAAY;AACnB,OAAOE,YAAW;AAKlB,IAAM,mBACJ;AAEF,IAAM,yBAAyB;AAE/B,IAAM,qBAAqB,CAAC,SAAiB;AAC3C,QAAM,WAAW,KAAK,MAAM,sBAAsB;AAElD,SAAO,SACJ,MAAM,CAAC,EACP,IAAI,CAAC,YAAY,GAAG,yBAAyB,SAAS;AAC3D;AAEA,IAAM,oBAAoB,CAAC,QAA8B;AACvD,QAAM,QAAQ,IAAI,QAAQ,wBAAwB,KAAK;AACvD,QAAM,SAAS,OAAO,KAAK;AAC3B,QAAM,WACJ,OAAO,QAAQ,WAAW,IACtB,MAAM,QAAQ,QAAQ,EAAE,IACxB,OAAO,QAAQ,QAAQ,QAAQ,EAAE,GACrC,KAAK;AAEP,SAAO;AAAA,IACL,GAAG,OAAO;AAAA,IACV;AAAA,EACF;AACF;AAEO,IAAM,mBAAmB,YAAY;AAC1C,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,gBAAgB,EAC1C,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,EACxB,MAAM,MAAM,EAAE;AAEjB,UAAM,gBAAgB,mBAAmB,QAAQ,EAAE;AAAA,MAAI,CAAC,YACtD,kBAAkB,OAAO;AAAA,IAC3B;AAEA,WAAO;AAAA,EACT,SAAS,GAAP;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEO,IAAM,qBAAqB,YAAY;AAC5C,QAAM,gBAAgB,MAAM,iBAAiB;AAE7C,QAAM,uBAAuB,cAAc;AAAA,IACzC,CAAC,MAAM,QAAQ,EAAE,MAAM,MAAM;AAAA,EAC/B;AAEA,MAAI,qBAAqB,WAAW,GAAG;AACrC;AAAA,EACF;AAEA,QAAM,sBAAsB,qBACzB,IAAI,CAAC,MAAM;AACV,UAAM,OAAO,qBAAqB,SAAS,IAAI,YAAO;AACtD,UAAM,UAAU,uBAAuB,EAAE,OAAO;AAChD,WAAO,GAAG,OAAO;AAAA,EACnB,CAAC,EACA,KAAK,EAAE,EACP,KAAK;AAER,UAAQ;AAAA,IACNC,OAAM,qBAAqB;AAAA,MACzB,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,aAAa;AAAA,MACb,gBAAgB;AAAA,IAClB,CAAC;AAAA,EACH;AACF;;;AnE9DA,IAAM,qBAAqB;AAE3B,IAAM,YAAY,MAAM;AACtB,QAAM,UAAU,IAAIC,SAAQ;AAE5B,UACG;AAAA,IACC,kBAAkB;AAAA,IAClB;AAAA,IACA;AAAA,EACF,EACC;AAAA,IACC,OAAO,SAAS,UAAU;AAAA,MACxB,MAAM;AAAA,MACN,kBAAkB;AAAA,MAClB,gBAAgB;AAAA,MAChB,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH,EACC,MAAM,qBAAqB,EAC3B,WAAW,cAAc,2BAA2B;AAGvD,kBAAQ,OAAO;AACf,0BAAe,OAAO;AACtB,iBAAO,OAAO;AACd,cAAI,OAAO;AACX,gBAAM,OAAO;AACb,gBAAM,OAAO;AACb,cAAI,OAAO;AACX,wBAAa,OAAO;AACpB,iBAAO,OAAO;AACd,mBAAS,OAAO;AAChB,cAAI,OAAO;AAEX,UAAQ,KAAK,aAAa,OAAO,gBAAgB;AAC/C,QAAI,YAAY,KAAK,SAAS,KAAK,GAAG;AACpC,YAAM,mBAAmB;AAAA,IAC3B;AAAA,EACF,CAAC;AAED,UAAQ,KAAK,cAAc,CAAC,gBAAgB;AAC1C,UAAM,UAAU,YAAY,KAAK,CAAC;AAElC,QAAI,CAAC,KAAK,EAAE,SAAS,OAAO;AAAG;AAE/B,kBAAc;AAAA,EAChB,CAAC;AAED,UAAQ,MAAM,QAAQ,IAAI;AAE1B,MAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,EAAE,QAAQ;AACjC,YAAQ,WAAW;AAAA,EACrB;AACF;AAEA,UAAU;","names":["Command","chalk","spinner","incompatiblePackages","start","chalk","execa","ProjectTypes","UIFrameworks","PackageManagerTypes","readFileSync","readFileSync","execa","unlinkSync","name","action","unlinkSync","execa","load","path","action","chalk","chalk","name","execa","action","Option","execa","execa","chalk","load","action","isInstalled","dev","Option","action","Option","Option","action","chalk","action","chalk","path","chalk","inquirer","pathExists","path","path","namedImports","readFileSync","join","path","path","config","path","dedent","chalk","chalk","cardinal","boxen","relative","chalk","printSwizzleMessage","dedent","boxen","inquirer","chalk","requiredPackages","installRequiredPackages","inquirer","chalk","requiredPackages","installRequiredPackages","chalk","action","inquirer","boxen","config","_a","_b","path","pathExists","inquirer","center","Option","inquirer","semverDiff","chalk","inquirer","name","semverDiff","chalk","chalk","load","Option","action","selectedPackages","center","chalk","inquirer","name","ora","action","spinner","chalk","inquirer","inquirer","execa","incompatiblePackages","requiredPackages","transformerFileName","execa","chalk","id","id","name","incompatiblePackages","requiredPackages","transformerFileName","inquirer","chalk","inquirer","copySync","existsSync","mkdirSync","pathExistsSync","readdirSync","join","join","pathExistsSync","mkdirSync","copySync","readdirSync","existsSync","path","id","chalk","inquirer","inquirer","chalk","Argument","Command","name","integration","Command","Argument","Argument","Command","providers","Command","Argument","Argument","Command","Command","Argument","load","integration","envinfo","fetch","os","boxen","boxen","Command"]}